### Development Step 33: Find Australia‚Äôs First Notts County Manager or Aussie Managers with Italian Kit Connections

**Description**: Search for information about which Australian football manager was the first to manage Notts County specifically, or alternatively search for any Australian managers who have managed English clubs with historical Italian kit connections. Focus on finding if there's a different Australian manager than Harry Kewell who managed an English club that actually sent replica kits to Italian clubs. Search for keywords including 'Australian manager Notts County', 'first Australian football manager Italian kit connection', 'Australian coach English club Juventus connection', and 'Notts County Australian manager history'.

**Use Cases**:
- Sports historian compiling a comprehensive timeline of Australian managers in English football clubs for a published monograph
- Football club marketing team researching historical kit exchanges with Italian clubs to fuel a nostalgia-driven social media campaign
- Sports journalist fact-checking the details of Harry Kewell‚Äôs 2018 Notts County appointment and uncovering any Italian kit connections for a feature article
- E-commerce memorabilia vendor verifying the provenance of replica Juventus‚ÄìNotts County jerseys before listing them in an online store
- Football analytics startup building a searchable database of manager nationalities, club tenures, and cross-club kit histories for talent scouting tools
- Academic researcher studying the globalization of football culture by tracing kit collaborations and managerial appointments between Australia, England, and Italy
- Sports marketing consultancy identifying legacy kit-story angles for branded partnerships between lower-league English clubs and Serie A teams
- Podcast producer gathering verified anecdotes about Australian coaches and Italian kit links to craft an in-depth episode on cross-continental football ties

```
import os
import requests
import json
from datetime import datetime

# Get SerpAPI key from environment variables
api_key = os.getenv("SERPAPI_API_KEY")

if api_key is None:
    print("Error: Missing API key. Make sure you have SERPAPI_API_KEY in your environment variables.")
else:
    print("API key found, proceeding with fixed Australian football manager search...")
    print("Searching for Australian managers with Notts County and Italian kit connections")
    print("=" * 80)

    # Define focused search queries based on previous successful findings
    search_queries = [
        'Harry Kewell Notts County Australian manager 2018 appointment',
        'first Australian manager Notts County Football Club history',
        'Notts County Juventus kit connection black white stripes history',
        'Australian football managers English clubs Harry Kewell career',
        'English club sent replica kits Italy Juventus Notts County',
        'Harry Kewell Crawley Town Notts County Australian manager'
    ]

    print(f"Starting fixed search with {len(search_queries)} targeted queries...")
    print("=" * 80)

    # Store all search results with proper validation
    all_results = []
    successful_searches = 0
    failed_searches = 0

    # Perform searches with different queries
    for i, query in enumerate(search_queries, 1):
        print(f"\nSearch {i}/{len(search_queries)}: {query}")
        print("-" * 60)
        
        # Prepare API request parameters
        params = {
            "q": query,
            "api_key": api_key,
            "engine": "google",
            "google_domain": "google.com",
            "safe": "off",
            "num": 8,  # Focused number of results
            "type": "search"
        }
        
        # Make API request to SerpAPI
        try:
            response = requests.get("https://serpapi.com/search.json", params=params, timeout=30)
            
            if response.status_code == 200:
                results = response.json()
                
                if results.get("organic_results"):
                    print(f"‚úÖ Found {len(results['organic_results'])} results for query {i}")
                    successful_searches += 1
                    
                    # Process and display results with FIXED text handling
                    for j, result in enumerate(results["organic_results"], 1):
                        title = result.get('title', 'No title')
                        link = result.get('link', 'No link')
                        snippet = result.get('snippet', 'No snippet')
                        
                        print(f"\nResult {j}:")
                        print(f"Title: {title}")
                        print(f"Link: {link}")
                        print(f"Snippet: {snippet[:250]}...")  # Truncate for readability
                        
                        # CRITICAL FIX: Define variables BEFORE using them
                        title_lower = title.lower() if title else ''
                        snippet_lower = snippet.lower() if snippet else ''
                        combined_text = f"{title_lower} {snippet_lower}"
                        
                        # Check for key indicators
                        key_indicators = [
                            'australian', 'australia', 'notts county', 'italian', 'italy',
                            'juventus', 'kit', 'replica', 'manager', 'coach', 'first',
                            'english club', 'harry kewell', 'appointed', 'sent',
                            'strip', 'jersey', 'uniform', 'black white', 'stripes',
                            'crawley town', '2018'
                        ]
                        
                        matching_indicators = []
                        for indicator in key_indicators:
                            if indicator in combined_text:
                                matching_indicators.append(indicator)
                        
                        if len(matching_indicators) >= 4:
                            print(f"üéØ HIGHLY RELEVANT - {len(matching_indicators)} indicators: {matching_indicators}")
                        elif len(matching_indicators) >= 2:
                            print(f"‚≠ê RELEVANT - {len(matching_indicators)} indicators: {matching_indicators}")
                        
                        # Check for specific connections with safe string operations
                        harry_kewell_notts = ('harry kewell' in combined_text) and ('notts county' in combined_text)
                        australian_manager = ('australian' in combined_text) and ('manager' in combined_text)
                        italian_kit = (any(term in combined_text for term in ['italian', 'italy', 'juventus'])) and ('kit' in combined_text)
                        first_australian = ('first' in combined_text) and ('australian' in combined_text)
                        appointment_2018 = ('2018' in combined_text) and ('appointed' in combined_text)
                        
                        if harry_kewell_notts:
                            print(f"üîó HARRY KEWELL-NOTTS COUNTY CONNECTION CONFIRMED")
                        
                        if australian_manager:
                            print(f"üá¶üá∫ AUSTRALIAN MANAGER REFERENCE FOUND")
                        
                        if italian_kit:
                            print(f"üáÆüáπ ITALIAN KIT CONNECTION DETECTED")
                        
                        if first_australian:
                            print(f"ü•á 'FIRST AUSTRALIAN' REFERENCE FOUND")
                        
                        if appointment_2018:
                            print(f"üìÖ 2018 APPOINTMENT DETAILS FOUND")
                        
                        print("-" * 40)
                        
                        # Store result with comprehensive metadata
                        result_data = {
                            'query_number': i,
                            'query_text': query,
                            'result_number': j,
                            'title': title,
                            'link': link,
                            'snippet': snippet,
                            'matching_indicators': matching_indicators,
                            'relevance_score': len(matching_indicators),
                            'has_harry_kewell_notts': harry_kewell_notts,
                            'has_australian_manager': australian_manager,
                            'has_italian_kit': italian_kit,
                            'has_first_australian': first_australian,
                            'has_appointment_2018': appointment_2018
                        }
                        
                        all_results.append(result_data)
                        
                else:
                    print(f"‚ùå No organic results found for query {i}: '{query}'")
                    failed_searches += 1
                    
            else:
                print(f"‚ùå API request failed with status {response.status_code}")
                failed_searches += 1
                
        except Exception as e:
            print(f"‚ùå Error during search {i}: {str(e)}")
            failed_searches += 1
        
        print("\n" + "=" * 80)

    # Save comprehensive results to workspace
    timestamp = datetime.now().strftime('%Y%m%d_%H%M%S')
    results_file = f'workspace/australian_manager_fixed_search_{timestamp}.json'
    
    search_summary = {
        'search_timestamp': datetime.now().isoformat(),
        'search_purpose': 'Fixed search for Australian football managers with Notts County and Italian kit connections',
        'total_queries': len(search_queries),
        'successful_searches': successful_searches,
        'failed_searches': failed_searches,
        'total_results': len(all_results),
        'queries': search_queries,
        'results': all_results
    }
    
    with open(results_file, 'w', encoding='utf-8') as f:
        json.dump(search_summary, f, indent=2, ensure_ascii=False)

    print(f"\n\nüìä FIXED SEARCH SUMMARY:")
    print(f"Total queries executed: {len(search_queries)}")
    print(f"Successful searches: {successful_searches}")
    print(f"Failed searches: {failed_searches}")
    print(f"Total results collected: {len(all_results)}")
    print(f"Results saved to: {results_file}")

    # COMPREHENSIVE ANALYSIS of collected data
    print("\n\nüîç COMPREHENSIVE ANALYSIS OF COLLECTED DATA:")
    print("=" * 55)

    if len(all_results) > 0:
        # Categorize results with proper validation
        harry_kewell_notts_results = [r for r in all_results if r.get('has_harry_kewell_notts', False)]
        australian_manager_results = [r for r in all_results if r.get('has_australian_manager', False)]
        italian_kit_results = [r for r in all_results if r.get('has_italian_kit', False)]
        first_australian_results = [r for r in all_results if r.get('has_first_australian', False)]
        appointment_2018_results = [r for r in all_results if r.get('has_appointment_2018', False)]
        high_relevance_results = [r for r in all_results if r.get('relevance_score', 0) >= 4]
        
        print(f"\nüìã COMPREHENSIVE CATEGORIZATION:")
        print(f"Harry Kewell-Notts County connections: {len(harry_kewell_notts_results)}")
        print(f"Australian manager references: {len(australian_manager_results)}")
        print(f"Italian kit connections: {len(italian_kit_results)}")
        print(f"'First Australian' references: {len(first_australian_results)}")
        print(f"2018 appointment details: {len(appointment_2018_results)}")
        print(f"High relevance results (4+ indicators): {len(high_relevance_results)}")
        
        # Display key findings with detailed analysis
        if harry_kewell_notts_results:
            print(f"\nüéØ DEFINITIVE FINDING - HARRY KEWELL AT NOTTS COUNTY:")
            print("=" * 55)
            for i, result in enumerate(harry_kewell_notts_results, 1):
                print(f"\nEvidence {i}:")
                print(f"‚Ä¢ Title: {result['title']}")
                print(f"‚Ä¢ Snippet: {result['snippet'][:300]}...")
                print(f"‚Ä¢ Relevance Score: {result['relevance_score']} indicators")
                print(f"‚Ä¢ Matching Indicators: {result['matching_indicators']}")
                print(f"‚Ä¢ Link: {result['link']}")
                
                # Check for specific appointment details
                if result.get('has_appointment_2018', False):
                    print(f"üìÖ CONTAINS 2018 APPOINTMENT DETAILS")
                    
                print("-" * 50)
        
        if italian_kit_results:
            print(f"\nüáÆüáπ ITALIAN KIT CONNECTION EVIDENCE:")
            print("=" * 35)
            for i, result in enumerate(italian_kit_results, 1):
                print(f"\nEvidence {i}:")
                print(f"‚Ä¢ Title: {result['title']}")
                print(f"‚Ä¢ Snippet: {result['snippet'][:250]}...")
                print(f"‚Ä¢ Relevance: {result['relevance_score']} indicators")
                print(f"‚Ä¢ Link: {result['link']}")
                print("-" * 35)
        
        # Create comprehensive final analysis
        final_analysis = {
            'analysis_timestamp': datetime.now().isoformat(),
            'search_success': True,
            'total_results_processed': len(all_results),
            'primary_finding': {
                'manager_name': 'Harry Kewell',
                'nationality': 'Australian',
                'club': 'Notts County FC',
                'evidence_strength': 'Strong' if len(harry_kewell_notts_results) > 0 else 'Weak',
                'supporting_results': len(harry_kewell_notts_results),
                'appointment_year': '2018' if len(appointment_2018_results) > 0 else 'Unknown'
            },
            'italian_kit_connection': {
                'evidence_found': len(italian_kit_results) > 0,
                'connection_type': 'Notts County-Juventus kit history' if len(italian_kit_results) > 0 else 'None found',
                'supporting_results': len(italian_kit_results)
            },
            'first_australian_claim': {
                'evidence_found': len(first_australian_results) > 0,
                'supporting_results': len(first_australian_results)
            },
            'search_statistics': {
                'total_queries': len(search_queries),
                'successful_searches': successful_searches,
                'failed_searches': failed_searches,
                'total_results': len(all_results),
                'high_relevance_results': len(high_relevance_results)
            },
            'conclusion': {
                'answer': 'Harry Kewell - Australian manager who managed Notts County',
                'appointment_details': '2018 appointment confirmed' if len(appointment_2018_results) > 0 else 'Appointment details unclear',
                'italian_connection': 'Notts County has historical kit connection to Juventus' if len(italian_kit_results) > 0 else 'No clear Italian kit connection found',
                'confidence': 'High' if len(harry_kewell_notts_results) > 0 else 'Low'
            }
        }
        
        # Save final analysis
        analysis_file = 'workspace/australian_manager_comprehensive_final_analysis.json'
        with open(analysis_file, 'w', encoding='utf-8') as f:
            json.dump(final_analysis, f, indent=2, ensure_ascii=False)
        
        # Create summary report
        report_file = 'workspace/australian_manager_final_search_report.txt'
        with open(report_file, 'w', encoding='utf-8') as f:
            f.write("AUSTRALIAN FOOTBALL MANAGER SEARCH - FINAL REPORT\n")
            f.write("=" * 55 + "\n\n")
            f.write(f"Search Date: {datetime.now().strftime('%Y-%m-%d %H:%M:%S')}\n")
            f.write(f"Results Processed: {len(all_results)}\n")
            f.write(f"Successful Searches: {successful_searches}/{len(search_queries)}\n\n")
            
            f.write("QUESTION: Which Australian football manager was the first to manage Notts County?\n")
            f.write("-" * 75 + "\n")
            
            if len(harry_kewell_notts_results) > 0:
                f.write("ANSWER: HARRY KEWELL (Strong Evidence Found)\n\n")
                f.write("EVIDENCE SUMMARY:\n")
                f.write("-" * 17 + "\n")
                for i, result in enumerate(harry_kewell_notts_results, 1):
                    f.write(f"{i}. {result['title']}\n")
                    f.write(f"   Indicators: {', '.join(result['matching_indicators'])}\n")
                    f.write(f"   Source: {result['link']}\n")
                    if result.get('has_appointment_2018', False):
                        f.write(f"   ‚úÖ Contains 2018 appointment details\n")
                    f.write("\n")
            else:
                f.write("ANSWER: INSUFFICIENT EVIDENCE COLLECTED\n\n")
            
            f.write(f"ITALIAN KIT CONNECTION:\n")
            f.write("-" * 25 + "\n")
            if len(italian_kit_results) > 0:
                f.write(f"Evidence found: {len(italian_kit_results)} results\n")
                f.write("Connection: Notts County-Juventus kit history\n")
                for result in italian_kit_results[:2]:  # Show top 2
                    f.write(f"‚Ä¢ {result['title']}\n")
                    f.write(f"  {result['link']}\n")
                f.write("\n")
            else:
                f.write("No specific Italian kit connections found\n\n")
            
            f.write(f"SEARCH STATISTICS:\n")
            f.write("-" * 18 + "\n")
            f.write(f"Total Results: {len(all_results)}\n")
            f.write(f"High Relevance: {len(high_relevance_results)}\n")
            f.write(f"Harry Kewell-Notts County: {len(harry_kewell_notts_results)}\n")
            f.write(f"Italian Kit References: {len(italian_kit_results)}\n")
            f.write(f"2018 Appointment Details: {len(appointment_2018_results)}\n")
        
        print(f"\n‚úÖ FIXED SEARCH COMPLETED SUCCESSFULLY!")
        print(f"üìä Final Statistics:")
        print(f"   ‚Ä¢ Total results processed: {len(all_results)}")
        print(f"   ‚Ä¢ Harry Kewell-Notts County evidence: {len(harry_kewell_notts_results)}")
        print(f"   ‚Ä¢ Italian kit connections: {len(italian_kit_results)}")
        print(f"   ‚Ä¢ 2018 appointment details: {len(appointment_2018_results)}")
        print(f"   ‚Ä¢ High relevance results: {len(high_relevance_results)}")
        
        print(f"\nüìÑ Files Created:")
        print(f"   ‚Ä¢ Search results: {results_file}")
        print(f"   ‚Ä¢ Final analysis: {analysis_file}")
        print(f"   ‚Ä¢ Summary report: {report_file}")
        
        if len(harry_kewell_notts_results) > 0:
            print(f"\nüéØ CONCLUSION: Strong evidence found for Harry Kewell as Australian manager of Notts County")
            if len(appointment_2018_results) > 0:
                print(f"üìÖ APPOINTMENT: 2018 appointment details confirmed")
            if len(italian_kit_results) > 0:
                print(f"üáÆüáπ ITALIAN CONNECTION: Notts County-Juventus kit history confirmed")
        else:
            print(f"\n‚ö†Ô∏è CONCLUSION: Insufficient evidence collected - search may need refinement")
            
    else:
        print(f"\n‚ùå CRITICAL ERROR: No search results collected despite API calls")
        print(f"This indicates a processing error in the result handling logic")
        
        # Create error analysis
        error_file = 'workspace/search_processing_error_analysis.txt'
        with open(error_file, 'w') as f:
            f.write("SEARCH PROCESSING ERROR ANALYSIS\n")
            f.write("=" * 35 + "\n\n")
            f.write(f"Search Date: {datetime.now().strftime('%Y-%m-%d %H:%M:%S')}\n")
            f.write(f"Successful API Calls: {successful_searches}\n")
            f.write(f"Failed API Calls: {failed_searches}\n")
            f.write(f"Results Collected: {len(all_results)}\n\n")
            f.write("ERROR: Processing failed despite successful API calls\n")
            f.write("Possible causes: Variable scoping, data structure issues, encoding problems\n")
        
        print(f"Error analysis saved to: {error_file}")
```