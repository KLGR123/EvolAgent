### Development Step 18: Identify the Illustrator and Collaborators of the “Little Monsters” Comic

**Description**: Search for information about the comic book 'Little Monsters' to identify its illustrator/artist. Focus on finding the artist who illustrated this comic and any information about their collaborations with writers. Look for official publication details, creator credits, and any collaborative relationships mentioned in connection with this work.

**Use Cases**:
- Comic archive managers automating the extraction of illustrator credits from multiple vendor HTML pages to ensure accurate metadata in a digital library
- Small press publishers cross-checking artist and writer attributions on ComicVine and MyComicShop search results to validate royalty payments and contracts
- Fan‐run comic wikis scraping and analyzing HTML files for “Little Monsters” mentions to update collaborator profiles and interlink illustrator–writer relationships
- E-commerce platforms parsing seller‐provided HTML listings to auto-populate comic book product pages with verified artist and creator credits
- Intellectual property legal teams scanning scraped web pages for uncredited “Little Monsters” artwork mentions to detect potential copyright infringements
- Academic researchers mining HTML search results to quantify collaboration networks among comic book creators for a publication on industry co-authorship patterns
- Digital marketing analysts tallying “Little Monsters” artist mentions across multiple HTML sources to gauge illustrator popularity and inform targeted promotion campaigns
- Library catalogers integrating automated HTML parsing and entity extraction to streamline the addition of comic book artist metadata into institutional OPAC systems

```
import os
from bs4 import BeautifulSoup
import re
import json
import time

print("=== LITTLE MONSTERS COMIC ARTIST IDENTIFICATION ===")
print("Final attempt with fixed variable scoping")
print("=" * 70)

# Check workspace directory
workspace_dir = 'workspace'
if not os.path.exists(workspace_dir):
    print("No workspace directory found")
    exit()

print(f"\nInspecting workspace directory: {workspace_dir}")
all_files = os.listdir(workspace_dir)
html_files = [f for f in all_files if f.endswith('.html')]

print(f"Total HTML files: {len(html_files)}")

# Focus on the most promising files identified in HISTORY
promising_files = [
    'comicvine_search.html',      # 15 Little Monsters mentions
    'mycomicshop_search.html',    # 12 Little Monsters mentions
    'little_monsters_search_1.html',
    'little_monsters_search_2.html',
    'little_monsters_search_3.html',
    'little_monsters_search_4.html',
    'little_monsters_search_5.html'
]

# Initialize results
analysis_results = {
    'comic_title': 'Little Monsters',
    'search_timestamp': time.strftime('%Y-%m-%d %H:%M:%S'),
    'files_analyzed': [],
    'artist_findings': []
}

print(f"\n{'='*70}")
print("ANALYZING MOST PROMISING FILES")
print(f"{'='*70}")

for file_num, filename in enumerate(promising_files, 1):
    filepath = os.path.join(workspace_dir, filename)
    
    if not os.path.exists(filepath):
        print(f"\n{file_num}. {filename} - NOT FOUND, skipping")
        continue
        
    print(f"\n{'-'*50}")
    print(f"FILE {file_num}: {filename}")
    print(f"{'-'*50}")
    
    try:
        # Read the HTML file
        with open(filepath, 'r', encoding='utf-8', errors='ignore') as f:
            html_content = f.read()
        
        print(f"✓ Loaded file ({len(html_content):,} characters)")
        
        # Parse with BeautifulSoup
        soup = BeautifulSoup(html_content, 'html.parser')
        
        # Remove script and style elements
        for script in soup(["script", "style"]):
            script.decompose()
        
        # Get clean text
        text_content = soup.get_text()
        
        # Count key terms
        little_monsters_count = text_content.lower().count('little monsters')
        artist_count = text_content.lower().count('artist')
        creator_count = text_content.lower().count('creator')
        
        print(f"Content analysis:")
        print(f"  'Little Monsters' mentions: {little_monsters_count}")
        print(f"  'Artist' mentions: {artist_count}")
        print(f"  'Creator' mentions: {creator_count}")
        
        file_analysis = {
            'filename': filename,
            'little_monsters_mentions': little_monsters_count,
            'artist_mentions': artist_count,
            'creator_mentions': creator_count,
            'potential_artists': []
        }
        
        # If we have Little Monsters mentions, examine them closely
        if little_monsters_count > 0:
            print(f"\n🎯 ANALYZING LITTLE MONSTERS CONTENT:")
            
            # Split text into lines
            text_lines = text_content.split('\n')
            clean_text_lines = [line.strip() for line in text_lines if line.strip()]
            
            # Find lines containing 'little monsters'
            lm_lines = []
            for i, current_line in enumerate(clean_text_lines):
                if 'little monsters' in current_line.lower():
                    # Get surrounding context
                    context_start = max(0, i-2)
                    context_end = min(len(clean_text_lines), i+3)
                    context_lines = clean_text_lines[context_start:context_end]
                    
                    lm_lines.append({
                        'line_number': i,
                        'main_line': current_line,
                        'context': context_lines
                    })
            
            print(f"  Found {len(lm_lines)} lines with 'Little Monsters'")
            
            # Examine each Little Monsters mention
            for idx, lm_data in enumerate(lm_lines[:10], 1):  # Limit to first 10
                main_line = lm_data['main_line']
                context = lm_data['context']
                
                print(f"\n  Match {idx}: {main_line[:100]}...")
                
                # Combine context for analysis
                full_context_text = ' '.join(context)
                
                # Look for creator patterns with FIXED variable scoping
                creator_patterns = [
                    r'(?i)(?:artist|art by|illustrated by|artwork by|drawn by|pencils by)\s*:?\s*([A-Z][a-zA-Z\s\'-]{2,40})',
                    r'(?i)(?:writer|written by|story by|script by|author)\s*:?\s*([A-Z][a-zA-Z\s\'-]{2,40})',
                    r'(?i)(?:creator|created by)\s*:?\s*([A-Z][a-zA-Z\s\'-]{2,40})',
                    r'(?i)little monsters.*?(?:by|artist|writer)\s*:?\s*([A-Z][a-zA-Z\s\'-]{2,40})',
                    r'([A-Z][a-zA-Z\s\'-]{2,40})\s*(?:artist|illustrator|creator)'
                ]
                
                found_creators = []
                for pattern_idx, pattern in enumerate(creator_patterns):
                    matches = re.findall(pattern, full_context_text)
                    for raw_match in matches:
                        # FIXED: Properly define and clean the match
                        cleaned_match = raw_match.strip().strip(',').strip('.').strip(';')
                        
                        # Validation criteria
                        exclude_words = ['little', 'monsters', 'comic', 'book', 'series', 'gold', 'key', 
                                       'the', 'and', 'or', 'with', 'from', 'more', 'other', 'search', 'results']
                        
                        if (len(cleaned_match) > 2 and len(cleaned_match) < 50 and
                            ' ' in cleaned_match and  # Must have at least first and last name
                            not any(exclude_word in cleaned_match.lower() for exclude_word in exclude_words)):
                            
                            found_creators.append({
                                'name': cleaned_match,
                                'pattern': pattern_idx + 1,
                                'context': full_context_text[:150]
                            })
                
                if found_creators:
                    unique_names = list({creator['name'] for creator in found_creators})
                    print(f"    🎨 POTENTIAL CREATORS: {', '.join(unique_names)}")
                    
                    for creator_info in found_creators:
                        creator_name = creator_info['name']
                        
                        # Add to file analysis
                        file_analysis['potential_artists'].append({
                            'name': creator_name,
                            'context': creator_info['context'],
                            'pattern_used': creator_info['pattern']
                        })
                        
                        # Add to overall findings
                        analysis_results['artist_findings'].append({
                            'artist_name': creator_name,
                            'source_file': filename,
                            'context': creator_info['context'],
                            'pattern_used': creator_info['pattern'],
                            'confidence': 'High' if 'little monsters' in creator_info['context'].lower() else 'Medium'
                        })
                else:
                    print(f"    No creator patterns found in this context")
        
        else:
            print(f"  No 'Little Monsters' mentions found")
        
        analysis_results['files_analyzed'].append(file_analysis)
        
    except Exception as e:
        print(f"  ✗ Error processing {filename}: {e}")
        analysis_results['files_analyzed'].append({
            'filename': filename,
            'error': str(e),
            'status': 'Failed'
        })

print(f"\n{'='*70}")
print("FINAL ANALYSIS RESULTS")
print(f"{'='*70}")

# Analyze all artist findings
all_artists = analysis_results['artist_findings']

if all_artists:
    print(f"\n🎨 ARTIST CANDIDATES IDENTIFIED:")
    
    # Count frequency of artist names
    from collections import Counter
    artist_names = [finding['artist_name'] for finding in all_artists]
    artist_frequency = Counter(artist_names)
    
    print(f"\nTotal artist mentions: {len(all_artists)}")
    print(f"Unique artists found: {len(artist_frequency)}")
    
    print(f"\nArtist ranking by frequency:")
    for rank, (artist, count) in enumerate(artist_frequency.most_common(), 1):
        # Get sources and confidence for this artist
        artist_entries = [f for f in all_artists if f['artist_name'] == artist]
        sources = list(set([entry['source_file'] for entry in artist_entries]))
        confidence_levels = list(set([entry['confidence'] for entry in artist_entries]))
        
        print(f"  {rank}. {artist}")
        print(f"     Mentions: {count}")
        print(f"     Sources: {', '.join(sources)}")
        print(f"     Confidence: {', '.join(confidence_levels)}")
        
        # Show context for top candidates
        if rank <= 3:
            contexts = [entry['context'] for entry in artist_entries]
            for i, context in enumerate(contexts[:2], 1):  # Show up to 2 contexts
                print(f"     Context {i}: {context[:120]}...")
        print()
    
    # Identify the most likely artist
    top_artist = artist_frequency.most_common(1)[0]
    print(f"*** MOST LIKELY LITTLE MONSTERS ARTIST: {top_artist[0]} ***")
    print(f"*** CONFIDENCE LEVEL: {top_artist[1]} mention(s) across sources ***")
    
    analysis_results['final_result'] = {
        'status': 'SUCCESS',
        'artist_identified': top_artist[0],
        'confidence_score': top_artist[1],
        'total_candidates': len(artist_frequency)
    }
    
else:
    print(f"\n❌ NO ARTIST CANDIDATES FOUND WITH CURRENT PATTERNS")
    
    # Show summary of what was found
    files_with_lm = len([f for f in analysis_results['files_analyzed'] 
                        if f.get('little_monsters_mentions', 0) > 0])
    total_lm_mentions = sum([f.get('little_monsters_mentions', 0) 
                           for f in analysis_results['files_analyzed']])
    
    print(f"\nSearch Summary:")
    print(f"  Files analyzed: {len(analysis_results['files_analyzed'])}")
    print(f"  Files with 'Little Monsters' mentions: {files_with_lm}")
    print(f"  Total 'Little Monsters' mentions: {total_lm_mentions}")
    
    # Show which files had content
    if files_with_lm > 0:
        print(f"\nFiles with 'Little Monsters' content:")
        lm_files = [(f['filename'], f.get('little_monsters_mentions', 0)) 
                   for f in analysis_results['files_analyzed'] 
                   if f.get('little_monsters_mentions', 0) > 0]
        lm_files.sort(key=lambda x: x[1], reverse=True)
        
        for filename, count in lm_files:
            print(f"  {filename}: {count} mentions")
    
    analysis_results['final_result'] = {
        'status': 'NO_RESULTS',
        'files_analyzed': len(analysis_results['files_analyzed']),
        'files_with_content': files_with_lm,
        'total_mentions': total_lm_mentions
    }

# Save results
results_file = os.path.join(workspace_dir, 'little_monsters_final_analysis.json')
with open(results_file, 'w', encoding='utf-8') as f:
    json.dump(analysis_results, f, indent=2, ensure_ascii=False)

print(f"\n✓ Final analysis saved to: {results_file}")

print(f"\n{'='*70}")
print("LITTLE MONSTERS ARTIST SEARCH COMPLETED")
print(f"{'='*70}")

if analysis_results['final_result']['status'] == 'SUCCESS':
    print(f"\n✅ SUCCESS: Artist identified!")
    print(f"Little Monsters comic artist: {analysis_results['final_result']['artist_identified']}")
    print(f"Confidence: {analysis_results['final_result']['confidence_score']} mentions across sources")
else:
    print(f"\n⚠️  Analysis completed but no definitive artist found")
    print(f"Files analyzed: {analysis_results['final_result']['files_analyzed']}")
    if 'files_with_content' in analysis_results['final_result']:
        print(f"Files with Little Monsters content: {analysis_results['final_result']['files_with_content']}")
        print(f"Total mentions found: {analysis_results['final_result']['total_mentions']}")
        print(f"\nRecommendation: Manual review of ComicVine and MyComicShop files may reveal additional details")
    
print(f"\nAll analysis results saved to workspace/ directory.")
```