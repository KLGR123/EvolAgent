### Development Step 4: Identify IFP–Reform Party Agreement on Federal System, Bill of Rights, and Ambassador to France

**Description**: Conduct a comprehensive web search to identify the agreement between a South African political figure and the leader of the Inkatha Freedom Party that led to the formation of the Reform Party and proposed a federal system and bill of rights. Focus on finding information about this specific political agreement, the parties involved, and identify who later served as South African ambassador to France. Search for keywords including 'Inkatha Freedom Party agreement Reform Party', 'South Africa federal system bill of rights agreement', 'South African ambassador France Reform Party', and 'IFP leader political agreement federal system'.

**Use Cases**:
- Political historian creating a timeline of pre-1994 South African federal proposals by scraping archival web pages and extracting key negotiation clauses and participant details.
- Journalistic investigation automating extraction of South African ambassadorial appointments to France from official listings to fact-check current diplomatic profiles.
- Constitutional law research team collecting and analyzing references to “federal system” and “bill of rights” within multi-party negotiation archives for comparative study of negotiation outcomes.
- Government archival unit building an automated index of multi-party agreements by identifying mentions of the Reform Party and IFP in public web sources and preserving relevant text sections.
- Academic political science department generating a structured dataset of South African transition-to-democracy agreements by extracting key clauses, dates, and negotiator names for quantitative analysis.
- Civic tech organization developing a public portal that visualizes historical political agreements, using web-scraped content and keyword mapping to highlight federal proposals during apartheid negotiations.
- Legal due diligence consultancy compiling a compliance report on historical confederation proposals, automatically retrieving and summarizing sections mentioning federalism and rights charters from official archives.
- Foreign policy think tank tracking career paths of South African politicians-turned-diplomats by automating extraction of ambassador-to-France assignments from multiple web sources to analyze posting patterns.

```
import requests
import json
import os
from datetime import datetime
import time

print("Conducting comprehensive web search to identify South African political agreement involving Inkatha Freedom Party...")

# Create workspace directory if it doesn't exist
if not os.path.exists('workspace'):
    os.makedirs('workspace')

# Define all functions first before any execution
def get_page_content(url):
    """Fetch content from a URL with proper headers"""
    headers = {
        'User-Agent': 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/91.0.4472.124 Safari/537.36'
    }
    
    try:
        print(f"Fetching: {url}")
        response = requests.get(url, headers=headers, timeout=30)
        response.raise_for_status()
        print(f"Successfully fetched: {url}")
        return response.text
    except Exception as e:
        print(f"Error fetching {url}: {str(e)}")
        return None

def search_web_sources():
    """Search various web sources for information about the IFP agreement"""
    print("\nSearching for information about South African political agreements involving IFP...")
    
    # List of URLs to search for relevant information
    search_urls = [
        "https://en.wikipedia.org/wiki/Inkatha_Freedom_Party",
        "https://en.wikipedia.org/wiki/Reform_Party_(South_Africa)",
        "https://en.wikipedia.org/wiki/Mangosuthu_Buthelezi",
        "https://en.wikipedia.org/wiki/South_African_transition_to_democracy",
        "https://en.wikipedia.org/wiki/List_of_South_African_ambassadors_to_France"
    ]
    
    search_results = {}
    
    for url in search_urls:
        print(f"\nSearching: {url}")
        content = get_page_content(url)
        
        if content:
            # Store the content for analysis
            page_name = url.split('/')[-1]
            search_results[page_name] = {
                'url': url,
                'content_length': len(content),
                'content': content[:10000]  # Store first 10000 characters for analysis
            }
            print(f"Retrieved {len(content)} characters from {page_name}")
        else:
            print(f"Failed to retrieve content from {url}")
        
        # Add delay between requests to be respectful
        time.sleep(2)
    
    return search_results

def analyze_content_for_keywords(content, keywords):
    """Analyze content for specific keywords and extract relevant sections"""
    content_lower = content.lower()
    found_keywords = []
    relevant_sections = []
    
    for keyword in keywords:
        if keyword.lower() in content_lower:
            found_keywords.append(keyword)
            
            # Find the section around the keyword
            start_pos = content_lower.find(keyword.lower())
            if start_pos != -1:
                # Extract 500 characters before and after the keyword
                section_start = max(0, start_pos - 500)
                section_end = min(len(content), start_pos + 500)
                section = content[section_start:section_end]
                relevant_sections.append({
                    'keyword': keyword,
                    'section': section
                })
    
    return found_keywords, relevant_sections

def search_for_ifp_agreement():
    """Main function to search for IFP agreement information"""
    print("\nSearching for South African political agreement involving Inkatha Freedom Party...")
    
    # Keywords to search for
    search_keywords = [
        'Reform Party',
        'federal system',
        'bill of rights',
        'Inkatha Freedom Party',
        'IFP',
        'Mangosuthu Buthelezi',
        'ambassador to France',
        'political agreement',
        'South African transition',
        'apartheid negotiations',
        'democratic transition',
        'constitutional negotiations',
        'Roelf Meyer',
        'Cyril Ramaphosa',
        'CODESA',
        'National Party',
        'ANC',
        'multi-party negotiations',
        'constitutional convention'
    ]
    
    # Get search results from web sources
    search_results = search_web_sources()
    
    # Analyze each page for relevant information
    analysis_results = {}
    
    for page_name, page_data in search_results.items():
        print(f"\nAnalyzing {page_name} for relevant keywords...")
        
        found_keywords, relevant_sections = analyze_content_for_keywords(
            page_data['content'], search_keywords
        )
        
        analysis_results[page_name] = {
            'url': page_data['url'],
            'found_keywords': found_keywords,
            'relevant_sections': relevant_sections,
            'keyword_count': len(found_keywords)
        }
        
        print(f"Found {len(found_keywords)} relevant keywords in {page_name}")
        if found_keywords:
            print(f"Keywords found: {', '.join(found_keywords)}")
    
    # Save detailed analysis to file
    output_file = "workspace/ifp_agreement_search_results.json"
    with open(output_file, 'w') as f:
        json.dump(analysis_results, f, indent=2)
    
    print(f"\nDetailed search results saved to {output_file}")
    
    # Display summary of findings
    print("\n=== SEARCH SUMMARY ===")
    for page_name, results in analysis_results.items():
        if results['keyword_count'] > 0:
            print(f"\n{page_name} ({results['url']})")
            print(f"Keywords found: {', '.join(results['found_keywords'])}")
            
            # Display most relevant sections
            for section in results['relevant_sections'][:2]:  # Show top 2 sections
                print(f"\nRelevant section for '{section['keyword']}':")
                print(f"{section['section'][:400]}...")
    
    # Attempt to identify specific agreement and ambassador
    print("\n=== ANALYSIS ===")
    
    # Look for specific patterns in the content
    potential_agreements = []
    potential_ambassadors = []
    
    for page_name, results in analysis_results.items():
        for section in results['relevant_sections']:
            section_text = section['section'].lower()
            
            # Look for agreement-related information
            if 'reform party' in section_text and ('federal' in section_text or 'bill of rights' in section_text):
                potential_agreements.append({
                    'source': page_name,
                    'section': section['section'],
                    'keywords': section['keyword']
                })
            
            # Look for ambassador information
            if 'ambassador' in section_text and 'france' in section_text:
                potential_ambassadors.append({
                    'source': page_name,
                    'section': section['section'],
                    'keywords': section['keyword']
                })
    
    # Save specific findings
    findings = {
        'search_date': datetime.now().isoformat(),
        'potential_agreements': potential_agreements,
        'potential_ambassadors': potential_ambassadors,
        'search_keywords': search_keywords,
        'pages_searched': list(search_results.keys())
    }
    
    findings_file = "workspace/ifp_agreement_findings.json"
    with open(findings_file, 'w') as f:
        json.dump(findings, f, indent=2)
    
    print(f"\nSpecific findings saved to {findings_file}")
    
    if potential_agreements:
        print(f"\nFound {len(potential_agreements)} potential agreement references")
        for i, agreement in enumerate(potential_agreements[:3], 1):
            print(f"\nAgreement reference {i} (from {agreement['source']}):")
            print(f"{agreement['section'][:400]}...")
    
    if potential_ambassadors:
        print(f"\nFound {len(potential_ambassadors)} potential ambassador references")
        for i, ambassador in enumerate(potential_ambassadors[:3], 1):
            print(f"\nAmbassador reference {i} (from {ambassador['source']}):")
            print(f"{ambassador['section'][:400]}...")
    
    if not potential_agreements and not potential_ambassadors:
        print("\nNo specific matches found in initial search. May need to expand search terms or sources.")
    
    return findings

# Main execution - placed at the very end after ALL functions are defined
print("Starting comprehensive web search for IFP agreement information...")
results = search_for_ifp_agreement()
print("\nSearch completed successfully!")
print(f"\nTotal pages searched: {len(results.get('pages_searched', []))}")
print(f"Potential agreements found: {len(results.get('potential_agreements', []))}")
print(f"Potential ambassadors found: {len(results.get('potential_ambassadors', []))}")
```