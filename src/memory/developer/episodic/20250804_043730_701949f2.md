### Development Step 5: Extract Survivor US Season 1–44 Winners to JSON File

**Description**: Access the Wikipedia page https://en.wikipedia.org/wiki/Survivor_(American_TV_series) and extract the table of winners for seasons 1 through 44, saving each season number with its corresponding winner name into workspace/survivor_winners_list.json.

**Use Cases**:
- Automated content updates for a reality TV fan website using scheduled scripts to refresh the “Survivor winners” section without manual edits
- Backend data feed integration for a mobile trivia game app that populates questions about Survivor winners across seasons 1–44 in real time
- Marketing analytics pipeline that correlates historical winner data with social media engagement metrics to tailor promotional campaigns
- Academic media studies research project analyzing demographic trends among Survivor winners for publication in a journal on television programming
- Development of a voice assistant skill (e.g., Alexa/Google) that answers user queries like “Who won Survivor season 12?” using the extracted JSON
- Data visualization dashboard for a media consultancy firm displaying a timeline and key statistics of Survivor winners to inform sponsorship decisions
- Machine learning model prototype that uses past winner data to predict attributes of likely winners in future seasons for betting or forecasting services

```
import os
import json
import requests
from bs4 import BeautifulSoup

# 1. Ensure workspace directory exists
workspace_dir = 'workspace'
os.makedirs(workspace_dir, exist_ok=True)

# 2. Fetch the Survivor page
url = 'https://en.wikipedia.org/wiki/Survivor_(American_TV_series)'
print(f"Fetching page: {url}")
response = requests.get(url)
response.raise_for_status()
print("Page fetched successfully, parsing HTML...")

# 3. Parse HTML
soup = BeautifulSoup(response.text, 'html.parser')

# 4. Locate the correct winners table by scanning all wikitables for headers containing 'Season' and 'Winner'
tables = soup.find_all('table', class_='wikitable')
print(f"Found {len(tables)} wikitable(s) on the page.")
winners_table = None
season_idx = None
winner_idx = None

for idx, table in enumerate(tables, start=1):
    header_row = table.find('tr')
    if not header_row:
        continue
    headers = [th.get_text(strip=True).lower() for th in header_row.find_all('th')]
    print(f"Table {idx} headers: {headers}")
    if 'season' in headers and 'winner' in headers:
        winners_table = table
        season_idx = headers.index('season')
        winner_idx = headers.index('winner')
        print(f"--> Selected table #{idx}. season_idx={season_idx}, winner_idx={winner_idx}")
        break

if not winners_table:
    raise RuntimeError("Could not locate a wikitable with 'Season' and 'Winner' headers.")

# 5. Parse table rows
rows = winners_table.find_all('tr')
print(f"Total rows including header: {len(rows)}")
data_rows = rows[1:]  # skip header
winners = []

for row in data_rows:
    # get only direct children to respect colspan/rowspan
    cells = row.find_all(['th', 'td'], recursive=False)
    if len(cells) <= max(season_idx, winner_idx):
        print(f"Skipping row: not enough cells ({len(cells)}) for season_idx={season_idx}, winner_idx={winner_idx}")
        continue

    # 5a. Extract season number
    season_cell = cells[season_idx]
    for sup in season_cell.find_all('sup'):
        sup.decompose()
    season_text = season_cell.get_text(strip=True)
    try:
        season_num = int(season_text)
    except ValueError:
        print(f"Skipping row: cannot parse season '{season_text}'")
        continue
    if not (1 <= season_num <= 44):
        print(f"Skipping season {season_num}: out of target range 1–44")
        continue

    # 5b. Extract winner name
    winner_cell = cells[winner_idx]
    for sup in winner_cell.find_all('sup'):
        sup.decompose()
    winner_name = winner_cell.get_text(strip=True)
    print(f"Parsed Season {season_num}: Winner -> {winner_name}")

    winners.append({'season': season_num, 'winner': winner_name})

# 6. Sort and save results
winners_sorted = sorted(winners, key=lambda x: x['season'])
print(f"Total winners extracted for seasons 1–44: {len(winners_sorted)}")

output_path = os.path.join(workspace_dir, 'survivor_winners_list.json')
with open(output_path, 'w', encoding='utf-8') as f:
    json.dump(winners_sorted, f, indent=2)
print(f"Winners list saved to: {output_path}")

```