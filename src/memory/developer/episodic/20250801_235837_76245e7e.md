### Development Step 3: Extract and Count Unavailable Rick Riordan Books from Scribe County Public Library PDF

**Description**: Parse and analyze the attached PDF file data/gaia/2023/validation/e9a2c537-8232-4c3f-85b0-b52de6bcba99.pdf to extract the complete book collection data from Scribe County Public Library. Identify all books authored by Rick Riordan in the collection, then determine their current availability status by checking which ones are marked as checked out, on hold, or otherwise not currently available on the library shelves. Calculate the total count of Rick Riordan books that are not physically present on the shelves.

**Use Cases**:
- Public library circulation monitoring: Librarians automatically parse PDF inventories to identify which Rick Riordan titles are checked out or overdue, enabling timely replacement orders and shelf restocking.
- School reading program scheduling: School librarians extract author-specific availability from PDF catalogs to confirm that every required Rick Riordan book is on-shelf before semester reading assignments.
- Book fair event planning: Community event coordinators analyze library availability reports to secure and order Rick Riordan books for author signings and youth reading festivals.
- Publisher demand forecasting: Rick Riordan’s publishing team processes library holding data to measure regional check-out rates and optimize print run volumes and distribution strategies.
- Academic literary research: Researchers aggregate public library PDF collections across districts to study circulation trends of Rick Riordan’s works in middle grade and young adult literature studies.
- Automated reporting for library consortiums: Library IT departments integrate PDF parsing scripts into their management systems to generate real-time alerts on high-demand authors like Rick Riordan.
- Retail book supplier stock replenishment: Book distributors use library availability extraction to plan bulk shipments of out-of-shelf Rick Riordan titles to independent bookstores and school suppliers.
- Digital transformation in library services: Library operations automate converting scanned PDF catalogs into JSON and text reports, streamlining integration of Rick Riordan availability data into mobile apps and online catalogs.

```
import os
import re

# Load the raw library content that was already extracted
print("=== ANALYZING RICK RIORDAN BOOK AVAILABILITY ===")
print("Loading previously extracted library collection data...")
print("=" * 60)

# Load the raw content from workspace
raw_content_path = 'workspace/library_collection_raw_content.txt'

if os.path.exists(raw_content_path):
    with open(raw_content_path, 'r', encoding='utf-8') as f:
        library_content = f.read()
    print(f"✓ Loaded library content: {len(library_content)} characters")
else:
    print(f"Raw content file not found at {raw_content_path}")
    print("Extracting from the known content based on previous analysis...")
    
    # Use the content we know from the previous execution
    library_content = """Scribe County Public Library
Title Author Publisher Genre Status
Books
Young Children's
The Very Hungry Caterpillar Eric Carle World Publishing CompanyPicture Available
Hop on Pop Dr. Seuss Random House Picture Checked Out
The Lorax Dr. Seuss Random House Picture Overdue
The Book With No Pictures B.J. Novak Dial Books Picture Available
Don't Let the Pigeon Drive the Bus!Mo Willems Disney Hyperion Picture Available
I Spy: Spooky Night Jean Marzollo, Walter WickScholastic Activity Checked Out
I Spy: Mystery Jean Marzollo, Walter WickScholastic Activity Checked Out
I Spy: Treasure Hunt Jean Marzollo, Walter WickScholastic Activity Overdue
Can You See What I See? Walter Wick Scholastic Activity Overdue
Can You See What I See? Dream MachineWalter Wick Scholastic Activity Available
Middle Grade
The Lightning Thief Rick Riordan Disney Hyperion Fantasy Available
The Titan's Curse Rick Riordan Disney Hyperion Fantasy Available
The Battle of the Labyrinth Rick Riordan Disney Hyperion Fantasy Checked Out
The Last Olympian Rick Riordan Disney Hyperion Fantasy Checked Out
Harry Potter and the Sorcerer's StoneJ. K. Rowling Scholastic Fantasy Checked Out
Harry Potter and the Chamber of SecretsJ. K. Rowling Scholastic Fantasy Overdue
Harry Potter and the Prisoner of AzkabanJ. K. Rowling Scholastic Fantasy Overdue
Gregor the Overlander Suzanne Collins Scholastic Fantasy Overdue
The Name of This Book Is Secret Psedonymus Bosch Little, Brown Fantasy Available
The Bad Beginning Lemony Snicket HarperCollins Fantasy Available
The Reptile Room Lemony Snicket HarperCollins Fantasy Checked Out
The Wide Window Lemony Snicket HarperCollins Fantasy Available
The Miserable Mill Lemony Snicket HarperCollins Fantasy Available
The Austere Academy Lemony Snicket HarperCollins Fantasy Available
The Ersatz Elevator Lemony Snicket HarperCollins Fantasy Available
The Vile Village Lemony Snicket HarperCollins Fantasy Available
The Hostile Hospital Lemony Snicket HarperCollins Fantasy Available
The Carnivorous Carnival Lemony Snicket HarperCollins Fantasy Available
The Slippery Slope Lemony Snicket HarperCollins Fantasy Available
The Grim Grotto Lemony Snicket HarperCollins Fantasy Available
The Penultimate Peril Lemony Snicket HarperCollins Fantasy Available
The End Lemony Snicket HarperCollins Fantasy Available
Young Adult
The Lost Hero Rick Riordan Disney Hyperion Fantasy Checked Out
The Son of Neptune Rick Riordan Disney Hyperion Fantasy Checked Out
The Mark of Athena Rick Riordan Disney Hyperion Fantasy Checked Out
The House of Hades Rick Riordan Disney Hyperion Fantasy Overdue
The Blood of Olympus Rick Riordan Disney Hyperion Fantasy Overdue
Divergent Veronica Roth HarperCollins Dystopian Overdue
Adult
Jurassic Park Michael Crichton Alfred A. Knopf Science FictionOverdue
Prey Michael Crichton HarperCollins Science FictionAvailable
Lord of the Rings J.R.R. Tolkien HarperCollins Fantasy Available
A Game of Thrones George R.R. Martin Bantam Fantasy Available
The Crying of Lot 49 Thomas Pynchon J.B. Lippincott Realistic FictionAvailable
Fahrenheit 451 Ray Bradbury Ballantine Dystopian Available
The Great Gatsby F. Scott Fitzgerald Simon & Schuster Realistic FictionChecked Out
Beloved Toni Morrison Alfred A. Knopf Historical FictionChecked Out
Silence Shūsaku Endō Macmillan Historical FictionChecked Out
Invisible Man Ralph Ellison Random House Historical FictionChecked Out"""

# Parse all lines to identify Rick Riordan books
print("\n=== EXTRACTING RICK RIORDAN BOOKS ===")
print("-" * 50)

lines = library_content.split('\n')
rick_riordan_books = []

for i, line in enumerate(lines, 1):
    # Look for lines containing "Rick Riordan"
    if 'Rick Riordan' in line:
        print(f"Line {i}: {line}")
        
        # Parse the book information
        # Format appears to be: Title Author Publisher Genre Status
        # We need to extract title and status
        
        # Find "Rick Riordan" position to split the line
        riordan_pos = line.find('Rick Riordan')
        if riordan_pos > 0:
            title = line[:riordan_pos].strip()
            after_author = line[riordan_pos + len('Rick Riordan'):].strip()
            
            # Extract status (last word in the line)
            parts = after_author.split()
            if parts:
                status = parts[-1]  # Last part should be the status
                publisher_genre = ' '.join(parts[:-1])  # Everything before status
                
                book_info = {
                    'title': title,
                    'author': 'Rick Riordan',
                    'publisher_genre': publisher_genre,
                    'status': status,
                    'line_number': i
                }
                
                rick_riordan_books.append(book_info)
                print(f"  → Title: {title}")
                print(f"  → Status: {status}")
                print(f"  → Publisher/Genre: {publisher_genre}")
                print()

print(f"Total Rick Riordan books found: {len(rick_riordan_books)}")

# Analyze availability status
print("\n=== AVAILABILITY ANALYSIS ===")
print("=" * 50)

available_books = []
not_available_books = []

print("\nDetailed status breakdown:")
for i, book in enumerate(rick_riordan_books, 1):
    print(f"{i}. {book['title']}")
    print(f"   Status: {book['status']}")
    
    # Determine if book is physically present on shelves
    status = book['status'].lower()
    
    if status == 'available':
        available_books.append(book)
        print(f"   → ON SHELVES ✓")
    elif status in ['checked out', 'overdue']:
        not_available_books.append(book)
        print(f"   → NOT ON SHELVES ✗ ({book['status']})")
    else:
        print(f"   → UNKNOWN STATUS: {book['status']}")
    print()

# Calculate final counts
print("\n=== FINAL RESULTS ===")
print("=" * 40)

total_rick_riordan = len(rick_riordan_books)
available_count = len(available_books)
not_available_count = len(not_available_books)

print(f"Total Rick Riordan books in collection: {total_rick_riordan}")
print(f"Books currently available on shelves: {available_count}")
print(f"Books NOT currently on shelves: {not_available_count}")

print("\nBooks NOT on shelves (Checked Out or Overdue):")
for i, book in enumerate(not_available_books, 1):
    print(f"{i}. {book['title']} - {book['status']}")

print("\nBooks available on shelves:")
for i, book in enumerate(available_books, 1):
    print(f"{i}. {book['title']} - {book['status']}")

# Save detailed analysis
analysis_results = {
    'total_rick_riordan_books': total_rick_riordan,
    'books_available_on_shelves': available_count,
    'books_not_on_shelves': not_available_count,
    'all_rick_riordan_books': rick_riordan_books,
    'available_books': available_books,
    'not_available_books': not_available_books
}

import json
with open('workspace/rick_riordan_availability_analysis.json', 'w', encoding='utf-8') as f:
    json.dump(analysis_results, f, indent=2, ensure_ascii=False)

print(f"\n✓ Detailed analysis saved to: workspace/rick_riordan_availability_analysis.json")

# Create summary report
summary_report = f"""SCRIBE COUNTY PUBLIC LIBRARY - RICK RIORDAN BOOK ANALYSIS
{'='*60}

TOTAL RICK RIORDAN BOOKS: {total_rick_riordan}
BOOKS NOT PHYSICALLY PRESENT ON SHELVES: {not_available_count}

BOOKS NOT ON SHELVES:
{'-'*30}
"""

for i, book in enumerate(not_available_books, 1):
    summary_report += f"{i}. {book['title']} ({book['status']})\n"

summary_report += f"\nBOOKS AVAILABLE ON SHELVES: {available_count}\n"
summary_report += f"{'-'*30}\n"

for i, book in enumerate(available_books, 1):
    summary_report += f"{i}. {book['title']} ({book['status']})\n"

with open('workspace/rick_riordan_summary_report.txt', 'w', encoding='utf-8') as f:
    f.write(summary_report)

print(f"✓ Summary report saved to: workspace/rick_riordan_summary_report.txt")

print("\n" + "="*60)
print("ANSWER TO THE QUESTION:")
print("="*60)
print(f"The total count of Rick Riordan books that are NOT physically present")
print(f"on the library shelves (either Checked Out or Overdue) is: {not_available_count}")
print("="*60)
```