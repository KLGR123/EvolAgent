### Development Step 5: Reform Party-IFP Federal System Agreement and South African Ambassador to France

**Description**: Conduct a comprehensive web search to identify the agreement between a South African political figure and the leader of the Inkatha Freedom Party that led to the formation of the Reform Party and proposed a federal system and bill of rights. Focus on finding information about this specific political agreement, the parties involved, and identify who later served as South African ambassador to France. Search for keywords including 'Inkatha Freedom Party agreement Reform Party', 'South Africa federal system bill of rights agreement', 'South African ambassador France Reform Party', and 'IFP leader political agreement federal system'.

**Use Cases**:
- Political history research and automated extraction of primary source materials on the Inkatha Freedom Party–Reform Party agreement for academic dissertations
- Legal consultancy for comparative constitutional law, extracting clauses on federalism and a bill of rights from web sources to inform white papers
- Investigative journalism backgrounder, compiling and summarizing key agreement details and ambassadorial appointments for in-depth news features
- Diplomatic training and orientation, gathering detailed career profiles of South African ambassadors to France for foreign service briefing books
- Educational curriculum development, assembling verified negotiation records and political agreement excerpts for university courses on democratization
- Policy think tank knowledge management, feeding structured findings on IFP agreements into internal databases for legislative and governance analysis
- Digital archiving automation, systematically capturing, indexing, and preserving web content related to South Africa’s transition to democracy
- AI-driven Q&A system enrichment, integrating extracted entities and agreement sections into conversational datasets for accurate political history responses

```
import requests
import json
import os
from datetime import datetime
import time

print("Conducting comprehensive web search to identify South African political agreement involving Inkatha Freedom Party...")

# Create workspace directory if it doesn't exist
if not os.path.exists('workspace'):
    os.makedirs('workspace')

# ALL FUNCTION DEFINITIONS FIRST
def get_page_content(url):
    """Fetch content from a URL with proper headers"""
    headers = {
        'User-Agent': 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/91.0.4472.124 Safari/537.36'
    }
    
    try:
        print(f"Fetching: {url}")
        response = requests.get(url, headers=headers, timeout=30)
        response.raise_for_status()
        print(f"Successfully fetched: {url}")
        return response.text
    except Exception as e:
        print(f"Error fetching {url}: {str(e)}")
        return None

def search_web_sources():
    """Search various web sources for information about the IFP agreement"""
    print("\nSearching for information about South African political agreements involving IFP...")
    
    # List of URLs to search for relevant information
    search_urls = [
        "https://en.wikipedia.org/wiki/Inkatha_Freedom_Party",
        "https://en.wikipedia.org/wiki/Reform_Party_(South_Africa)",
        "https://en.wikipedia.org/wiki/Mangosuthu_Buthelezi",
        "https://en.wikipedia.org/wiki/South_African_transition_to_democracy",
        "https://en.wikipedia.org/wiki/List_of_South_African_ambassadors_to_France",
        "https://en.wikipedia.org/wiki/Roelf_Meyer",
        "https://en.wikipedia.org/wiki/Convention_for_a_Democratic_South_Africa"
    ]
    
    search_results = {}
    
    for url in search_urls:
        print(f"\nSearching: {url}")
        content = get_page_content(url)
        
        if content:
            # Store the content for analysis
            page_name = url.split('/')[-1]
            search_results[page_name] = {
                'url': url,
                'content_length': len(content),
                'content': content[:15000]  # Store first 15000 characters for analysis
            }
            print(f"Retrieved {len(content)} characters from {page_name}")
        else:
            print(f"Failed to retrieve content from {url}")
        
        # Add delay between requests to be respectful
        time.sleep(2)
    
    return search_results

def analyze_content_for_keywords(content, keywords):
    """Analyze content for specific keywords and extract relevant sections"""
    content_lower = content.lower()
    found_keywords = []
    relevant_sections = []
    
    for keyword in keywords:
        if keyword.lower() in content_lower:
            found_keywords.append(keyword)
            
            # Find the section around the keyword
            start_pos = content_lower.find(keyword.lower())
            if start_pos != -1:
                # Extract 600 characters before and after the keyword
                section_start = max(0, start_pos - 600)
                section_end = min(len(content), start_pos + 600)
                section = content[section_start:section_end]
                relevant_sections.append({
                    'keyword': keyword,
                    'section': section,
                    'position': start_pos
                })
    
    return found_keywords, relevant_sections

def search_for_ifp_agreement():
    """Main function to search for IFP agreement information"""
    print("\nSearching for South African political agreement involving Inkatha Freedom Party...")
    
    # Keywords to search for
    search_keywords = [
        'Reform Party',
        'federal system',
        'bill of rights',
        'Inkatha Freedom Party',
        'IFP',
        'Mangosuthu Buthelezi',
        'ambassador to France',
        'political agreement',
        'South African transition',
        'apartheid negotiations',
        'democratic transition',
        'constitutional negotiations',
        'Roelf Meyer',
        'Cyril Ramaphosa',
        'CODESA',
        'National Party',
        'ANC',
        'multi-party negotiations',
        'constitutional convention',
        'Goodwill Zwelithini',
        'KwaZulu',
        'homeland',
        'federalism',
        'Record of Understanding'
    ]
    
    # Get search results from web sources
    search_results = search_web_sources()
    
    # Analyze each page for relevant information
    analysis_results = {}
    
    for page_name, page_data in search_results.items():
        print(f"\nAnalyzing {page_name} for relevant keywords...")
        
        found_keywords, relevant_sections = analyze_content_for_keywords(
            page_data['content'], search_keywords
        )
        
        analysis_results[page_name] = {
            'url': page_data['url'],
            'found_keywords': found_keywords,
            'relevant_sections': relevant_sections,
            'keyword_count': len(found_keywords)
        }
        
        print(f"Found {len(found_keywords)} relevant keywords in {page_name}")
        if found_keywords:
            print(f"Keywords found: {', '.join(found_keywords)}")
    
    # Save detailed analysis to file
    output_file = "workspace/ifp_agreement_search_results.json"
    with open(output_file, 'w') as f:
        json.dump(analysis_results, f, indent=2)
    
    print(f"\nDetailed search results saved to {output_file}")
    
    # Display summary of findings
    print("\n=== SEARCH SUMMARY ===")
    for page_name, results in analysis_results.items():
        if results['keyword_count'] > 0:
            print(f"\n{page_name} ({results['url']})")
            print(f"Keywords found: {', '.join(results['found_keywords'])}")
            
            # Display most relevant sections
            for section in results['relevant_sections'][:2]:  # Show top 2 sections
                print(f"\nRelevant section for '{section['keyword']}':")
                print(f"{section['section'][:400]}...")
    
    # Attempt to identify specific agreement and ambassador
    print("\n=== DETAILED ANALYSIS ===")
    
    # Look for specific patterns in the content
    potential_agreements = []
    potential_ambassadors = []
    reform_party_mentions = []
    
    for page_name, results in analysis_results.items():
        for section in results['relevant_sections']:
            section_text = section['section'].lower()
            
            # Look for Reform Party mentions
            if 'reform party' in section_text:
                reform_party_mentions.append({
                    'source': page_name,
                    'section': section['section'],
                    'keyword': section['keyword']
                })
            
            # Look for agreement-related information
            if 'reform party' in section_text and ('federal' in section_text or 'bill of rights' in section_text):
                potential_agreements.append({
                    'source': page_name,
                    'section': section['section'],
                    'keyword': section['keyword']
                })
            
            # Look for ambassador information
            if 'ambassador' in section_text and 'france' in section_text:
                potential_ambassadors.append({
                    'source': page_name,
                    'section': section['section'],
                    'keyword': section['keyword']
                })
    
    # Save specific findings
    findings = {
        'search_date': datetime.now().isoformat(),
        'potential_agreements': potential_agreements,
        'potential_ambassadors': potential_ambassadors,
        'reform_party_mentions': reform_party_mentions,
        'search_keywords': search_keywords,
        'pages_searched': list(search_results.keys()),
        'total_keywords_found': sum(r['keyword_count'] for r in analysis_results.values())
    }
    
    findings_file = "workspace/ifp_agreement_findings.json"
    with open(findings_file, 'w') as f:
        json.dump(findings, f, indent=2)
    
    print(f"\nSpecific findings saved to {findings_file}")
    
    # Display Reform Party mentions specifically
    if reform_party_mentions:
        print(f"\nFound {len(reform_party_mentions)} Reform Party mentions")
        for i, mention in enumerate(reform_party_mentions[:3], 1):
            print(f"\nReform Party mention {i} (from {mention['source']}):")
            print(f"{mention['section'][:500]}...")
    
    if potential_agreements:
        print(f"\nFound {len(potential_agreements)} potential agreement references")
        for i, agreement in enumerate(potential_agreements[:3], 1):
            print(f"\nAgreement reference {i} (from {agreement['source']}):")
            print(f"{agreement['section'][:500]}...")
    
    if potential_ambassadors:
        print(f"\nFound {len(potential_ambassadors)} potential ambassador references")
        for i, ambassador in enumerate(potential_ambassadors[:3], 1):
            print(f"\nAmbassador reference {i} (from {ambassador['source']}):")
            print(f"{ambassador['section'][:500]}...")
    
    if not potential_agreements and not potential_ambassadors:
        print("\nNo specific matches found in initial search. Will need to analyze the content more deeply.")
    
    return findings

# MAIN EXECUTION - PLACED AT THE VERY END AFTER ALL FUNCTIONS ARE COMPLETELY DEFINED
print("\n" + "="*80)
print("Starting comprehensive web search for IFP agreement information...")
print("="*80)

results = search_for_ifp_agreement()

print("\n" + "="*80)
print("SEARCH COMPLETED SUCCESSFULLY!")
print("="*80)
print(f"Total pages searched: {len(results.get('pages_searched', []))}")
print(f"Potential agreements found: {len(results.get('potential_agreements', []))}")
print(f"Potential ambassadors found: {len(results.get('potential_ambassadors', []))}")
print(f"Reform Party mentions found: {len(results.get('reform_party_mentions', []))}")
print(f"Total keywords found across all pages: {results.get('total_keywords_found', 0)}")
```