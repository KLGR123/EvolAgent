### Development Step 1: Download University of Leicester Dragon Diet Fish Supply Paper PDF

**Description**: Conduct a web search for the University of Leicester paper titled "Can Hiccup Supply Enough Fish to Maintain a Dragon’s Diet?" and download the full PDF of that paper into workspace/dragon_diet_fish_bag.pdf.

**Use Cases**:
- Automated retrieval of newly published academic papers for a university lab’s weekly literature review, ensuring the latest PDFs are stored in a shared folder for graduate students.
- Legal team workflow automation that searches court databases for PDF versions of case rulings and downloads them to a secure directory for compliance checks.
- Market research department script that fetches competitor whitepapers and industry reports in PDF form, saving them to a central repository for SWOT analysis.
- Environmental science project pipeline that automatically pulls government-released species habitat reports in PDF and archives them for GIS integration and change-detection studies.
- Healthcare analytics process that searches for and downloads clinical trial protocols in PDF, enabling data scientists to parse inclusion criteria and outcome metrics for meta-analysis.
- Journalist’s research tool to locate and save leaked or publicly posted policy documents in PDF format, building a source library for investigative reporting.
- Educational content management system component that finds and downloads open-access textbook chapters in PDF, organizing them by course and topic for online learning platforms.

```
import os
import requests
import json

# Purpose: Search and download the University of Leicester paper "Can Hiccup Supply Enough Fish to Maintain a Dragon’s Diet?"
# Output PDF will be saved to workspace/dragon_diet_fish_bag.pdf

# 1. Ensure workspace directory exists
workspace_dir = 'workspace'
os.makedirs(workspace_dir, exist_ok=True)

# 2. Prepare search
query = '"Can Hiccup Supply Enough Fish to Maintain a Dragon’s Diet?" University of Leicester PDF'
api_key = os.getenv('SERPAPI_API_KEY')

print("Starting search for the paper PDF...")
print(f"Search query: {query}")

if not api_key:
    print("ERROR: Environment variable SERPAPI_API_KEY not set. Cannot perform SerpAPI search.")
    print("Please set SERPAPI_API_KEY and rerun this script.")
    exit(1)

# 3. Call SerpAPI to get search results
params = {
    'engine': 'google',
    'q': query,
    'api_key': api_key,
    'num': 10,
    'google_domain': 'google.com'
}
print("Querying SerpAPI...")
resp = requests.get('https://serpapi.com/search.json', params=params)
print(f"SerpAPI response status: {resp.status_code}")
resp.raise_for_status()
results = resp.json()

# 4. Inspect top organic results for PDF links
pdf_link = None
if 'organic_results' in results:
    for idx, item in enumerate(results['organic_results']):
        link = item.get('link', '')
        title = item.get('title', '')
        snippet = item.get('snippet', '')
        print(f"Result #{idx+1}: {title}\n  URL: {link}\n  Snippet: {snippet[:100]}...\n")
        # Identify direct PDF URLs
        if link.lower().endswith('.pdf') or '.pdf?' in link.lower():
            pdf_link = link
            print(f"--> Selected PDF link: {pdf_link}")
            break

if not pdf_link:
    print("ERROR: No direct PDF link found in top results.")
    exit(1)

# 5. Download the PDF
pdf_path = os.path.join(workspace_dir, 'dragon_diet_fish_bag.pdf')
print(f"Downloading PDF from: {pdf_link}")
headers = {
    'User-Agent': 'Mozilla/5.0 (Windows NT 10.0; Win64; x64)',
    'Accept': 'application/pdf'
}
with requests.get(pdf_link, headers=headers, stream=True, timeout=60) as dl:
    dl.raise_for_status()
    total_bytes = 0
    with open(pdf_path, 'wb') as f:
        for chunk in dl.iter_content(chunk_size=8192):
            if chunk:
                f.write(chunk)
                total_bytes += len(chunk)
print(f"Download complete: {pdf_path}")
print(f"File size: {total_bytes} bytes ({total_bytes/1024/1024:.2f} MB)")

# 6. Verify basic sanity
if total_bytes < 10000:
    print("WARNING: The downloaded file is very small (<10 KB). It may not be the full PDF.")
else:
    print("PDF appears to have been downloaded successfully.")

print("Script finished.")

```