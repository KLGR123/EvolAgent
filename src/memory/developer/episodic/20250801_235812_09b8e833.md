### Development Step 2: Identify Unavailable Rick Riordan Books in Scribe County Public Library Collection

**Description**: Parse and analyze the attached PDF file data/gaia/2023/validation/e9a2c537-8232-4c3f-85b0-b52de6bcba99.pdf to extract the complete book collection data from Scribe County Public Library. Identify all books authored by Rick Riordan in the collection, then determine their current availability status by checking which ones are marked as checked out, on hold, or otherwise not currently available on the library shelves. Calculate the total count of Rick Riordan books that are not physically present on the shelves.

**Use Cases**:
- Public library acquisitions team parses monthly catalog PDFs to identify which Rick Riordan titles are frequently checked out or on hold, enabling data-driven ordering of additional copies before peak demand.
- School district librarians analyze end-of-year library reports in PDF form to monitor Rick Riordan book shortages and schedule summer reading restocks, ensuring each campus has adequate copies for incoming students.
- A young adult publisher’s marketing analysts scan regional library collection data PDFs to measure the circulation and unavailability of Rick Riordan titles, guiding targeted promotional campaigns in under-served areas.
- Multi-branch library networks automate inter-library loan requests by extracting from PDF catalogs which Rick Riordan books are unavailable locally, reducing manual request processing and wait times for patrons.
- Library science researchers compile availability statistics from public library PDFs to study the impact of Rick Riordan’s works on youth reading engagement, supporting academic publications on community literacy trends.
- Mobile app developers integrate parsed library PDF data to trigger push notifications for patrons when checked-out Rick Riordan books are returned, improving user experience and hold fulfillment rates.
- Public library budget planners extract counts of unavailable Rick Riordan titles from quarterly PDF reports to forecast replacement costs and allocate funds for next fiscal year’s acquisitions.

```
from langchain_community.document_loaders import PyPDFLoader
import os
import re

# Parse the PDF file to extract library collection data
pdf_path = "data/gaia/2023/validation/e9a2c537-8232-4c3f-85b0-b52de6bcba99.pdf"

print("=== PARSING SCRIBE COUNTY PUBLIC LIBRARY PDF ===")
print(f"PDF file: {pdf_path}")
print("=" * 60)

# Check if file exists
if not os.path.exists(pdf_path):
    print(f"Error: PDF file '{pdf_path}' does not exist.")
    exit()

print(f"✓ PDF file found: {os.path.basename(pdf_path)}")
print(f"File size: {os.path.getsize(pdf_path)} bytes")

# Load and parse PDF using LangChain
print("\nLoading PDF content...")
loader = PyPDFLoader(pdf_path)
pages = loader.load_and_split()

print(f"PDF parsing complete:")
print(f"Total pages: {len(pages)}")

if len(pages) == 0:
    print("No pages found in this PDF file.")
    exit()

# Extract content from all pages
full_content = "\n".join([page.page_content for page in pages])
print(f"Total content length: {len(full_content)} characters")

# Save raw content for analysis
os.makedirs('workspace', exist_ok=True)
with open('workspace/library_collection_raw_content.txt', 'w', encoding='utf-8') as f:
    f.write(full_content)

print(f"✓ Raw content saved to: workspace/library_collection_raw_content.txt")

# Display first portion to understand the structure
print("\n" + "="*60)
print("CONTENT PREVIEW (First 1500 characters):")
print("="*60)
print(full_content[:1500])

if len(full_content) > 1500:
    print("\n[Content continues...]")
    
    # Show a sample from the middle to understand data structure
    middle_start = len(full_content) // 2
    print("\n" + "-"*40)
    print("MIDDLE SECTION SAMPLE (800 characters):")
    print("-"*40)
    print(full_content[middle_start:middle_start+800])
    
    # Show end section
    print("\n" + "-"*40)
    print("END SECTION SAMPLE (Last 800 characters):")
    print("-"*40)
    print(full_content[-800:])

# Look for Rick Riordan mentions to understand data format
print("\n" + "="*60)
print("SEARCHING FOR RICK RIORDAN REFERENCES:")
print("="*60)

riordan_mentions = []
lines = full_content.split('\n')

for i, line in enumerate(lines):
    if 'riordan' in line.lower() or ('rick' in line.lower() and len(line.strip()) > 10):
        riordan_mentions.append((i+1, line.strip()))

if riordan_mentions:
    print(f"Found {len(riordan_mentions)} lines mentioning Rick Riordan or similar:")
    for line_num, line_content in riordan_mentions[:15]:  # Show first 15 matches
        print(f"Line {line_num}: {line_content}")
    
    if len(riordan_mentions) > 15:
        print(f"... and {len(riordan_mentions) - 15} more matches")
else:
    print("No direct 'Rick' or 'Riordan' mentions found.")
    
    # Look for variations
    print("\nSearching for author name variations...")
    author_patterns = ['riordan', 'rick', 'richard']
    
    for pattern in author_patterns:
        matches = []
        for i, line in enumerate(lines):
            if pattern in line.lower() and len(line.strip()) > 5:
                matches.append((i+1, line.strip()))
        
        if matches:
            print(f"\nFound {len(matches)} lines with '{pattern}':")
            for line_num, line_content in matches[:5]:
                print(f"  Line {line_num}: {line_content}")

# Look for common library/book-related keywords to understand format
print("\n" + "="*60)
print("ANALYZING DATA STRUCTURE:")
print("="*60)

keywords = ['title', 'author', 'available', 'checked', 'hold', 'status', 'book', 'out', 'in']
for keyword in keywords:
    count = full_content.lower().count(keyword)
    if count > 0:
        print(f"'{keyword}': {count} occurrences")

# Look for patterns that might indicate book records
print("\nLooking for structured data patterns...")

# Check for tabular data or consistent formatting
sample_lines = [line.strip() for line in lines[:50] if line.strip()]
print(f"\nFirst 20 non-empty lines to identify structure:")
for i, line in enumerate(sample_lines[:20], 1):
    print(f"{i:2d}: {line}")

print(f"\n✓ Initial PDF parsing complete. Ready for detailed Rick Riordan book analysis.")
```