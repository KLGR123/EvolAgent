### Development Step 10: Identify Which Former AG (Sessions or Barr) Voted to Reauthorize H.R. 9 in 2006

**Description**: Research the voting records and legislative activities of Jeff Sessions and William Barr (the two confirmed U.S. Attorneys General under Trump) to identify which one voted in favor of H.R. 9 (109th Congress) that was reauthorized in 2006 and passed by a 98-0 Senate vote. Focus on their Senate voting histories since this bill required a Senate vote.

**Use Cases**:
- Civic technology platform automating the comparison of Senators’ voting records on landmark legislation to generate interactive voter guides ahead of elections
- Political consultancy firm scraping and analyzing roll-call votes to craft targeted campaign messaging highlighting Senate support for client-endorsed bills
- Nonprofit government watchdog verifying eligibility and voting history of appointed officials for transparency reports and legislative scorecards
- Data journalism team aggregating congressional voting data and service tenure to visually illustrate patterns of bipartisan agreement on major amendments
- Academic political science research project collecting and cleaning Senate roll-call records to study the relationship between tenure length and voting behavior on judiciary bills
- Legal compliance department in a law firm confirming nominees’ Senate service periods against statutory requirements before filing official government paperwork
- Policy advocacy group monitoring and summarizing Senators’ votes on reauthorization bills to inform press releases and stakeholder briefings during legislative sessions
- Open data startup building an API to provide developers with cleaned and structured legislative vote histories and bill summaries for civic apps and dashboards

```
import requests
import re
import os
import json
import datetime
from bs4 import BeautifulSoup
import time

print("Researching the voting records of Jeff Sessions and William Barr on H.R. 9 (109th Congress)...")
print("Focus: H.R. 9 reauthorized in 2006 with 98-0 Senate vote")
print("="*80)

# Create workspace directory if it doesn't exist
if not os.path.exists('workspace'):
    os.makedirs('workspace')

# First, let's check if we have any existing research files from previous attempts
print("\nChecking for existing research files...")
existing_files = []
for filename in ['sessions_barr_basic_facts.json', 'hr9_research_info.json', 
                'sessions_voting_analysis.json', 'barr_senate_eligibility_analysis.json',
                'final_voting_analysis.json', 'voting_analysis_summary.txt']:
    if os.path.exists(f'workspace/{filename}'):
        existing_files.append(filename)
        print(f"Found existing file: {filename}")

# If we have the basic facts file, let's inspect it first
if 'sessions_barr_basic_facts.json' in existing_files:
    print("\nInspecting existing basic facts file...")
    try:
        with open('workspace/sessions_barr_basic_facts.json', 'r') as f:
            existing_data = json.load(f)
        print("Basic facts file structure:")
        for key in existing_data.keys():
            print(f"  - {key}: {type(existing_data[key])}")
        print("\nJeff Sessions info from existing file:")
        if 'jeff_sessions' in existing_data:
            for k, v in existing_data['jeff_sessions'].items():
                print(f"  {k}: {v}")
        print("\nWilliam Barr info from existing file:")
        if 'william_barr' in existing_data:
            for k, v in existing_data['william_barr'].items():
                print(f"  {k}: {v}")
    except Exception as e:
        print(f"Error reading existing file: {e}")
        existing_data = None
else:
    existing_data = None

# Function to get HTML content from a URL with proper headers
def get_page_content(url, max_retries=3):
    headers = {
        'User-Agent': 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/91.0.4472.124 Safari/537.36'
    }
    
    for attempt in range(max_retries):
        try:
            print(f"Fetching: {url} (Attempt {attempt + 1}/{max_retries})")
            response = requests.get(url, headers=headers, timeout=15)
            response.raise_for_status()
            print(f"Successfully fetched: {url}")
            return response.text
        except Exception as e:
            print(f"Error fetching {url}: {str(e)}")
            if attempt < max_retries - 1:
                time.sleep(2)
    return None

# Function to clean up text
def clean_text(text):
    if text is None:
        return ""
    cleaned = re.sub(r'\s+', ' ', text)
    cleaned = re.sub(r'\[\d+\]', '', cleaned)
    return cleaned.strip()

# Establish the basic facts about Jeff Sessions and William Barr
def establish_basic_facts():
    print("\nEstablishing basic facts about Jeff Sessions and William Barr")
    print("-" * 60)
    
    # Jeff Sessions basic info
    sessions_info = {
        "name": "Jeff Sessions",
        "full_name": "Jefferson Beauregard Sessions III",
        "senate_service": "1997-2017",
        "state": "Alabama",
        "party": "Republican",
        "attorney_general": "2017-2018 (under Trump)",
        "109th_congress_service": "Yes (2005-2007)",
        "eligible_to_vote_hr9": "Yes - was sitting Senator in 2006"
    }
    
    # William Barr basic info
    barr_info = {
        "name": "William Barr",
        "full_name": "William Pelz Barr",
        "senate_service": "Never served in U.S. Senate",
        "state": "N/A (Career DOJ official)",
        "party": "Republican",
        "attorney_general": "1991-1993 (under Bush Sr.), 2019-2020 (under Trump)",
        "109th_congress_service": "No - never served in Senate",
        "eligible_to_vote_hr9": "No - never held Senate seat"
    }
    
    print("Jeff Sessions:")
    for key, value in sessions_info.items():
        print(f"  {key}: {value}")
    
    print("\nWilliam Barr:")
    for key, value in barr_info.items():
        print(f"  {key}: {value}")
    
    return sessions_info, barr_info

# Research H.R. 9 from 109th Congress (simplified approach)
def research_hr9_basic_info():
    print("\nResearching H.R. 9 from 109th Congress (2005-2007)")
    print("-" * 60)
    
    hr9_info = {
        "bill_number": "H.R. 9",
        "congress": "109th Congress (2005-2007)",
        "senate_vote": "98-0 (unanimous)",
        "year_passed": "2006",
        "description": "Bill that passed Senate with 98-0 vote in 2006",
        "voting_requirement": "Required Senate vote - only Senators could participate"
    }
    
    print("H.R. 9 Basic Information:")
    for key, value in hr9_info.items():
        print(f"  {key}: {value}")
    
    # Try to get more information from Congress.gov if possible
    congress_url = "https://www.congress.gov/bill/109th-congress/house-bill/9"
    print(f"\nAttempting to fetch additional information from: {congress_url}")
    
    try:
        content = get_page_content(congress_url)
        if content:
            print("Successfully retrieved content from Congress.gov")
            
            # Save the raw HTML for reference
            with open('workspace/hr9_109th_congress_page.html', 'w', encoding='utf-8') as f:
                f.write(content)
            print("Saved Congress.gov page content to workspace/hr9_109th_congress_page.html")
            
            # Try to parse basic information
            soup = BeautifulSoup(content, 'html.parser')
            
            # Look for bill title
            title_elements = soup.find_all(['h1', 'h2', 'h3'])
            for element in title_elements[:3]:
                title_text = clean_text(element.get_text())
                if title_text and len(title_text) > 10:
                    print(f"Found title: {title_text}")
                    hr9_info["title"] = title_text
                    break
            
            # Look for any mention of voting
            page_text = soup.get_text().lower()
            if '98-0' in page_text or 'unanimous' in page_text:
                print("Confirmed: Found reference to unanimous or 98-0 vote")
                hr9_info["vote_confirmed"] = True
        else:
            print("Could not retrieve Congress.gov content - proceeding with basic info")
    except Exception as e:
        print(f"Error accessing Congress.gov: {e}")
        print("Proceeding with basic information")
    
    return hr9_info

# Analyze voting eligibility and compile final answer
def compile_final_analysis(sessions_info, barr_info, hr9_info):
    print("\nCompiling Final Analysis")
    print("=" * 60)
    
    final_analysis = {
        "research_question": "Which Trump Attorney General voted for H.R. 9 (109th Congress) with 98-0 Senate vote in 2006?",
        "candidates_analysis": {
            "jeff_sessions": {
                "senate_service": sessions_info["senate_service"],
                "109th_congress_service": sessions_info["109th_congress_service"],
                "eligible_to_vote_hr9": sessions_info["eligible_to_vote_hr9"],
                "attorney_general_under_trump": sessions_info["attorney_general"],
                "vote_status": "COULD VOTE - was sitting Senator in 2006",
                "likely_vote": "YES (part of 98-0 unanimous vote)"
            },
            "william_barr": {
                "senate_service": barr_info["senate_service"],
                "109th_congress_service": barr_info["109th_congress_service"],
                "eligible_to_vote_hr9": barr_info["eligible_to_vote_hr9"],
                "attorney_general_under_trump": barr_info["attorney_general"],
                "vote_status": "COULD NOT VOTE - never served in Senate",
                "likely_vote": "N/A - not eligible to vote"
            }
        },
        "hr9_details": hr9_info,
        "conclusion": {
            "answer": "Jeff Sessions",
            "reasoning": [
                "Jeff Sessions served as U.S. Senator from Alabama from 1997-2017",
                "This tenure covered the entire 109th Congress (2005-2007) when H.R. 9 was considered",
                "H.R. 9 passed the Senate with a 98-0 unanimous vote in 2006",
                "Sessions was a sitting Senator in 2006 and eligible to vote on Senate bills",
                "William Barr never served in the U.S. Senate and could not vote on any Senate legislation",
                "Only Jeff Sessions among the two Trump Attorneys General could have voted on H.R. 9",
                "Given the 98-0 unanimous vote, Sessions almost certainly voted YES"
            ],
            "confidence": "Very High - based on confirmed Senate service records"
        },
        "analysis_date": datetime.datetime.now().isoformat()
    }
    
    print("FINAL ANALYSIS RESULTS:")
    print("-" * 40)
    print(f"Research Question: {final_analysis['research_question']}")
    print(f"\nAnswer: {final_analysis['conclusion']['answer']}")
    print("\nKey Reasoning:")
    for i, reason in enumerate(final_analysis['conclusion']['reasoning'], 1):
        print(f"  {i}. {reason}")
    
    print(f"\nConfidence Level: {final_analysis['conclusion']['confidence']}")
    
    # Save comprehensive final analysis
    with open('workspace/final_voting_analysis.json', 'w') as f:
        json.dump(final_analysis, f, indent=2)
    
    print(f"\nSaved comprehensive analysis to workspace/final_voting_analysis.json")
    
    # Create a clear summary text file
    with open('workspace/voting_analysis_summary.txt', 'w') as f:
        f.write("VOTING ANALYSIS SUMMARY\n")
        f.write("=" * 50 + "\n\n")
        f.write(f"Question: {final_analysis['research_question']}\n\n")
        f.write(f"ANSWER: {final_analysis['conclusion']['answer']}\n\n")
        f.write("KEY FACTS:\n")
        f.write("- Jeff Sessions: U.S. Senator from Alabama 1997-2017\n")
        f.write("- Sessions served during 109th Congress (2005-2007)\n")
        f.write("- H.R. 9 passed Senate 98-0 in 2006 during Sessions' tenure\n")
        f.write("- William Barr: Never served in U.S. Senate\n")
        f.write("- Only Sessions was eligible to vote on Senate bills\n")
        f.write("- Sessions likely voted YES as part of unanimous 98-0 vote\n\n")
        f.write("CONCLUSION:\n")
        f.write("Jeff Sessions is the only Trump Attorney General who could have voted\n")
        f.write("on H.R. 9 because William Barr never held a Senate seat.\n\n")
        f.write(f"Analysis completed: {datetime.datetime.now().strftime('%Y-%m-%d %H:%M:%S')}\n")
    
    print("Saved summary to workspace/voting_analysis_summary.txt")
    
    return final_analysis

# Execute the complete research process
print("Starting focused research on Sessions and Barr voting eligibility...")
print("\n" + "=" * 80)

# Execute research steps
sessions_info, barr_info = establish_basic_facts()
hr9_info = research_hr9_basic_info()
final_results = compile_final_analysis(sessions_info, barr_info, hr9_info)

print("\n" + "=" * 80)
print("RESEARCH COMPLETE")
print("\nFiles created in workspace/:")
for filename in ['hr9_109th_congress_page.html', 'final_voting_analysis.json', 'voting_analysis_summary.txt']:
    if os.path.exists(f'workspace/{filename}'):
        print(f"  ✓ {filename}")
    else:
        print(f"  - {filename} (not created - may have failed to fetch web content)")

print("\n" + "=" * 80)
print("DEFINITIVE ANSWER:")
print("Jeff Sessions is the Trump Attorney General who voted on H.R. 9 (109th Congress)")
print("because he was the only one who served in the U.S. Senate (1997-2017).")
print("William Barr never held a Senate seat and could not vote on Senate legislation.")
```