### Development Step 14: Search Mexico City-based company owning Gran Hotel Ciudad de Mexico, operates CINETOP, partners with Telemundo.

**Description**: Search for information about the specific Mexico City-based company that simultaneously owns Gran Hotel Ciudad de Mexico, operates CINETOP cinema chain, and partnered with Telemundo in 2006 for their Mexico television expansion project. The previous research identified that Grupo Hunan owns the hotel but does not operate CINETOP or partner with Telemundo, indicating we need to find a different company that connects all three business activities mentioned in the TASK.

**Use Cases**:
- Due diligence for private equity analysts automating verification of target company’s multi-industry holdings, partnerships, and asset ownership from web sources
- Competitive intelligence research teams mapping rival conglomerate alliances in media, cinema, and hospitality by programmatically extracting structured evidence of business connections
- Corporate legal departments fact-checking contractual claims about joint ventures and subsidiary ownership before M&A transactions using scripted search and snippet analysis
- Market research firms tracking brand expansion strategies in Mexico by automating search engine queries to confirm hotel acquisitions, cinema operations, and broadcasting partnerships
- Journalists investigating a media conglomerate’s rumored cinema chain management and hotel investments by collecting and analyzing online references via an API-driven search pipeline
- Academic researchers studying diversification patterns of Mexican holding companies by generating datasets of verified partnerships and asset portfolios from aggregated search results
- Regulatory compliance officers auditing disclosed partnerships between local firms and international broadcasters by programmatically gathering and validating web-published evidence

```
import os
import json
import requests
from urllib.parse import quote
import time

# First, let's inspect the targeted search results to understand what we found about Grupo Xtra
results_file = os.path.join('workspace', 'targeted_mexico_company_search.json')

print("Inspecting targeted search results file...")
if os.path.exists(results_file):
    with open(results_file, 'r', encoding='utf-8') as f:
        search_data = json.load(f)
    
    print("File structure:")
    for key in search_data.keys():
        print(f"- {key}: {type(search_data[key])}")
        if isinstance(search_data[key], dict):
            for subkey in search_data[key].keys():
                print(f"  - {subkey}: {len(search_data[key][subkey])} items")
        elif isinstance(search_data[key], list):
            print(f"  Length: {len(search_data[key])}")
    
    print("\nAnalyzing Telemundo partnership findings...")
    telemundo_findings = search_data.get('business_connections', {}).get('telemundo_partnership', [])
    print(f"Found {len(telemundo_findings)} Telemundo-related results")
    
    for i, finding in enumerate(telemundo_findings):
        print(f"\nTelemundo Finding {i+1}:")
        print(f"Title: {finding.get('title', 'N/A')}")
        print(f"Snippet: {finding.get('snippet', 'N/A')}")
        print(f"URL: {finding.get('url', 'N/A')}")
else:
    print("Targeted search results file not found")
    search_data = {}

print("\n" + "="*60)
print("FOCUSED SEARCH: GRUPO XTRA VERIFICATION")
print("="*60)

# Based on the tester feedback, we found a crucial lead: "Grupo Xtra" as Telemundo's Mexican partner
# and CINETOP was formerly "Xtra Cinemas". Now we need to verify if Grupo Xtra also owns Gran Hotel Ciudad de Mexico

def search_google(query, max_results=10):
    """Search Google using SerpAPI"""
    api_key = os.getenv("SERPAPI_API_KEY")
    
    if api_key is None:
        print(f"Warning: No SERPAPI_API_KEY found for query: {query}")
        return None
    
    params = {
        "q": query,
        "api_key": api_key,
        "engine": "google",
        "google_domain": "google.com",
        "safe": "off",
        "num": max_results,
        "type": "search"
    }
    
    try:
        print(f"\nSearching Google for: {query}")
        response = requests.get("https://serpapi.com/search.json", params=params, timeout=20)
        
        if response.status_code == 200:
            results = response.json()
            return results.get("organic_results", [])
        else:
            print(f"Error: API request failed with status {response.status_code}")
            return None
    except Exception as e:
        print(f"Error during Google search: {e}")
        return None

# Initialize verification results
verification_results = {
    'target_company': 'Grupo Xtra',
    'evidence_found': {
        'telemundo_partnership': [],
        'cinetop_connection': [],
        'hotel_ownership': []
    },
    'verification_queries': [],
    'final_assessment': None
}

# Search 1: Verify Grupo Xtra and Telemundo partnership details
print("\nVerification 1: Grupo Xtra - Telemundo Partnership")
telemundo_queries = [
    '"Grupo Xtra" Telemundo Mexico partnership 2006',
    '"Grupo Xtra" NBC Universal Telemundo Mexico television',
    'Telemundo "Grupo Xtra" Mexican holding company partnership'
]

for query in telemundo_queries:
    results = search_google(query, 5)
    verification_results['verification_queries'].append(query)
    
    if results:
        print(f"Found {len(results)} results for Grupo Xtra-Telemundo query")
        for i, result in enumerate(results[:3]):
            title = result.get('title', 'No title')
            snippet = result.get('snippet', 'No snippet')
            url = result.get('link', 'No URL')
            
            print(f"\nTelemundo-Xtra Result {i+1}:")
            print(f"Title: {title}")
            print(f"Snippet: {snippet}")
            
            # Look for confirmation of partnership
            text_to_analyze = f"{title} {snippet}".lower()
            if 'grupo xtra' in text_to_analyze and ('telemundo' in text_to_analyze or 'nbc' in text_to_analyze):
                verification_results['evidence_found']['telemundo_partnership'].append({
                    'title': title,
                    'snippet': snippet,
                    'url': url,
                    'relevance': 'High - mentions both Grupo Xtra and Telemundo'
                })
    
    time.sleep(1)

# Search 2: Verify Grupo Xtra connection to CINETOP/Xtra Cinemas
print("\n\nVerification 2: Grupo Xtra - CINETOP/Xtra Cinemas Connection")
cinetop_queries = [
    '"Grupo Xtra" "Xtra Cinemas" CINETOP Mexico',
    '"Grupo Xtra" cinema chain Mexico owner',
    'Xtra Cinemas "Grupo Xtra" parent company Mexico'
]

for query in cinetop_queries:
    results = search_google(query, 5)
    verification_results['verification_queries'].append(query)
    
    if results:
        print(f"Found {len(results)} results for Grupo Xtra-CINETOP query")
        for i, result in enumerate(results[:3]):
            title = result.get('title', 'No title')
            snippet = result.get('snippet', 'No snippet')
            url = result.get('link', 'No URL')
            
            print(f"\nCINETOP-Xtra Result {i+1}:")
            print(f"Title: {title}")
            print(f"Snippet: {snippet}")
            
            # Look for confirmation of cinema connection
            text_to_analyze = f"{title} {snippet}".lower()
            if 'grupo xtra' in text_to_analyze and ('cinema' in text_to_analyze or 'cinetop' in text_to_analyze or 'xtra cinemas' in text_to_analyze):
                verification_results['evidence_found']['cinetop_connection'].append({
                    'title': title,
                    'snippet': snippet,
                    'url': url,
                    'relevance': 'High - mentions both Grupo Xtra and cinema operations'
                })
    
    time.sleep(1)

# Search 3: Critical verification - Does Grupo Xtra own Gran Hotel Ciudad de Mexico?
print("\n\nVerification 3: Grupo Xtra - Gran Hotel Ciudad de Mexico Ownership")
hotel_queries = [
    '"Grupo Xtra" "Gran Hotel Ciudad de Mexico" owner',
    '"Grupo Xtra" hotel business Mexico City',
    'Gran Hotel Ciudad de Mexico "Grupo Xtra" ownership',
    '"Grupo Xtra" diversified business hotel cinema television'
]

for query in hotel_queries:
    results = search_google(query, 5)
    verification_results['verification_queries'].append(query)
    
    if results:
        print(f"Found {len(results)} results for Grupo Xtra-Hotel query")
        for i, result in enumerate(results[:3]):
            title = result.get('title', 'No title')
            snippet = result.get('snippet', 'No snippet')
            url = result.get('link', 'No URL')
            
            print(f"\nHotel-Xtra Result {i+1}:")
            print(f"Title: {title}")
            print(f"Snippet: {snippet}")
            
            # Look for confirmation of hotel ownership
            text_to_analyze = f"{title} {snippet}".lower()
            if 'grupo xtra' in text_to_analyze and ('gran hotel' in text_to_analyze or 'hotel' in text_to_analyze):
                verification_results['evidence_found']['hotel_ownership'].append({
                    'title': title,
                    'snippet': snippet,
                    'url': url,
                    'relevance': 'High - mentions both Grupo Xtra and hotel business'
                })
    
    time.sleep(1)

# Additional search: Look for Grupo Xtra business portfolio
print("\n\nAdditional Search: Grupo Xtra Business Portfolio")
portfolio_queries = [
    '"Grupo Xtra" Mexico business portfolio diversified',
    '"Grupo Xtra" holdings Mexico entertainment hospitality'
]

for query in portfolio_queries:
    results = search_google(query, 3)
    verification_results['verification_queries'].append(query)
    
    if results:
        print(f"Found {len(results)} results for Grupo Xtra portfolio query")
        for i, result in enumerate(results):
            title = result.get('title', 'No title')
            snippet = result.get('snippet', 'No snippet')
            
            print(f"\nPortfolio Result {i+1}:")
            print(f"Title: {title}")
            print(f"Snippet: {snippet}")
    
    time.sleep(1)

print("\n" + "="*60)
print("VERIFICATION ANALYSIS")
print("="*60)

# Analyze the evidence
telemundo_evidence = len(verification_results['evidence_found']['telemundo_partnership'])
cinetop_evidence = len(verification_results['evidence_found']['cinetop_connection'])
hotel_evidence = len(verification_results['evidence_found']['hotel_ownership'])

print(f"\nEvidence Summary for Grupo Xtra:")
print(f"- Telemundo partnership evidence: {telemundo_evidence} findings")
print(f"- CINETOP/cinema connection evidence: {cinetop_evidence} findings")
print(f"- Hotel ownership evidence: {hotel_evidence} findings")

print(f"\nTotal verification queries performed: {len(verification_results['verification_queries'])}")

# Determine if Grupo Xtra is the answer
if telemundo_evidence > 0 and cinetop_evidence > 0 and hotel_evidence > 0:
    verification_results['final_assessment'] = "CONFIRMED: Grupo Xtra is the Mexico City company that owns Gran Hotel Ciudad de Mexico, operates CINETOP, and partnered with Telemundo in 2006"
else:
    verification_results['final_assessment'] = f"PARTIAL CONFIRMATION: Grupo Xtra shows evidence for {telemundo_evidence + cinetop_evidence + hotel_evidence} out of 3 required business connections"

print(f"\nFinal Assessment: {verification_results['final_assessment']}")

# Save verification results
verification_file = os.path.join('workspace', 'grupo_xtra_verification.json')
with open(verification_file, 'w', encoding='utf-8') as f:
    json.dump(verification_results, f, indent=4, ensure_ascii=False)

print(f"\nVerification results saved to: {verification_file}")

print("\n" + "="*60)
print("CONCLUSION")
print("="*60)

if telemundo_evidence > 0 or cinetop_evidence > 0:
    print("\nBased on the search evidence, Grupo Xtra appears to be a strong candidate because:")
    if telemundo_evidence > 0:
        print("✓ Confirmed partnership with Telemundo for Mexico television expansion")
    if cinetop_evidence > 0:
        print("✓ Connection to CINETOP/Xtra Cinemas cinema operations")
    
    if hotel_evidence == 0:
        print("⚠ Hotel ownership connection needs further verification")
        print("\nRecommendation: Grupo Xtra may be the answer, but hotel ownership requires additional confirmation")
    else:
        print("✓ Hotel ownership confirmed")
        print("\n🎯 ANSWER: Grupo Xtra is the Mexico City company that connects all three business activities")
else:
    print("\nInsufficient evidence found for Grupo Xtra. May need alternative research approaches.")
```