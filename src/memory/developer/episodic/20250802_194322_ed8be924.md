### Development Step 18: Search Emily Midkiff‚Äôs June 2014 Dragon Depictions Article to Find Hreidmar Son-Named Journal

**Description**: Search for information about Emily Midkiff's June 2014 article, focusing on identifying the journal named after one of Hreidmar's sons from Norse mythology. Research Hreidmar's sons (Fafnir, Regin, and Otr) to determine which one has a journal named after them, then locate Midkiff's specific article from June 2014 that discusses dragon depictions and contains quotes from two different authors expressing distaste.

**Use Cases**:
- A Norse mythology scholar automating the extraction of Fafnir journal links from saved HTML search results to compile all June 2014 articles on dragon symbolism for a comprehensive literature review
- A university librarian processing archived web dumps of Fafnir to generate a JSON inventory of articles and metadata, streamlining the cataloguing of early 2010s journal issues in the institutional repository
- A PhD candidate in medieval studies using the script to locate Emily Midkiff‚Äôs June 2014 discussion on dragon depictions, quickly gathering author quotes expressing distaste for critical analysis in their dissertation
- A digital archivist at a cultural heritage center harvesting and cross‚Äêreferencing article URLs and key term counts from multiple search result files to build a searchable database of primary sources on mythological creatures
- A metadata specialist at an academic publisher automating link extraction and term frequency analysis for back‚Äêissue content of Fafnir, integrating the results into the content management system for author and topic indexing
- An AI research assistant fixing variable scope issues in a scraper pipeline to analyze saved search pages, extract relevant academic links, and produce structured JSON inventories for downstream NLP processing
- A competitive intelligence analyst at a media monitoring agency extracting and analyzing historical references to ‚Äúdragon depictions‚Äù across archival HTML files to track sentiment trends and author stances in niche publications
- A software QA engineer validating web scraping workflows by injecting pre-saved search and archive HTML pages, verifying link extraction accuracy, JSON output integrity, and bug fixes for reliable data pipeline operation

```
import os
import json
from bs4 import BeautifulSoup

print('=== ANALYZING SEARCH RESULTS FOR EMILY MIDKIFF ARTICLE ===')
print('Objective: Fix variable scope issues and extract Emily Midkiff article from saved search results')
print('Strategy: Analyze saved search result files to locate and access the target article\n')

# Define workspace path
workspace = 'workspace'
if not os.path.exists(workspace):
    print(f'ERROR: Workspace directory {workspace} does not exist')
else:
    print(f'‚úì Workspace directory found: {workspace}')

print('\n=== STEP 1: INSPECTING SAVED SEARCH RESULT FILES ===')
print()

# First, let's understand what search result files we have
try:
    workspace_files = os.listdir(workspace)
    search_files = [f for f in workspace_files if 'search_results' in f and f.endswith('.html')]
    
    print(f'Found {len(search_files)} search result files:')
    for i, filename in enumerate(search_files, 1):
        filepath = os.path.join(workspace, filename)
        file_size = os.path.getsize(filepath)
        print(f'  {i}. {filename} ({file_size:,} bytes)')
except Exception as e:
    print(f'Error listing search files: {str(e)}')

print('\n=== STEP 2: ANALYZING MOST PROMISING SEARCH RESULTS ===')
print()

# Based on the HISTORY, we know these searches found relevant terms:
# - Emily Midkiff: found 'june(2)' 
# - Midkiff: found 'june(2)'
# - dragon depictions: found 'dragon(1)', 'june(2)'
# - June 2014: found '2014(7)', 'june(5)'

priority_search_files = [
    'search_results_Emily_Midkiff.html',
    'search_results_Midkiff.html', 
    'search_results_dragon_depictions.html',
    'search_results_June_2014.html'
]

for search_file in priority_search_files:
    search_path = os.path.join(workspace, search_file)
    if os.path.exists(search_path):
        print(f'Analyzing: {search_file}')
        
        try:
            with open(search_path, 'r', encoding='utf-8') as f:
                search_content = f.read()
            
            search_soup = BeautifulSoup(search_content, 'html.parser')
            search_text = search_soup.get_text().lower()
            
            print(f'  Content length: {len(search_content):,} characters')
            
            # Count key terms to verify our search worked
            key_terms = {
                'midkiff': search_text.count('midkiff'),
                'emily': search_text.count('emily'),
                'dragon': search_text.count('dragon'),
                'june': search_text.count('june'),
                '2014': search_text.count('2014'),
                'depiction': search_text.count('depiction'),
                'distaste': search_text.count('distaste')
            }
            
            print('  Key term counts:')
            for term, count in key_terms.items():
                if count > 0:
                    print(f'    {term}: {count} occurrences')
            
            # Look for article links - fix the variable scope issue from previous attempts
            article_links = search_soup.find_all('a', href=True)
            relevant_links = []
            
            for link in article_links:
                href = link.get('href', '')
                link_text = link.get_text().strip()  # FIX: Define link_text variable properly
                
                # Convert relative URLs to absolute
                if href.startswith('/'):
                    full_url = f'https://fafnir.journal.fi{href}'
                elif not href.startswith('http'):
                    full_url = f'https://fafnir.journal.fi/{href}'
                else:
                    full_url = href
                
                # Check if this looks like an article link with relevant content
                link_text_lower = link_text.lower()
                href_lower = href.lower()
                
                # Look for article patterns and relevant terms
                is_article = '/article/' in href_lower or '/view/' in href_lower
                has_relevant_terms = any(term in link_text_lower for term in ['midkiff', 'dragon', '2014', 'june'])
                is_substantial = len(link_text.strip()) > 10
                
                if (is_article or has_relevant_terms) and is_substantial:
                    relevant_links.append({
                        'url': full_url,
                        'text': link_text[:150],
                        'href': href,
                        'is_article': is_article,
                        'has_relevant_terms': has_relevant_terms
                    })
            
            print(f'  Found {len(relevant_links)} potentially relevant links:')
            for i, link in enumerate(relevant_links[:5], 1):
                print(f'    {i}. "{link["text"]}"')
                print(f'       URL: {link["url"]}')
                print(f'       Article link: {link["is_article"]}, Relevant terms: {link["has_relevant_terms"]}')
                print()
            
            # If we found promising links, save them for access
            if relevant_links:
                links_data = {
                    'search_file': search_file,
                    'key_terms_found': key_terms,
                    'relevant_links': relevant_links[:10],
                    'analysis_timestamp': 'search_results_analyzed'
                }
                
                links_file = os.path.join(workspace, f'extracted_links_{search_file.replace(".html", ".json")}')
                with open(links_file, 'w', encoding='utf-8') as f:
                    json.dump(links_data, f, indent=2, ensure_ascii=False)
                
                print(f'  ‚úì Link analysis saved to: {os.path.basename(links_file)}')
        
        except Exception as e:
            print(f'  Error analyzing {search_file}: {str(e)}')
        
        print()
    else:
        print(f'  ‚ö† File not found: {search_file}')

print('=== STEP 3: ANALYZING ARCHIVE FILES FOR 2014 CONTENT ===')
print()

# Also check the archive files we saved
archive_files = [f for f in workspace_files if 'archive' in f and f.endswith('.html')]

for archive_file in archive_files:
    if '2014' in archive_file:
        archive_path = os.path.join(workspace, archive_file)
        print(f'Analyzing archive file: {archive_file}')
        
        try:
            with open(archive_path, 'r', encoding='utf-8') as f:
                archive_content = f.read()
            
            archive_soup = BeautifulSoup(archive_content, 'html.parser')
            archive_text = archive_soup.get_text().lower()
            
            # Look for 2014 and Midkiff content
            archive_terms = {
                'midkiff': archive_text.count('midkiff'),
                'emily': archive_text.count('emily'),
                'dragon': archive_text.count('dragon'),
                'june': archive_text.count('june'),
                '2014': archive_text.count('2014')
            }
            
            print('  Archive content analysis:')
            for term, count in archive_terms.items():
                if count > 0:
                    print(f'    {term}: {count} occurrences')
            
            # If this archive page has relevant content, extract article links
            if archive_terms['midkiff'] > 0 or (archive_terms['2014'] > 0 and archive_terms['june'] > 0):
                print('  üéØ RELEVANT CONTENT FOUND IN ARCHIVE!')
                
                archive_links = archive_soup.find_all('a', href=True)
                archive_article_links = []
                
                for link in archive_links:
                    href = link.get('href', '')
                    link_text = link.get_text().strip()
                    
                    if href.startswith('/'):
                        full_url = f'https://fafnir.journal.fi{href}'
                    elif not href.startswith('http'):
                        full_url = f'https://fafnir.journal.fi/{href}'
                    else:
                        full_url = href
                    
                    # Look for article links
                    if '/article/' in href.lower() or '/view/' in href.lower():
                        archive_article_links.append({
                            'url': full_url,
                            'text': link_text[:100],
                            'href': href
                        })
                
                if archive_article_links:
                    print(f'  Found {len(archive_article_links)} article links in archive:')
                    for i, link in enumerate(archive_article_links[:3], 1):
                        print(f'    {i}. "{link["text"]}"')
                        print(f'       URL: {link["url"]}')
        
        except Exception as e:
            print(f'  Error analyzing {archive_file}: {str(e)}')
        
        print()

print('=== STEP 4: CREATING COMPREHENSIVE LINK INVENTORY ===')
print()

# Compile all the promising links we've found
all_promising_links = []

# Check all the extracted link files we created
for filename in os.listdir(workspace):
    if filename.startswith('extracted_links_') and filename.endswith('.json'):
        link_file_path = os.path.join(workspace, filename)
        
        try:
            with open(link_file_path, 'r', encoding='utf-8') as f:
                link_data = json.load(f)
            
            if 'relevant_links' in link_data:
                for link in link_data['relevant_links']:
                    link['source_search'] = filename
                    all_promising_links.append(link)
        
        except Exception as e:
            print(f'Error reading {filename}: {str(e)}')

# Remove duplicates based on URL
unique_links = []
seen_urls = set()

for link in all_promising_links:
    if link['url'] not in seen_urls:
        seen_urls.add(link['url'])
        unique_links.append(link)

print(f'Found {len(unique_links)} unique promising links across all searches:')
for i, link in enumerate(unique_links, 1):
    print(f'  {i}. "{link["text"]}"')
    print(f'     URL: {link["url"]}')
    print(f'     Source: {link.get("source_search", "unknown")}')
    print(f'     Article link: {link.get("is_article", False)}')
    print()

# Save the comprehensive link inventory
link_inventory = {
    'research_objective': 'Find Emily Midkiff June 2014 article in Fafnir journal about dragon depictions',
    'total_unique_links': len(unique_links),
    'promising_links': unique_links,
    'search_files_analyzed': [f for f in workspace_files if 'search_results' in f],
    'archive_files_analyzed': [f for f in workspace_files if 'archive' in f],
    'next_steps': 'Access the most promising article links to find Emily Midkiff content',
    'inventory_timestamp': 'comprehensive_analysis_complete'
}

inventory_file = os.path.join(workspace, 'emily_midkiff_link_inventory.json')
with open(inventory_file, 'w', encoding='utf-8') as f:
    json.dump(link_inventory, f, indent=2, ensure_ascii=False)

print('=== STEP 5: FINAL ANALYSIS SUMMARY ===')
print()

print('üéØ *** SEARCH RESULT ANALYSIS COMPLETE ***')
print('‚úÖ Fixed variable scope issues from previous attempts')
print('‚úÖ Successfully analyzed all saved search result files')
print('‚úÖ Extracted and categorized relevant article links')
print('‚úÖ Created comprehensive inventory of promising leads')
print(f'‚úÖ Found {len(unique_links)} unique links to investigate')
print(f'‚úÖ Complete analysis saved to: {os.path.basename(inventory_file)}')

print('\nüìã PLAN COMPLETION STATUS:')
print('- ‚úÖ Norse mythology research: Hreidmar\'s sons are Fafnir (dragon), Regin, Otr')
print('- ‚úÖ Journal identification: Fafnir journal named after the dragon son')
print('- ‚úÖ Website access: Successfully accessed Fafnir journal')
print('- ‚úÖ Search implementation: Multiple search strategies executed')
print('- ‚úÖ Results analysis: Search results processed and links extracted')
print('- üîç Next: Access promising article links to locate Emily Midkiff\'s specific article')

print('\nüìÅ KEY FILES FOR NEXT STEPS:')
print(f'  - Link inventory: {os.path.basename(inventory_file)}')
for filename in os.listdir(workspace):
    if filename.startswith('extracted_links_'):
        print(f'  - Detailed analysis: {filename}')

print('\n*** SEARCH ANALYSIS EXECUTION COMPLETE ***')
print('Ready to access the most promising article links to complete the research objective')
```