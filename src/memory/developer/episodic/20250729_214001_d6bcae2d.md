### Development Step 5: Identify the Employee Who Didn’t Give a Gift in the Secret Santa Exchange

**Description**: Determine which employee did not give a gift by comparing the list of twelve employees who were assigned to give gifts against the eleven gifts that were actually given. Cross-reference each actual gift with its giver based on the recipient's profile interests, then identify which of the twelve assigned gift-givers is missing from the actual gift exchange list.

**Use Cases**:
- Corporate HR Secret Santa compliance: Automatically identify which employee missed delivering a holiday gift by matching actual gifts’ descriptions against recipient interest profiles and assigned givers.
- School PTA holiday gift drive audit: Track parent-to-student assignments and match received student gift descriptions with student wish lists to pinpoint which parent failed to contribute.
- Non-profit toy drive verification: Cross-reference donated toy descriptions with beneficiary profiles to ensure every sponsor’s assigned child received a gift, and flag any missing donor.
- E-commerce order fulfillment audit: Compare the list of sold items and assigned warehouse packers to the actual shipped item descriptions, matching keywords from product catalogs to detect which packer missed an order.
- Clinical trial sample distribution tracking: Match descriptions of biological samples returned from trial sites to the planned distribution list of lab technicians, identifying any site that failed to send their assigned samples.
- Museum loan return management: Reconcile expected artifact loans with returned item descriptions, using catalog keywords to match artifacts to borrowers and flag any curator or institution that didn’t return their loaned piece.
- Community food drive volunteer check-in: Match delivered food item descriptions to neighborhood recipient profiles and volunteer assignments, identifying which volunteer did not complete their drop-off.

```
import os
import json

print('=== LOADING AND ANALYZING SECRET SANTA DATA ===') 
print('Based on the file inspection, secret_santa_structured_data.json contains the complete dataset.')
print('Loading the structured data for gift exchange analysis...')
print()

# Load the structured secret santa data
with open('workspace/secret_santa_structured_data.json', 'r', encoding='utf-8') as f:
    santa_data = json.load(f)

# Extract the key components
employees = santa_data['employees']
gift_assignments = santa_data['gift_assignments'] 
profiles = santa_data['profiles']
gifts_given = santa_data['gifts_given']
analysis_summary = santa_data['analysis']

print('=== DATASET OVERVIEW ===') 
print(f'Total employees assigned to give gifts: {len(employees)}')
print(f'Total gift assignments: {len(gift_assignments)}')
print(f'Total employee profiles: {len(profiles)}')
print(f'Total gifts actually given: {len(gifts_given)}')
print()

print('=== TWELVE EMPLOYEES ASSIGNED TO GIVE GIFTS ===') 
for i, employee in enumerate(employees, 1):
    print(f'{i:2d}. {employee}')
print()

print('=== ELEVEN GIFTS ACTUALLY GIVEN ===') 
for i, gift in enumerate(gifts_given, 1):
    gift_preview = gift[:80] + '...' if len(gift) > 80 else gift
    print(f'{i:2d}. {gift_preview}')
print()

print('=== EMPLOYEE PROFILES (for gift matching) ===') 
for employee, profile in profiles.items():
    profile_preview = profile[:100] + '...' if len(profile) > 100 else profile
    print(f'{employee}: {profile_preview}')
print()

print('=== GIFT ASSIGNMENTS (Employee -> Recipient) ===') 
for giver, recipient in gift_assignments.items():
    print(f'{giver} -> {recipient}')
print()

# Now analyze: match each gift to its giver based on recipient profiles
print('=== MATCHING GIFTS TO GIVERS ===') 
print('Cross-referencing each gift with recipient profiles to identify the giver...')
print()

gift_to_giver_matches = []

for i, gift in enumerate(gifts_given, 1):
    print(f'GIFT {i}: {gift}')
    print('Checking which recipient profile matches this gift...')
    
    # Check each recipient's profile to see if this gift matches their interests
    potential_matches = []
    
    for employee, profile in profiles.items():
        # Check if this gift seems relevant to this person's profile
        gift_lower = gift.lower()
        profile_lower = profile.lower()
        
        # Look for keyword matches between gift and profile
        gift_words = set(gift_lower.split())
        profile_words = set(profile_lower.split())
        
        # Count common meaningful words (excluding common words)
        common_words = ['the', 'a', 'an', 'and', 'or', 'but', 'in', 'on', 'at', 'to', 'for', 'of', 'with', 'by']
        meaningful_gift_words = gift_words - set(common_words)
        meaningful_profile_words = profile_words - set(common_words)
        
        overlap = meaningful_gift_words.intersection(meaningful_profile_words)
        
        if overlap:
            potential_matches.append((employee, overlap, len(overlap)))
    
    # Sort by number of overlapping words (best match first)
    potential_matches.sort(key=lambda x: x[2], reverse=True)
    
    if potential_matches:
        best_match = potential_matches[0]
        recipient = best_match[0]
        matching_words = best_match[1]
        
        print(f'  BEST MATCH: {recipient} (matching words: {matching_words})')
        
        # Find who was assigned to give a gift to this recipient
        giver = None
        for assigned_giver, assigned_recipient in gift_assignments.items():
            if assigned_recipient == recipient:
                giver = assigned_giver
                break
        
        if giver:
            print(f'  GIVER: {giver} was assigned to give gift to {recipient}')
            gift_to_giver_matches.append((gift, recipient, giver))
        else:
            print(f'  ERROR: No one was assigned to give gift to {recipient}')
    else:
        print(f'  WARNING: No clear profile match found for this gift')
    
    print()

# Summary of gift-giver matches
print('=== SUMMARY: GIFT-GIVER MATCHES ===') 
actual_givers = set()
for i, (gift, recipient, giver) in enumerate(gift_to_giver_matches, 1):
    gift_preview = gift[:60] + '...' if len(gift) > 60 else gift
    print(f'{i:2d}. {giver} gave "{gift_preview}" to {recipient}')
    actual_givers.add(giver)

print()
print('=== IDENTIFYING THE MISSING GIFT-GIVER ===') 
print(f'Employees assigned to give gifts: {set(employees)}')
print(f'Employees who actually gave gifts: {actual_givers}')
print()

missing_givers = set(employees) - actual_givers

if len(missing_givers) == 1:
    missing_giver = list(missing_givers)[0]
    print(f'*** ANSWER: {missing_giver} did not give a gift ***')
    
    # Show details about this employee
    assigned_recipient = gift_assignments.get(missing_giver, 'Unknown')
    print(f'\n{missing_giver} was assigned to give a gift to: {assigned_recipient}')
    if assigned_recipient in profiles:
        print(f'{assigned_recipient}\'s profile: {profiles[assigned_recipient]}')
else:
    print(f'ERROR: Found {len(missing_givers)} missing givers: {missing_givers}')
    print('Expected exactly 1 missing giver.')

print('\n=== ANALYSIS COMPLETE ===')
```