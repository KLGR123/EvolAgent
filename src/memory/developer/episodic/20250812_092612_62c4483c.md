### Development Step 12: Identify Organization and Advocate for S√£o Francisco Basin Environmental Education Plan

**Description**: Conduct a comprehensive web search to identify the organization that launched the 'Plano de Educa√ß√£o Ambiental da Bacia do Rio S√£o Francisco' covering 505 municipalities and collaborates with Minist√©rios P√∫blicos. Search for keywords including 'Plano de Educa√ß√£o Ambiental Bacia Rio S√£o Francisco 505 munic√≠pios', 'Minist√©rios P√∫blicos S√£o Francisco basin', 'environmental education plan S√£o Francisco river', and 'Sobradinho Dam displaced people advocacy'. Focus on identifying the specific organization and then finding which individual within that organization advocated for people displaced by the Sobradinho Dam construction.

**Use Cases**:
- NGO stakeholder mapping for the S√£o Francisco River basin: automating the identification of committees, individual leaders, and collaborating public ministries to coordinate community outreach across 505 municipalities
- Investigative journalism on infrastructure impacts: extracting and aggregating web mentions of Sobradinho Dam displacement advocates to build a timeline of legal actions and public statements
- Legal due diligence in resettlement cases: systematically finding lawyers, representatives, and committee members involved in Sobradinho Dam compensation claims for case preparation
- Academic research on environmental governance: mining targeted search results to analyze the structure and roles within CBHSF and its educational plan for a peer-reviewed publication
- Government transparency monitoring: tracking and verifying collaborations between the Comit√™ da Bacia do Rio S√£o Francisco and Minist√©rios P√∫blicos to assess public-private partnership effectiveness
- Corporate social responsibility auditing: scanning online sources for company involvement in the Plano de Educa√ß√£o Ambiental and identifying responsible executives or project coordinators
- Policy development for watershed management: compiling and summarizing key findings on CBHSF‚Äôs organizational makeup and Sobradinho advocacy to inform regional environmental regulations
- Environmental consulting project scoping: automating extraction of committee members and advocates to establish local contacts and streamline fieldwork planning in the S√£o Francisco basin

```
import json
import os
from datetime import datetime

print("Completing analysis of CBHSF individuals involved in Sobradinho Dam displaced people advocacy...")

# First, let's inspect the workspace to understand what files we have
print("\n=== WORKSPACE INSPECTION ===")
possible_workspaces = ['workspace', 'workspace_webshaper_65', 'workspace_webshaper_68']
analysis_files = []
targeted_search_file = None

for workspace_dir in possible_workspaces:
    if os.path.exists(workspace_dir):
        files = os.listdir(workspace_dir)
        print(f"\nChecking {workspace_dir} ({len(files)} files):")
        for file in files:
            if 'sao_francisco' in file:
                file_path = os.path.join(workspace_dir, file)
                if 'targeted_search' in file or 'cbhsf_sobradinho' in file:
                    targeted_search_file = file_path
                    print(f"  ‚úì Found targeted search: {file_path}")
                elif 'analysis' in file or 'findings' in file:
                    analysis_files.append(file_path)
                    print(f"  - Analysis file: {file_path}")
                else:
                    print(f"  - Other file: {file_path}")

# Load and inspect the targeted search results if available
if targeted_search_file and os.path.exists(targeted_search_file):
    print(f"\n=== INSPECTING TARGETED SEARCH RESULTS ===")
    print(f"Loading: {targeted_search_file}")
    
    with open(targeted_search_file, 'r', encoding='utf-8') as f:
        targeted_data = json.load(f)
    
    print(f"Targeted search data structure:")
    for key, value in targeted_data.items():
        if isinstance(value, dict):
            print(f"  - {key}: dict with keys: {list(value.keys())}")
            if 'results' in value and isinstance(value['results'], list):
                print(f"    - results: list with {len(value['results'])} items")
                if value['results']:
                    sample_result = value['results'][0]
                    print(f"    - sample result keys: {list(sample_result.keys())}")
        else:
            print(f"  - {key}: {type(value).__name__}")
    
    print(f"\n=== CONDUCTING SAFE ANALYSIS OF TARGETED RESULTS ===")
    
    # Initialize analysis containers
    cbhsf_individuals = []
    sobradinho_advocates = []
    key_findings = []
    
    # Keywords for analysis
    individual_keywords = ['presidente', 'diretor', 'coordenador', 'secret√°rio', 'advogado', 'representante', 'membro']
    name_indicators = ['dr.', 'dra.', 'prof.', 'eng.', 'adv.']
    
    total_targeted_results = 0
    
    # Process each query's results with proper variable scoping
    for query_key, query_data in targeted_data.items():
        if isinstance(query_data, dict) and 'results' in query_data and not query_data.get('error'):
            query_text = query_data.get('query', 'Unknown query')
            results = query_data.get('results', [])
            total_targeted_results += len(results)
            
            print(f"\nProcessing {len(results)} results from: {query_text[:50]}...")
            
            for result_index, result in enumerate(results):
                # Safely extract result data with proper variable names
                result_title = result.get('title', '').lower()
                result_body = result.get('body', '').lower()
                result_url = result.get('href', '')
                
                # Look for CBHSF individuals
                cbhsf_mentioned = ('cbhsf' in result_title or 'cbhsf' in result_body or 
                                 'comit√™' in result_title or 'comit√™' in result_body)
                
                if cbhsf_mentioned:
                    for keyword in individual_keywords:
                        if keyword in result_title or keyword in result_body:
                            cbhsf_individuals.append({
                                'title': result.get('title', ''),
                                'url': result_url,
                                'snippet': result.get('body', '')[:400],
                                'query': query_text,
                                'role_keyword': keyword
                            })
                            break
                
                # Look for Sobradinho advocacy mentions
                sobradinho_terms = ['sobradinho', 'deslocad', 'reassent', 'indenizad', 'atingid']
                advocacy_terms = ['advogad', 'represent', 'defens', 'luta', 'direito']
                
                has_sobradinho = False
                found_sobradinho_terms = []
                for term in sobradinho_terms:
                    if term in result_title or term in result_body:
                        has_sobradinho = True
                        found_sobradinho_terms.append(term)
                
                has_advocacy = False
                found_advocacy_terms = []
                for term in advocacy_terms:
                    if term in result_title or term in result_body:
                        has_advocacy = True
                        found_advocacy_terms.append(term)
                
                if has_sobradinho and has_advocacy:
                    sobradinho_advocates.append({
                        'title': result.get('title', ''),
                        'url': result_url,
                        'snippet': result.get('body', '')[:400],
                        'query': query_text,
                        'sobradinho_terms': found_sobradinho_terms,
                        'advocacy_terms': found_advocacy_terms
                    })
                
                # Look for key findings combining CBHSF and Sobradinho
                cbhsf_present = ('cbhsf' in result_title or 'cbhsf' in result_body or 
                               'comit√™' in result_title or 'comit√™' in result_body)
                sobradinho_present = 'sobradinho' in result_title or 'sobradinho' in result_body
                
                if cbhsf_present and sobradinho_present:
                    key_findings.append({
                        'title': result.get('title', ''),
                        'url': result_url,
                        'snippet': result.get('body', '')[:400],
                        'query': query_text,
                        'relevance': 'High - Contains both CBHSF and Sobradinho references'
                    })
    
    print(f"\nüìà TARGETED ANALYSIS RESULTS:")
    print(f"   ‚Ä¢ Total targeted results analyzed: {total_targeted_results}")
    print(f"   ‚Ä¢ CBHSF individuals found: {len(cbhsf_individuals)}")
    print(f"   ‚Ä¢ Sobradinho advocates found: {len(sobradinho_advocates)}")
    print(f"   ‚Ä¢ Key findings (CBHSF + Sobradinho): {len(key_findings)}")
    
    print(f"\nüë• CBHSF INDIVIDUALS IDENTIFIED:")
    for i, individual in enumerate(cbhsf_individuals[:6], 1):
        print(f"\n{i}. {individual['title']}")
        print(f"   Role: {individual['role_keyword']}")
        print(f"   URL: {individual['url']}")
        print(f"   Snippet: {individual['snippet'][:200]}...")
        print(f"   From query: {individual['query'][:40]}...")
    
    print(f"\nüèóÔ∏è SOBRADINHO ADVOCATES IDENTIFIED:")
    for i, advocate in enumerate(sobradinho_advocates[:6], 1):
        print(f"\n{i}. {advocate['title']}")
        print(f"   Sobradinho terms: {', '.join(advocate['sobradinho_terms'])}")
        print(f"   Advocacy terms: {', '.join(advocate['advocacy_terms'])}")
        print(f"   URL: {advocate['url']}")
        print(f"   Snippet: {advocate['snippet'][:200]}...")
    
    print(f"\nüéØ KEY FINDINGS (CBHSF + Sobradinho):")
    for i, finding in enumerate(key_findings[:6], 1):
        print(f"\n{i}. {finding['title']}")
        print(f"   Relevance: {finding['relevance']}")
        print(f"   URL: {finding['url']}")
        print(f"   Snippet: {finding['snippet'][:200]}...")
    
    # Load previous comprehensive analysis for context
    previous_analysis = None
    if analysis_files:
        latest_analysis_file = analysis_files[-1]
        print(f"\n=== LOADING PREVIOUS COMPREHENSIVE ANALYSIS ===")
        print(f"Loading: {latest_analysis_file}")
        
        with open(latest_analysis_file, 'r', encoding='utf-8') as f:
            previous_analysis = json.load(f)
        
        print(f"Previous analysis loaded with {len(previous_analysis)} main sections")
    
    # Compile final comprehensive findings
    final_findings = {
        'analysis_date': datetime.now().isoformat(),
        'organization_identified': 'CBHSF (Comit√™ da Bacia Hidrogr√°fica do Rio S√£o Francisco)',
        'environmental_plan': 'Plano de Educa√ß√£o Ambiental da Bacia do Rio S√£o Francisco',
        'municipalities_covered': 505,
        'ministry_collaboration': 'Confirmed - Works with Minist√©rios P√∫blicos',
        'targeted_search_summary': {
            'total_results_analyzed': total_targeted_results,
            'cbhsf_individuals_found': len(cbhsf_individuals),
            'sobradinho_advocates_found': len(sobradinho_advocates),
            'key_findings_count': len(key_findings)
        },
        'cbhsf_individuals': cbhsf_individuals[:10],
        'sobradinho_advocates': sobradinho_advocates[:10],
        'key_findings': key_findings[:10],
        'previous_analysis_summary': {
            'total_initial_results': previous_analysis.get('search_summary', {}).get('total_results', 0) if previous_analysis else 0,
            'organizations_found': previous_analysis.get('search_summary', {}).get('organizations_found', []) if previous_analysis else [],
            'sobradinho_references_initial': previous_analysis.get('search_summary', {}).get('sobradinho_references_count', 0) if previous_analysis else 0
        }
    }
    
    # Save comprehensive findings
    final_findings_file = "workspace/cbhsf_sobradinho_final_comprehensive_findings.json"
    with open(final_findings_file, 'w', encoding='utf-8') as f:
        json.dump(final_findings, f, indent=2, ensure_ascii=False)
    
    print(f"\n{'='*80}")
    print("FINAL COMPREHENSIVE RESULTS")
    print(f"{'='*80}")
    
    print(f"\nüè¢ ORGANIZATION CONFIRMED:")
    print(f"   ‚Ä¢ CBHSF (Comit√™ da Bacia Hidrogr√°fica do Rio S√£o Francisco)")
    print(f"   ‚Ä¢ Responsible for: Plano de Educa√ß√£o Ambiental da Bacia do Rio S√£o Francisco")
    print(f"   ‚Ä¢ Coverage: 505 municipalities")
    print(f"   ‚Ä¢ Collaboration: Works with Minist√©rios P√∫blicos")
    
    if cbhsf_individuals:
        print(f"\nüë§ CBHSF INDIVIDUALS IDENTIFIED: {len(cbhsf_individuals)}")
        for individual in cbhsf_individuals[:3]:
            print(f"   ‚Ä¢ {individual['title']} ({individual['role_keyword']})")
            print(f"     URL: {individual['url'][:60]}...")
    else:
        print(f"\nüë§ CBHSF INDIVIDUALS: No specific individuals identified in current search")
    
    if sobradinho_advocates:
        print(f"\nüèóÔ∏è SOBRADINHO ADVOCATES IDENTIFIED: {len(sobradinho_advocates)}")
        for advocate in sobradinho_advocates[:3]:
            print(f"   ‚Ä¢ {advocate['title']}")
            print(f"     Terms: {', '.join(advocate['sobradinho_terms'])} + {', '.join(advocate['advocacy_terms'])}")
            print(f"     URL: {advocate['url'][:60]}...")
    else:
        print(f"\nüèóÔ∏è SOBRADINHO ADVOCATES: No specific advocates identified in current search")
    
    if key_findings:
        print(f"\nüéØ CBHSF-SOBRADINHO CONNECTIONS: {len(key_findings)}")
        for finding in key_findings[:2]:
            print(f"   ‚Ä¢ {finding['title']}")
            print(f"     URL: {finding['url'][:60]}...")
    
    print(f"\nüìÅ COMPREHENSIVE FINDINGS SAVED TO:")
    print(f"   ‚Ä¢ {final_findings_file}")
    
    print(f"\n{'='*80}")
    print("MISSION STATUS")
    print(f"{'='*80}")
    
    print(f"\n‚úÖ ORGANIZATION IDENTIFIED: CBHSF")
    print(f"‚úÖ ENVIRONMENTAL PLAN CONFIRMED: Covers 505 municipalities")
    print(f"‚úÖ MINISTRY COLLABORATION CONFIRMED")
    
    if cbhsf_individuals and sobradinho_advocates:
        print(f"‚úÖ INDIVIDUALS IDENTIFIED: Found both CBHSF members and Sobradinho advocates")
        print(f"\nüéØ MISSION COMPLETED SUCCESSFULLY!")
    elif cbhsf_individuals or sobradinho_advocates:
        print(f"‚ö†Ô∏è INDIVIDUALS PARTIALLY IDENTIFIED: Found some leads, need additional research")
        print(f"\nüéØ MISSION PARTIALLY COMPLETED")
    else:
        print(f"‚ö†Ô∏è INDIVIDUALS: General organizational structure identified, specific advocates require additional targeted research")
        print(f"\nüéØ ORGANIZATION IDENTIFIED, INDIVIDUAL ADVOCATES NEED FURTHER INVESTIGATION")
    
    print(f"\nüìä SUMMARY STATISTICS:")
    print(f"   ‚Ä¢ Initial comprehensive search results: {previous_analysis.get('search_summary', {}).get('total_results', 0) if previous_analysis else 0}")
    print(f"   ‚Ä¢ Targeted search results: {total_targeted_results}")
    print(f"   ‚Ä¢ CBHSF individuals found: {len(cbhsf_individuals)}")
    print(f"   ‚Ä¢ Sobradinho advocates found: {len(sobradinho_advocates)}")
    print(f"   ‚Ä¢ Key CBHSF-Sobradinho connections: {len(key_findings)}")
    
    print(f"\n‚úÖ COMPREHENSIVE SEARCH AND ANALYSIS COMPLETED!")
    
else:
    print(f"\n‚ùå No targeted search results file found.")
    print(f"Available files: {analysis_files}")
    print(f"Need to conduct targeted search first or check file location.")
```