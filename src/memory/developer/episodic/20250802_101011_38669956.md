### Development Step 4: List U.S. Presidents’ Birth Cities, States, and Coordinates in JSON Format

**Description**: Collect a complete list of all United States presidents with their official birth city names and state names, then obtain the geographic coordinates (longitude and latitude) for each birth city using authoritative sources such as official presidential biographies or Wikipedia infoboxes. Save the results in a structured format (e.g., CSV or JSON) at workspace/presidential_birthplaces.json.

**Use Cases**:
- Interactive classroom mapping for U.S. history teachers to plot each president’s birth city on a digital map, enabling students to explore regional patterns in presidential origins
- Data journalism visualization that overlays presidential birthplaces with historical election results, revealing geographic correlations between candidates’ hometowns and voter turnout
- Heritage tourism itinerary generator for travel agencies, automatically creating routes and travel guides to visit presidential birth sites with GPS coordinates and local landmark information
- Academic research project correlating presidents’ birth locations with socioeconomic data of the 18th-20th centuries, analyzing how birthplace demographics influenced political trajectories
- Mobile trivia app feature that triggers location‐based quizzes when users approach presidential birth cities, engaging tourists with on-site historical facts and achievements
- Genealogy platform enhancement that cross-references presidential birthplaces with ancestry databases, helping users trace familial or regional ties to early U.S. leaders
- Museum exhibit automation tool for cartographers, producing high-resolution printed and interactive maps of presidential birthplaces, complete with coordinate-driven narrative panels

```
import os
import re
import time
import json
import requests
from bs4 import BeautifulSoup, NavigableString, Tag
from geopy.geocoders import Nominatim

# Ensure workspace directory exists
workspace = 'workspace'
os.makedirs(workspace, exist_ok=True)

# Load or fetch presidents list page
list_html_path = os.path.join(workspace, 'presidents_list.html')
if os.path.exists(list_html_path):
    print(f"Loading saved list HTML from {list_html_path}")
    with open(list_html_path, 'r', encoding='utf-8') as f:
        list_html = f.read()
else:
    list_url = 'https://en.wikipedia.org/wiki/List_of_presidents_of_the_United_States'
    print(f"Fetching presidents list from {list_url}")
    resp = requests.get(list_url)
    resp.raise_for_status()
    list_html = resp.text
    with open(list_html_path, 'w', encoding='utf-8') as f:
        f.write(list_html)
    print(f"Saved list HTML to {list_html_path}")

# Parse the presidents table
soup_list = BeautifulSoup(list_html, 'html.parser')
table = soup_list.find('table', class_='wikitable')
rows = table.find_all('tr')[1:]
print(f"Found {len(rows)} rows in presidents table")

# Collect president names and page URLs
presidents = []
for row in rows:
    cells = row.find_all('td')
    if len(cells) < 2:
        continue
    name_cell = cells[1]
    link = name_cell.find('a', href=True)
    if not link:
        continue
    name = link.get_text(strip=True)
    page_url = 'https://en.wikipedia.org' + link['href']
    presidents.append({'name': name, 'url': page_url})
print(f"Collected {len(presidents)} president links")

# Prepare geolocator
geolocator = Nominatim(user_agent='presidential_birth_locator')

results = []
for idx, pres in enumerate(presidents, start=1):
    name = pres['name']
    url = pres['url']
    print(f"\n[{idx}/{len(presidents)}] {name}\n Fetching: {url}")
    page = requests.get(url)
    page.raise_for_status()
    soup = BeautifulSoup(page.text, 'html.parser')
    time.sleep(1)

    # Find infobox
    infobox = soup.find('table', class_=lambda c: c and 'infobox' in c)
    birth_place = None
    if infobox:
        for tr in infobox.find_all('tr'):
            th = tr.find('th')
            if th and th.get_text(strip=True).startswith('Born'):
                td = tr.find('td')
                if td:
                    br = td.find('br')
                    if br:
                        # gather siblings after the <br>
                        parts = []
                        for sib in br.next_siblings:
                            if isinstance(sib, NavigableString):
                                text = sib.strip()
                                if text:
                                    parts.append(text)
                            elif isinstance(sib, Tag) and sib.name == 'a':
                                txt = sib.get_text(strip=True)
                                if txt:
                                    parts.append(txt)
                            # ignore other tags (sup, small, span, etc.)
                        # join and clean
                        full_place = ' '.join(parts)
                        full_place = re.sub(r'\s+', ' ', full_place).strip()
                        # remove any parenthetical notes
                        full_place = re.sub(r'\([^)]*\)', '', full_place).strip()
                        # remove trailing commas
                        full_place = full_place.rstrip(',')
                        birth_place = full_place
                break
    if not birth_place:
        print(f" Warning: could not parse birth place for {name}")
        birth_place = ''
    print(f"  Parsed birth_place: '{birth_place}'")

    # Attempt to geocode full place
    latitude = longitude = None
    if birth_place:
        try:
            print(f"  Geocoding full string: '{birth_place}'")
            loc = geolocator.geocode(birth_place, timeout=10)
            time.sleep(1)
            if loc:
                latitude, longitude = loc.latitude, loc.longitude
                print(f"   -> Got coords: {latitude}, {longitude}")
            else:
                # fallback: take first two comma-separated tokens and append USA
                tokens = [t.strip() for t in birth_place.split(',') if t.strip()]
                if len(tokens) >= 2:
                    fallback = tokens[0] + ', ' + tokens[1] + ', USA'
                    print(f"  Fallback geocoding: '{fallback}'")
                    loc2 = geolocator.geocode(fallback, timeout=10)
                    time.sleep(1)
                    if loc2:
                        latitude, longitude = loc2.latitude, loc2.longitude
                        print(f"   -> Fallback coords: {latitude}, {longitude}")
        except Exception as e:
            print(f"  Error during geocoding: {e}")

    # Extract city and state from birth_place
    city = state = ''
    if birth_place:
        toks = [t.strip() for t in birth_place.split(',') if t.strip()]
        if toks:
            city = toks[0]
        if len(toks) >= 2:
            state = toks[1]

    entry = {
        'name': name,
        'birth_city': city,
        'birth_state': state,
        'latitude': latitude,
        'longitude': longitude
    }
    print(f"  Recorded entry: {entry}")
    results.append(entry)

# Save results to JSON
out_path = os.path.join(workspace, 'presidential_birthplaces.json')
with open(out_path, 'w', encoding='utf-8') as f:
    json.dump(results, f, indent=2)
print(f"\nSaved {len(results)} records to {out_path}")
```