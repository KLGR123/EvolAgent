### Development Step 1: Jan‚ÄìMay 2018 H. pylori Treatment Trials in Acne Vulgaris: Enrollment Counts from ClinicalTrials.gov

**Description**: Search the NIH clinical trials database (ClinicalTrials.gov) for clinical trials involving H. pylori treatment in acne vulgaris patients that were conducted during the January-May 2018 timeframe. Extract the actual enrollment count from the trial listing, focusing on studies that specifically examine the relationship between H. pylori infection and acne vulgaris treatment during this exact time period.

**Use Cases**:
- Dermatology research teams extracting enrollment figures from NIH clinical trials to compare H. pylori eradication protocols in acne vulgaris patients (Jan‚ÄìMay 2018)
- Pharmaceutical project managers auditing patient recruitment numbers for H. pylori‚Äìacne co-treatment studies on ClinicalTrials.gov to inform upcoming protocol design
- Systematic review authors automating data extraction of trial enrollment statistics for H. pylori acne treatment studies conducted in early 2018
- Biotech analysts mapping historical study sizes for Helicobacter pylori eradication regimens in acne patients to evaluate market saturation before launching new therapies
- Regulatory affairs specialists verifying sample size compliance in H. pylori‚Äìacne clinical trials from January to May 2018 to support IND submissions
- Medical journal editors cross-checking reported enrollment data against ClinicalTrials.gov records for H. pylori acne trials to ensure publication accuracy
- Clinical operations managers integrating trial recruitment trends into operational dashboards for resource planning in dermatology studies involving H. pylori
- Health informatics engineers creating datasets of enrollment metrics for H. pylori‚Äìrelated acne research to feed machine-learning models for patient stratification

```
import os
import requests
import json
from datetime import datetime

# Get SerpAPI key from environment variables
api_key = os.getenv("SERPAPI_API_KEY")

if api_key is None:
    print("Error: Missing API key. Make sure you have SERPAPI_API_KEY in your environment variables.")
else:
    print("API key found, proceeding with clinical trials search...")
    print("=" * 80)
    print("SEARCHING NIH CLINICALTRIALS.GOV FOR H. PYLORI ACNE VULGARIS TRIALS (JAN-MAY 2018)")
    print("=" * 80)
    
    # Define specific search queries targeting ClinicalTrials.gov
    search_queries = [
        'site:clinicaltrials.gov "H. pylori" "acne vulgaris" 2018',
        'site:clinicaltrials.gov "Helicobacter pylori" acne treatment 2018',
        'site:clinicaltrials.gov "H pylori" acne January 2018 May',
        'site:clinicaltrials.gov helicobacter acne vulgaris enrollment 2018',
        '"ClinicalTrials.gov" "H. pylori" acne 2018 enrollment',
        'site:clinicaltrials.gov acne helicobacter treatment study 2018'
    ]
    
    print(f"Executing {len(search_queries)} targeted searches...\n")
    
    # Store all search results
    all_search_results = {}
    
    for i, query in enumerate(search_queries, 1):
        print(f"Search {i}/{len(search_queries)}: {query}")
        print("-" * 60)
        
        # Prepare API request parameters
        params = {
            "q": query,
            "api_key": api_key,
            "engine": "google",
            "google_domain": "google.com",
            "safe": "off",
            "num": 15,
            "type": "search"
        }
        
        try:
            # Make API request to SerpAPI
            response = requests.get("https://serpapi.com/search.json", params=params, timeout=30)
            
            if response.status_code == 200:
                results = response.json()
                
                if results.get("organic_results"):
                    print(f"Found {len(results['organic_results'])} results")
                    
                    # Store results with query context
                    all_search_results[f'search_{i}'] = {
                        'query': query,
                        'results': results['organic_results'],
                        'timestamp': datetime.now().isoformat()
                    }
                    
                    # Display and analyze results for this query
                    clinical_trials_found = False
                    for j, result in enumerate(results['organic_results'][:10], 1):
                        title = result.get('title', 'No title')
                        link = result.get('link', 'No URL')
                        snippet = result.get('snippet', 'No snippet')
                        
                        # Check for ClinicalTrials.gov URLs and relevant content
                        title_lower = title.lower()
                        snippet_lower = snippet.lower()
                        combined_text = f"{title_lower} {snippet_lower}"
                        
                        # Key indicators for relevant clinical trials
                        key_indicators = [
                            'h. pylori',
                            'h pylori',
                            'helicobacter pylori',
                            'acne vulgaris',
                            'acne',
                            'clinicaltrials.gov',
                            '2018',
                            'enrollment',
                            'participants',
                            'study'
                        ]
                        
                        matching_indicators = [ind for ind in key_indicators if ind in combined_text]
                        
                        print(f"\n  Result {j}:")
                        print(f"    Title: {title}")
                        print(f"    URL: {link}")
                        print(f"    Snippet: {snippet[:300]}{'...' if len(snippet) > 300 else ''}")
                        
                        if matching_indicators:
                            print(f"    ‚≠ê MATCHING INDICATORS: {', '.join(matching_indicators)}")
                            
                            # Special attention to ClinicalTrials.gov URLs
                            if 'clinicaltrials.gov' in link.lower():
                                print(f"    üéØ CLINICALTRIALS.GOV RESULT: Direct match")
                                clinical_trials_found = True
                                
                                # Look for enrollment numbers in snippet
                                import re
                                enrollment_patterns = [
                                    r'(\d+)\s+participants?',
                                    r'enrollment[:\s]*(\d+)',
                                    r'(\d+)\s+subjects?',
                                    r'n\s*=\s*(\d+)',
                                    r'sample size[:\s]*(\d+)'
                                ]
                                
                                for pattern in enrollment_patterns:
                                    matches = re.findall(pattern, snippet, re.IGNORECASE)
                                    if matches:
                                        print(f"    üìä POTENTIAL ENROLLMENT: {matches}")
                    
                    if not clinical_trials_found:
                        print("    No direct ClinicalTrials.gov results found for this query")
                        
                else:
                    print("No organic results found for this query")
                    all_search_results[f'search_{i}'] = {
                        'query': query,
                        'results': [],
                        'timestamp': datetime.now().isoformat()
                    }
            else:
                print(f"Error: API request failed with status {response.status_code}: {response.text}")
                
        except Exception as e:
            print(f"Error during search {i}: {str(e)}")
            continue
        
        print("\n")
    
    print("\n" + "=" * 80)
    print("SEARCH RESULTS ANALYSIS")
    print("=" * 80)
    
    # Save all search results to workspace for detailed analysis
    timestamp = datetime.now().strftime("%Y%m%d_%H%M%S")
    results_file = f"workspace/h_pylori_acne_clinical_trials_search_{timestamp}.json"
    
    with open(results_file, 'w', encoding='utf-8') as f:
        json.dump({
            'search_topic': 'H. pylori treatment in acne vulgaris patients',
            'time_period': 'January-May 2018',
            'search_timestamp': timestamp,
            'total_queries': len(search_queries),
            'queries_executed': search_queries,
            'search_results': all_search_results
        }, f, indent=2, ensure_ascii=False)
    
    print(f"Search results saved to: {results_file}")
    
    # Analyze findings
    total_results = sum(len(search_result['results']) for search_result in all_search_results.values())
    print(f"Total search results collected: {total_results}")
    
    # Look for ClinicalTrials.gov matches
    clinicaltrials_matches = []
    h_pylori_acne_matches = []
    enrollment_data = []
    
    for search_key, search_data in all_search_results.items():
        for result in search_data['results']:
            title = result.get('title', '').lower()
            snippet = result.get('snippet', '').lower()
            link = result.get('link', '').lower()
            combined = f"{title} {snippet} {link}"
            
            # ClinicalTrials.gov matches
            if 'clinicaltrials.gov' in combined:
                clinicaltrials_matches.append({
                    'query': search_data['query'],
                    'title': result.get('title'),
                    'link': result.get('link'),
                    'snippet': result.get('snippet')
                })
            
            # H. pylori + acne matches
            if ('h. pylori' in combined or 'h pylori' in combined or 'helicobacter' in combined) and 'acne' in combined:
                h_pylori_acne_matches.append({
                    'query': search_data['query'],
                    'title': result.get('title'),
                    'link': result.get('link'),
                    'snippet': result.get('snippet')
                })
            
            # Look for enrollment data
            import re
            snippet_text = result.get('snippet', '')
            enrollment_patterns = [
                r'(\d+)\s+participants?',
                r'enrollment[:\s]*(\d+)',
                r'(\d+)\s+subjects?',
                r'n\s*=\s*(\d+)',
                r'sample size[:\s]*(\d+)'
            ]
            
            for pattern in enrollment_patterns:
                matches = re.findall(pattern, snippet_text, re.IGNORECASE)
                if matches and ('h. pylori' in combined or 'helicobacter' in combined) and 'acne' in combined:
                    enrollment_data.append({
                        'query': search_data['query'],
                        'title': result.get('title'),
                        'link': result.get('link'),
                        'enrollment_numbers': matches,
                        'snippet': snippet_text
                    })
    
    print(f"\nüìä SEARCH FINDINGS:")
    print(f"ClinicalTrials.gov matches: {len(clinicaltrials_matches)}")
    print(f"H. pylori + acne matches: {len(h_pylori_acne_matches)}")
    print(f"Results with enrollment data: {len(enrollment_data)}")
    
    if clinicaltrials_matches:
        print(f"\nüéØ CLINICALTRIALS.GOV MATCHES FOUND:")
        for i, match in enumerate(clinicaltrials_matches[:5], 1):
            print(f"  {i}. {match['title']}")
            print(f"     URL: {match['link']}")
            print(f"     Query: {match['query']}")
            print(f"     Snippet: {match['snippet'][:200]}...")
            print()
    
    if h_pylori_acne_matches:
        print(f"\nü¶† H. PYLORI + ACNE MATCHES:")
        for i, match in enumerate(h_pylori_acne_matches[:3], 1):
            print(f"  {i}. {match['title']}")
            print(f"     Snippet: {match['snippet'][:150]}...")
            print()
    
    if enrollment_data:
        print(f"\nüìà ENROLLMENT DATA FOUND:")
        for i, data in enumerate(enrollment_data[:3], 1):
            print(f"  {i}. {data['title']}")
            print(f"     Enrollment numbers: {data['enrollment_numbers']}")
            print(f"     URL: {data['link']}")
            print()
    
    print(f"\nüìã SEARCH STATUS:")
    if clinicaltrials_matches and h_pylori_acne_matches:
        print("‚úÖ RELEVANT CLINICAL TRIALS IDENTIFIED")
        print("   - ClinicalTrials.gov results found")
        print("   - H. pylori + acne studies detected")
        print("   - Ready for detailed trial analysis")
    elif clinicaltrials_matches:
        print("‚ö†Ô∏è CLINICAL TRIALS FOUND but limited H. pylori + acne matches")
        print("   - ClinicalTrials.gov results available")
        print("   - May need more specific search terms")
    else:
        print("‚ùå LIMITED CLINICAL TRIALS RESULTS")
        print("   - No direct ClinicalTrials.gov matches")
        print("   - May need alternative search strategies")
    
    print(f"\nDetailed search data saved to: {results_file}")
    print("Ready for next phase: direct ClinicalTrials.gov database analysis if trials are confirmed.")
```