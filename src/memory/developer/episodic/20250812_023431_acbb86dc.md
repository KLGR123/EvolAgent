### Development Step 28: Identify Lyon‚Äôs French Department: Administrative Location for Leo Arnaud‚Äôs Birthplace (Rh√¥ne)

**Description**: Search for information about Leo Arnaud's birthplace in Lyon, France, to identify the specific French department where Lyon is located. Focus on finding geographical and administrative details about Lyon's location within France's departmental system. Search for keywords including 'Lyon France department administrative division', 'Lyon located which French department', 'Rh√¥ne department Lyon France', and 'Lyon geographical location French administrative regions'.

**Use Cases**:
- Genealogical and musicology research automation for verifying composer Leo Arnaud‚Äôs birthplace department and ensuring accurate archival records
- Geographic information system (GIS) enrichment by extracting Lyon‚Äôs Rh√¥ne department details for precision mapping and regional analysis
- Travel app content localization that dynamically identifies Lyon‚Äôs departmental jurisdiction to tailor recommendations and local advisories
- Automated fact-checking for digital encyclopedias, cross-referencing multi-engine search results to confirm Lyon‚Äôs administrative division
- Academic administrative geography study tool that aggregates French departmental data (e.g., Rh√¥ne) for university coursework and publications
- Cultural heritage archiving for museums, validating Lyon-born artist profiles with correct department and prefecture information
- Legal and compliance auditing for event planners, verifying departmental regulations and permit requirements within the Rh√¥ne department
- Tourism itinerary optimization software that sources department-level points of interest and administrative boundaries around Lyon for guided tours

```
from ddgs import DDGS
import json
import os
from datetime import datetime

# Create workspace directory if it doesn't exist
if not os.path.exists('workspace'):
    os.makedirs('workspace')
    print("üìÅ Created workspace directory")
else:
    print("üìÅ Workspace directory exists")

print("üîç SEARCHING FOR LEO ARNAUD'S BIRTHPLACE INFORMATION")
print("Research Objective: Find the specific French department where Lyon is located")
print("Focus: Lyon's administrative division within France's departmental system")
print("=" * 75)

# Define targeted search queries for Lyon's departmental location
search_queries = [
    'Lyon France department administrative division',
    'Lyon located which French department',
    'Rh√¥ne department Lyon France',
    'Lyon geographical location French administrative regions',
    'Lyon Rh√¥ne department France administrative',
    'what department is Lyon France in',
    'Lyon France administrative region department',
    'Lyon city Rh√¥ne department location France'
]

print(f"Starting research with {len(search_queries)} targeted queries...")
print("Strategy: Focus on administrative geography and departmental divisions")
print("=" * 75)

# Store all search results for analysis
all_results = []
successful_searches = 0
failed_searches = 0

# Initialize search engine
searcher = DDGS(timeout=10)

# Perform searches
for i, query in enumerate(search_queries, 1):
    print(f"\nSearch {i}/{len(search_queries)}: {query}")
    print("-" * 70)
    
    try:
        # Perform search using multiple backends
        results = searcher.text(
            query, 
            max_results=8, 
            page=1, 
            backend=["google", "duckduckgo", "yandex", "brave", "bing", "yahoo", "mojeek"], 
            safesearch="off", 
            region="en-us"
        )
        
        if results:
            print(f"‚úÖ Found {len(results)} results for search {i}")
            successful_searches += 1
            
            # Process and analyze results immediately
            for j, result in enumerate(results, 1):
                try:
                    title = result.get('title', 'No title')
                    link = result.get('href', result.get('link', 'No link'))
                    snippet = result.get('body', result.get('snippet', 'No snippet'))
                    
                    print(f"\nResult {j}:")
                    print(f"Title: {title}")
                    print(f"Link: {link}")
                    print(f"Snippet: {snippet[:250]}...")  # Show more snippet for administrative details
                    
                    # Analyze content for departmental location indicators
                    title_lower = title.lower() if title else ''
                    snippet_lower = snippet.lower() if snippet else ''
                    combined_content = f"{title_lower} {snippet_lower}"
                    
                    # Check for key location indicators
                    lyon_indicators = ['lyon', 'lyonnais']
                    department_indicators = ['department', 'd√©partement', 'rh√¥ne', 'rhone']
                    administrative_indicators = ['administrative', 'division', 'region', 'prefecture', 'capital']
                    france_indicators = ['france', 'french', 'auvergne-rh√¥ne-alpes', 'auvergne rhone alpes']
                    geographical_indicators = ['located', 'situated', 'geography', 'location', 'position']
                    
                    # Count matches for relevance scoring
                    lyon_matches = [ind for ind in lyon_indicators if ind in combined_content]
                    dept_matches = [ind for ind in department_indicators if ind in combined_content]
                    admin_matches = [ind for ind in administrative_indicators if ind in combined_content]
                    france_matches = [ind for ind in france_indicators if ind in combined_content]
                    geo_matches = [ind for ind in geographical_indicators if ind in combined_content]
                    
                    total_relevance = len(lyon_matches) + len(dept_matches) + len(admin_matches) + len(france_matches) + len(geo_matches)
                    
                    # Display relevance analysis
                    if lyon_matches:
                        print(f"üèôÔ∏è LYON MATCH: {lyon_matches}")
                    if dept_matches:
                        print(f"üèõÔ∏è DEPARTMENT MATCH: {dept_matches}")
                    if admin_matches:
                        print(f"üìã ADMINISTRATIVE MATCH: {admin_matches}")
                    if france_matches:
                        print(f"üá´üá∑ FRANCE MATCH: {france_matches}")
                    if geo_matches:
                        print(f"üìç GEOGRAPHICAL MATCH: {geo_matches}")
                    
                    if total_relevance >= 3:
                        print(f"‚≠ê HIGH RELEVANCE SCORE: {total_relevance}")
                    elif total_relevance >= 1:
                        print(f"‚úì Potentially relevant: {total_relevance}")
                    
                    # Look for specific departmental mentions in snippet
                    if 'rh√¥ne' in combined_content or 'rhone' in combined_content:
                        print(f"üéØ RH√îNE DEPARTMENT MENTIONED - Key administrative division found!")
                    if 'auvergne-rh√¥ne-alpes' in combined_content or 'auvergne rhone alpes' in combined_content:
                        print(f"üéØ AUVERGNE-RH√îNE-ALPES REGION DETECTED")
                    if 'prefecture' in combined_content:
                        print(f"üéØ PREFECTURE STATUS MENTIONED")
                    
                    # Store result with analysis
                    all_results.append({
                        'search_number': i,
                        'query_text': query,
                        'result_number': j,
                        'title': title,
                        'link': link,
                        'snippet': snippet,
                        'lyon_matches': lyon_matches,
                        'department_matches': dept_matches,
                        'administrative_matches': admin_matches,
                        'france_matches': france_matches,
                        'geographical_matches': geo_matches,
                        'total_relevance': total_relevance,
                        'analysis_timestamp': datetime.now().isoformat()
                    })
                    
                    print("-" * 40)
                    
                except Exception as result_error:
                    print(f"‚ùå Error processing result {j}: {str(result_error)}")
                    continue
        else:
            print(f"‚ùå No results found for search {i}: '{query}'")
            failed_searches += 1
            
    except Exception as e:
        print(f"‚ùå Error during search {i}: {str(e)}")
        failed_searches += 1
        continue
    
    print("\n" + "=" * 75)

# Save results with timestamp
timestamp = datetime.now().strftime("%Y%m%d_%H%M%S")
results_file = f"workspace/lyon_department_search_{timestamp}.json"

search_data = {
    'search_timestamp': datetime.now().isoformat(),
    'search_purpose': 'Research Lyon France departmental location for Leo Arnaud birthplace context',
    'search_strategy': 'Administrative geography focus on French departmental divisions',
    'total_queries': len(search_queries),
    'successful_searches': successful_searches,
    'failed_searches': failed_searches,
    'total_results': len(all_results),
    'queries_executed': search_queries,
    'results': all_results
}

with open(results_file, 'w', encoding='utf-8') as f:
    json.dump(search_data, f, indent=2, ensure_ascii=False)

print(f"\n\nüìä LYON DEPARTMENT SEARCH SUMMARY:")
print(f"Total queries executed: {len(search_queries)}")
print(f"Successful searches: {successful_searches}")
print(f"Failed searches: {failed_searches}")
print(f"Total results collected: {len(all_results)}")
print(f"Results saved to: {results_file}")

# Immediate analysis of collected results
print("\n\nüîç IMMEDIATE ANALYSIS OF SEARCH RESULTS:")
print("=" * 50)

# Categorize results by relevance and content
high_relevance = [r for r in all_results if r['total_relevance'] >= 3]
department_mentions = [r for r in all_results if r['department_matches']]
admin_mentions = [r for r in all_results if r['administrative_matches']]
rhone_mentions = [r for r in all_results if 'rh√¥ne' in r['snippet'].lower() or 'rhone' in r['snippet'].lower()]

print(f"\nüìã CATEGORIZED RESULTS:")
print(f"High relevance results (3+ matches): {len(high_relevance)}")
print(f"Results with department references: {len(department_mentions)}")
print(f"Results with administrative references: {len(admin_mentions)}")
print(f"Results mentioning Rh√¥ne: {len(rhone_mentions)}")

# Display most promising findings
if high_relevance:
    print("\n\nüéØ HIGH RELEVANCE FINDINGS:")
    print("=" * 35)
    for i, result in enumerate(high_relevance[:5], 1):  # Top 5
        print(f"\n{i}. {result['title']}")
        print(f"   Query: {result['query_text']}")
        print(f"   Link: {result['link']}")
        print(f"   Snippet: {result['snippet'][:200]}...")
        print(f"   Relevance Score: {result['total_relevance']}")
        print(f"   Department matches: {result['department_matches']}")
        print(f"   Administrative matches: {result['administrative_matches']}")
        print("-" * 50)

if rhone_mentions:
    print("\n\nüèõÔ∏è RH√îNE DEPARTMENT MENTIONS:")
    print("=" * 35)
    for i, result in enumerate(rhone_mentions[:3], 1):  # Top 3
        print(f"\n{i}. {result['title']}")
        print(f"   Link: {result['link']}")
        print(f"   Snippet: {result['snippet'][:250]}...")
        print("-" * 40)

if department_mentions:
    print("\n\nüìã DEPARTMENTAL REFERENCES:")
    print("=" * 30)
    for i, result in enumerate(department_mentions[:3], 1):  # Top 3
        print(f"\n{i}. {result['title']}")
        print(f"   Department indicators: {result['department_matches']}")
        print(f"   Link: {result['link']}")
        print(f"   Snippet: {result['snippet'][:200]}...")
        print("-" * 35)

print(f"\nüéØ RESEARCH PROGRESS:")
print(f"‚úÖ Administrative geography queries executed")
print(f"‚úÖ Departmental location indicators analyzed")
print(f"‚úÖ Rh√¥ne department references identified")
print(f"‚úÖ French administrative divisions categorized")

print(f"\nüìä PRELIMINARY FINDINGS:")
if rhone_mentions:
    print(f"üèõÔ∏è Rh√¥ne appears in {len(rhone_mentions)} results - likely departmental location")
if department_mentions:
    print(f"üìã Department references found in {len(department_mentions)} results")
if high_relevance:
    print(f"üéØ {len(high_relevance)} high-quality administrative sources identified")

print(f"\n‚úÖ LYON DEPARTMENT SEARCH PHASE COMPLETED!")
print(f"Ready for detailed analysis of {len(all_results)} collected results.")
print(f"Next step: Extract specific departmental details from high-relevance sources.")
```