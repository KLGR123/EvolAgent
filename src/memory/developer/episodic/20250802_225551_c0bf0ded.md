### Development Step 11: Find oldest closed numpy.polynomial Regression issue and record creation, closure, and label-add timestamps

**Description**: Search GitHub for numpy.polynomial issues to identify all closed issues that have the 'Regression' label. Focus on finding the oldest closed issue with this label and determine when the 'Regression' label was added to that specific issue. Use GitHub's issue search functionality with filters for repository 'numpy/numpy', path 'polynomial', status 'closed', and label 'Regression'. Extract the issue creation date, closure date, and label addition timestamp for the oldest matching issue.

**Use Cases**:
- Scientific computing library maintainers auditing the time between issue creation and “06 - Regression” label on numpy.polynomial bugs to streamline triage processes and reduce detection delays
- Data science platform QA teams automating retrieval of closed regression-labeled issues in the polynomial module to generate weekly quality metrics dashboards for leadership
- DevOps engineers integrating GitHub issue timeline data into CI/CD pipelines to trigger automated rollbacks when a regression label is added to critical polynomial computations in production
- Open source project managers correlating closure times of regression issues in numpy.polynomial with release milestones to report SLA adherence and plan resource allocation
- Academic software engineering researchers mining regression label addition timestamps across multiple repositories (including numpy/numpy) for empirical studies on bug lifecycle and developer responsiveness
- Financial modeling application teams tracking regression bugs in polynomial-fitting algorithms to prioritize urgent hotfix releases ahead of quarter-end reporting deadlines
- Scientific instrument control system developers monitoring regression events in calibration code under numpy.polynomial to schedule preventive maintenance and avoid measurement drift
- Technical evangelists compiling case studies of efficient regression-label workflows from numpy/numpy to share best practices at developer conferences and workshops

```
import requests
import json
from datetime import datetime
import os

print("=== CORRECTING APPROACH: ANALYZING ISSUE WITH ACTUAL REGRESSION LABEL ===")
print("Objective: Get timeline for Issue #10881 which has the actual 'Regression' label")
print("Focus: Determine when '06 - Regression' label was added to complete PLAN objective\n")

# Find workspace directory
workspace_dirs = [d for d in os.listdir('.') if d.startswith('workspace')]
workspace_dir = workspace_dirs[0] if workspace_dirs else 'workspace'
os.makedirs(workspace_dir, exist_ok=True)

# Load previous analysis to confirm the issue with regression label
analysis_files = [f for f in os.listdir(workspace_dir) if 'numpy_polynomial_regression' in f and f.endswith('.json')]
if analysis_files:
    with open(os.path.join(workspace_dir, analysis_files[0]), 'r') as f:
        previous_analysis = json.load(f)
    
    print("=== REVIEWING PREVIOUS ANALYSIS ===\n")
    if 'regression_labeled_issues' in previous_analysis:
        regression_issues = previous_analysis['regression_labeled_issues']
        print(f"Issues with explicit 'Regression' labels: {len(regression_issues)}")
        
        for item in regression_issues:
            issue = item['issue']
            print(f"Issue #{issue['number']}: {issue['title'][:60]}...")
            print(f"  Labels: {item['regression_labels']}")
            print(f"  Created: {issue['created_at']}")
            print(f"  Closed: {issue['closed_at']}")
            print(f"  API URL: {issue['api_url']}")
            print()

# GitHub API configuration
base_url = "https://api.github.com"
repo = "numpy/numpy"
issue_number = 10881  # The issue that actually has a 'Regression' label

headers = {
    'Accept': 'application/vnd.github.v3+json',
    'User-Agent': 'Python-GitHub-Timeline-Search'
}

print(f"Using workspace directory: {workspace_dir}")
print(f"Repository: {repo}")
print(f"Target issue: #{issue_number} (the one with actual 'Regression' label)\n")

# Get basic issue information
print("=== GETTING ISSUE #10881 INFORMATION ===")
issue_url = f"{base_url}/repos/{repo}/issues/{issue_number}"
print(f"Issue URL: {issue_url}")

response = requests.get(issue_url, headers=headers)
print(f"Response status: {response.status_code}")

if response.status_code != 200:
    print(f"Error getting issue details: {response.text}")
    exit()

issue_data = response.json()
print(f"Issue #{issue_data['number']}: {issue_data['title']}")
print(f"Created: {issue_data['created_at']}")
print(f"Closed: {issue_data.get('closed_at', 'Still open')}")
print(f"State: {issue_data['state']}")
print(f"Current labels: {[label['name'] for label in issue_data['labels']]}")
print(f"Body preview: {(issue_data.get('body') or '')[:300]}...")
print()

# Get detailed timeline/events for this issue
print("=== GETTING DETAILED TIMELINE FOR ISSUE #10881 ===")
events_url = f"{base_url}/repos/{repo}/issues/{issue_number}/events"
print(f"Events URL: {events_url}")

events_response = requests.get(events_url, headers=headers)
print(f"Events response status: {events_response.status_code}")

if events_response.status_code != 200:
    print(f"Error getting events: {events_response.text}")
    exit()

events_data = events_response.json()
print(f"Total events found: {len(events_data)}\n")

# Analyze each event for label changes
print("=== ANALYZING ALL EVENTS FOR REGRESSION LABEL ADDITION ===")
label_events = []
regression_label_events = []
all_events_summary = []

for i, event in enumerate(events_data, 1):
    event_type = event.get('event', 'unknown')
    created_at = event.get('created_at', 'unknown')
    actor = event.get('actor', {}).get('login', 'unknown') if event.get('actor') else 'system'
    
    print(f"{i}. Event: {event_type}")
    print(f"   Date: {created_at}")
    print(f"   Actor: {actor}")
    
    event_summary = {
        'index': i,
        'event_type': event_type,
        'created_at': created_at,
        'actor': actor
    }
    
    # Check for label-related events
    if event_type in ['labeled', 'unlabeled']:
        label_name = event.get('label', {}).get('name', 'unknown') if event.get('label') else 'unknown'
        print(f"   Label: {label_name}")
        
        # Check if this is the regression label we're looking for
        is_regression_label = 'regression' in label_name.lower() or label_name == '06 - Regression'
        
        label_event = {
            'event_type': event_type,
            'label_name': label_name,
            'created_at': created_at,
            'actor': actor,
            'is_regression_label': is_regression_label
        }
        label_events.append(label_event)
        event_summary['label_name'] = label_name
        event_summary['is_regression_label'] = is_regression_label
        
        if is_regression_label:
            print(f"   *** REGRESSION LABEL EVENT: {event_type.upper()} '{label_name}' ***")
            regression_label_events.append(label_event)
    
    # Check for other relevant events
    elif event_type == 'closed':
        print(f"   Issue closed")
    elif event_type == 'reopened':
        print(f"   Issue reopened")
    elif event_type == 'assigned':
        assignee = event.get('assignee', {}).get('login', 'unknown') if event.get('assignee') else 'unknown'
        print(f"   Assigned to: {assignee}")
        event_summary['assignee'] = assignee
    elif event_type == 'referenced':
        print(f"   Referenced in commit or other issue")
    elif event_type == 'mentioned':
        print(f"   User mentioned")
    
    all_events_summary.append(event_summary)
    print()

print(f"=== REGRESSION LABEL ANALYSIS RESULTS ===")
print(f"Total events: {len(events_data)}")
print(f"Label-related events: {len(label_events)}")
print(f"Regression label events: {len(regression_label_events)}\n")

if regression_label_events:
    print("=== REGRESSION LABEL TIMELINE ===")
    for i, event in enumerate(regression_label_events, 1):
        print(f"{i}. {event['event_type'].upper()}: '{event['label_name']}'")
        print(f"   Date: {event['created_at']}")
        print(f"   Actor: {event['actor']}")
        print()
    
    # Find when regression label was added
    added_events = [e for e in regression_label_events if e['event_type'] == 'labeled']
    if added_events:
        # Get the first (oldest) addition of regression label
        oldest_addition = min(added_events, key=lambda x: x['created_at'])
        print(f"=== REGRESSION LABEL ADDITION DETAILS ===")
        print(f"Label: {oldest_addition['label_name']}")
        print(f"Added on: {oldest_addition['created_at']}")
        print(f"Added by: {oldest_addition['actor']}")
        print(f"Issue creation date: {issue_data['created_at']}")
        print(f"Issue closure date: {issue_data.get('closed_at')}")
        
        # Calculate time difference
        from datetime import datetime
        created_time = datetime.fromisoformat(issue_data['created_at'].replace('Z', '+00:00'))
        labeled_time = datetime.fromisoformat(oldest_addition['created_at'].replace('Z', '+00:00'))
        time_diff = labeled_time - created_time
        
        print(f"Time between creation and regression label: {time_diff}")
else:
    print("=== NO REGRESSION LABEL EVENTS FOUND ===")
    print("Unexpected: Issue #10881 should have regression label events.")

# Save comprehensive analysis
final_analysis = {
    'analysis_timestamp': datetime.now().isoformat(),
    'repository': repo,
    'target_issue_number': issue_number,
    'issue_details': {
        'title': issue_data['title'],
        'created_at': issue_data['created_at'],
        'closed_at': issue_data.get('closed_at'),
        'state': issue_data['state'],
        'current_labels': [label['name'] for label in issue_data['labels']],
        'html_url': issue_data['html_url']
    },
    'timeline_analysis': {
        'total_events': len(events_data),
        'total_label_events': len(label_events),
        'regression_label_events': regression_label_events,
        'all_events_summary': all_events_summary
    },
    'plan_completion': {
        'objective': 'Find oldest closed issue with Regression label and determine when label was added',
        'result': 'Issue #10881 is the only closed issue with explicit Regression label',
        'regression_label_found': len(regression_label_events) > 0,
        'label_addition_timestamp': regression_label_events[0]['created_at'] if regression_label_events and regression_label_events[0]['event_type'] == 'labeled' else None
    }
}

with open(f'{workspace_dir}/numpy_regression_label_timeline_final.json', 'w') as f:
    json.dump(final_analysis, f, indent=2)

print(f"\nFinal analysis saved to: {workspace_dir}/numpy_regression_label_timeline_final.json")

print("\n=== PLAN COMPLETION SUMMARY ===")
print(f"Repository: {repo}")
print(f"Search criteria: Closed issues with 'Regression' label in polynomial context")
print(f"Result: Issue #{issue_number} is the only closed issue with explicit 'Regression' label")
print(f"Issue title: {issue_data['title']}")
print(f"Created: {issue_data['created_at']}")
print(f"Closed: {issue_data.get('closed_at')}")
print(f"Current labels: {[label['name'] for label in issue_data['labels']]}")

if regression_label_events:
    added_events = [e for e in regression_label_events if e['event_type'] == 'labeled']
    if added_events:
        oldest_addition = min(added_events, key=lambda x: x['created_at'])
        print(f"\n✅ REGRESSION LABEL ADDITION FOUND:")
        print(f"   Label: {oldest_addition['label_name']}")
        print(f"   Added on: {oldest_addition['created_at']}")
        print(f"   Added by: {oldest_addition['actor']}")
else:
    print("\n❌ No regression label events found in timeline")
```