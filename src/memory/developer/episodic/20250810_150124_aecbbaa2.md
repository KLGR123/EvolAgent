### Development Step 32: Identify Australian Captain in Arthur Morris‚Äôs Pre-1973/74 Triple-Century Test Innings

**Description**: Re-examine the original TASK requirements more carefully. The TASK mentions 'Arthur Morris scored over 300 runs in an innings' but the HISTORY shows we identified Greg Chappell instead. Search specifically for Test matches where Arthur Morris actually scored over 300 runs in an innings before the 1973-74 season, and identify who was the Australian captain in that specific match. Focus on Arthur Morris's career highlights, his highest Test scores, and any 300+ run innings he achieved.

**Use Cases**:
- Automated fact-checking for sports journalism, using targeted web queries to verify player records (e.g., confirming Don Bradman‚Äôs 334 vs England in 1930) and identify match captains before publication
- Academic history research support, gathering primary-source snippets on early 20th-century cricket tours (such as Captain Bill Woodfull‚Äôs leadership) for scholarly papers
- Patent prior-art discovery in IP law, iteratively searching specialized databases and news archives to uncover similar inventions and inventor attributions
- Regulatory compliance monitoring, automating searches across government and industry websites to extract the latest finance and legal rule changes with high precision
- Competitive intelligence for product managers, scanning manufacturer press releases and review sites to compile launch dates, feature lists, and leadership announcements
- Travel itinerary optimization, dynamically querying tourism boards and ticket portals to retrieve updated attraction opening hours, pricing, and visitor guidelines
- Crisis response briefing for emergency services, aggregating real-time news articles and official advisories (e.g., hurricane updates) through focused search queries and prioritizing critical snippets

```
import os
import requests
import json
from datetime import datetime
import time

# Based on the HISTORY analysis, we have definitively established:
# 1. Arthur Morris premise was INCORRECT (his highest Test score was 206)
# 2. Don Bradman scored 334 runs in Test cricket (the actual 300+ scorer)
# 3. Match was Australia vs England at Leeds in 1930
# 4. Captain identification is unclear - need targeted search

print("TASK CORRECTION COMPLETE: Don Bradman Identified as 300+ Scorer")
print("=" * 65)
print("‚úÖ CORRECTED FACTS:")
print("- Arthur Morris highest Test score: 206 (NOT 300+)")
print("- Don Bradman scored 334 runs in Test cricket")
print("- Match: Australia vs England, Leeds 1930")
print("\n‚ùì REMAINING QUESTION: Who was the Australian captain in Bradman's 334-run match?")
print("=" * 65)

# Get SerpAPI key from environment variables
api_key = os.getenv("SERPAPI_API_KEY")

if api_key is None:
    print("Error: Missing API key. Make sure you have SERPAPI_API_KEY in your environment variables.")
else:
    print("API key found, proceeding with targeted search for Australian captain in Bradman's 334 match...")
    print("Target: Identify Australian captain when Bradman scored 334 vs England at Leeds 1930")
    print("=" * 80)

    # Define focused search queries for Australian captain in Bradman's 334 match
    search_queries = [
        'Don Bradman 334 runs Leeds 1930 Australian captain Test match',
        'Australia captain 1930 Ashes series Bradman 334 Leeds Headingley',
        'Australian cricket captain 1930 England tour Bradman triple century',
        'Bill Woodfull Australia captain 1930 Bradman 334 Leeds Test',
        'Australia vs England 1930 Leeds Test captain Bradman 334 runs',
        '1930 Ashes series Australian captain Bradman highest score 334'
    ]

    print(f"Starting targeted search with {len(search_queries)} specific queries...")
    print("Focus: Australian captain in Bradman's 334-run match (Leeds 1930)")
    print("=" * 80)

    # Store all search results for analysis
    all_results = []
    successful_searches = 0
    failed_searches = 0

    # Perform searches with targeted queries
    for i, query in enumerate(search_queries, 1):
        print(f"\nSearch {i}/{len(search_queries)}: {query}")
        print("-" * 70)
        
        # Prepare API request parameters
        params = {
            "q": query,
            "api_key": api_key,
            "engine": "google",
            "google_domain": "google.com",
            "safe": "off",
            "num": 8,  # Get 8 results per query
            "type": "search"
        }
        
        try:
            # Make API request to SerpAPI with timeout
            print(f"Making API request for query {i}...")
            response = requests.get("https://serpapi.com/search.json", params=params, timeout=20)
            
            if response.status_code == 200:
                results = response.json()
                
                if results.get("organic_results"):
                    print(f"‚úÖ Found {len(results['organic_results'])} results for search {i}")
                    successful_searches += 1
                    
                    # Process and display key results
                    for j, result in enumerate(results["organic_results"], 1):
                        title = result.get('title', 'No title')
                        link = result.get('link', 'No link')
                        snippet = result.get('snippet', 'No snippet')
                        
                        print(f"\nResult {j}:")
                        print(f"Title: {title}")
                        print(f"Link: {link}")
                        print(f"Snippet: {snippet}")
                        
                        # Store result with search context
                        all_results.append({
                            'search_number': i,
                            'query_text': query,
                            'result_number': j,
                            'title': title,
                            'link': link,
                            'snippet': snippet
                        })
                        
                        # Highlight potentially relevant results
                        combined_text = f"{title.lower()} {snippet.lower()}"
                        
                        # Look for captain indicators and key details
                        captain_indicators = ['captain', 'skipper', 'led by', 'woodfull', 'bill woodfull']
                        bradman_indicators = ['bradman', '334', '309', 'triple century']
                        match_indicators = ['1930', 'leeds', 'headingley', 'england', 'ashes']
                        
                        matching_captain = [term for term in captain_indicators if term in combined_text]
                        matching_bradman = [term for term in bradman_indicators if term in combined_text]
                        matching_match = [term for term in match_indicators if term in combined_text]
                        
                        if matching_captain and matching_bradman and matching_match:
                            print(f"üéØ HIGHLY RELEVANT - Captain: {', '.join(matching_captain)}, Bradman: {', '.join(matching_bradman)}, Match: {', '.join(matching_match)}")
                            
                            # Check for specific captain names
                            if 'woodfull' in combined_text or 'bill woodfull' in combined_text:
                                print(f"üë§ BILL WOODFULL MENTION - Likely Australian captain in 1930")
                            if 'bradman' in combined_text and 'captain' in combined_text:
                                print(f"‚ö° BRADMAN + CAPTAIN - Check if Bradman was captain or under captain")
                            if '334' in combined_text:
                                print(f"üèè 334 SCORE CONFIRMED - This is the target match")
                                
                        elif matching_captain and matching_match:
                            print(f"‚≠ê POTENTIALLY RELEVANT - Captain: {', '.join(matching_captain)}, Match: {', '.join(matching_match)}")
                        
                        print("-" * 40)
                else:
                    print(f"‚ö†Ô∏è No organic results found for search {i}: '{query}'")
                    all_results.append({
                        'search_number': i,
                        'query_text': query,
                        'result_number': 0,
                        'title': 'No results',
                        'link': 'N/A',
                        'snippet': 'No results found for this query'
                    })
                    
            else:
                print(f"‚ùå Error: API request failed with status {response.status_code}: {response.text}")
                failed_searches += 1
                
        except requests.exceptions.Timeout:
            print(f"‚è∞ Timeout error during search {i} - continuing with next query")
            failed_searches += 1
        except Exception as e:
            print(f"‚ùå Error during search {i}: {str(e)}")
            failed_searches += 1
            
        # Add delay between requests to avoid rate limiting
        if i < len(search_queries):
            print(f"\n‚è≥ Waiting 2 seconds before next search...")
            time.sleep(2)
        
        print("\n" + "=" * 80)

    # Save comprehensive search results to workspace
    timestamp = datetime.now().strftime("%Y%m%d_%H%M%S")
    results_file = f"workspace/bradman_334_captain_search_results_{timestamp}.json"

    with open(results_file, 'w', encoding='utf-8') as f:
        json.dump({
            'search_timestamp': datetime.now().isoformat(),
            'search_focus': 'Australian captain when Don Bradman scored 334 runs vs England at Leeds 1930',
            'context': 'Correcting Arthur Morris premise - Bradman is the actual 300+ scorer',
            'bradman_match_details': 'Don Bradman 334 runs, Australia vs England, Leeds 1930',
            'total_queries': len(search_queries),
            'successful_searches': successful_searches,
            'failed_searches': failed_searches,
            'total_results': len(all_results),
            'queries_executed': search_queries,
            'all_search_results': all_results
        }, f, indent=2, ensure_ascii=False)

    print(f"\n\nüìä COMPREHENSIVE SEARCH SUMMARY:")
    print(f"Total targeted queries executed: {len(search_queries)}")
    print(f"Successful searches: {successful_searches}")
    print(f"Failed searches: {failed_searches}")
    print(f"Total results collected: {len(all_results)}")
    print(f"Search results saved to: {results_file}")

    # Analyze results for captain identification
    print("\n\nüîç ANALYZING RESULTS FOR AUSTRALIAN CAPTAIN IDENTIFICATION:")
    print("=" * 70)

    # Look for results specifically mentioning captains and Bradman's 334
    woodfull_results = []
    captain_334_results = []
    ashes_1930_results = []
    bradman_captain_results = []

    for result in all_results:
        if result['title'] == 'No results':
            continue
            
        title_lower = result['title'].lower()
        snippet_lower = result['snippet'].lower()
        combined = f"{title_lower} {snippet_lower}"
        
        # Categorize results by relevance
        if 'woodfull' in combined or 'bill woodfull' in combined:
            woodfull_results.append(result)
            
        if 'captain' in combined and ('334' in combined or 'bradman' in combined):
            captain_334_results.append(result)
            
        if '1930' in combined and ('ashes' in combined or 'england' in combined):
            ashes_1930_results.append(result)
            
        if 'bradman' in combined and 'captain' in combined:
            bradman_captain_results.append(result)

    print(f"\nüìã CATEGORIZED RESULTS:")
    print(f"Results mentioning Woodfull: {len(woodfull_results)}")
    print(f"Results mentioning Captain + 334/Bradman: {len(captain_334_results)}")
    print(f"Results mentioning 1930 Ashes/England: {len(ashes_1930_results)}")
    print(f"Results mentioning Bradman + Captain: {len(bradman_captain_results)}")

    # Display most promising results
    print("\n\nüéØ MOST PROMISING RESULTS FOR CAPTAIN IDENTIFICATION:")
    print("=" * 60)

    if woodfull_results:
        print("\nüåü WOODFULL-RELATED RESULTS:")
        for i, result in enumerate(woodfull_results[:3], 1):  # Show top 3
            print(f"\n{i}. {result['title']}")
            print(f"   Query: {result['query_text']}")
            print(f"   Link: {result['link']}")
            print(f"   Snippet: {result['snippet']}")
            print(f"   Search #{result['search_number']}, Result #{result['result_number']}")

    if captain_334_results:
        print("\n\n‚ö° CAPTAIN + 334/BRADMAN RESULTS:")
        for i, result in enumerate(captain_334_results[:3], 1):  # Show top 3
            print(f"\n{i}. {result['title']}")
            print(f"   Query: {result['query_text']}")
            print(f"   Link: {result['link']}")
            print(f"   Snippet: {result['snippet']}")
            print(f"   Search #{result['search_number']}, Result #{result['result_number']}")

    if ashes_1930_results:
        print("\n\nüèè 1930 ASHES/ENGLAND RESULTS:")
        for i, result in enumerate(ashes_1930_results[:4], 1):  # Show top 4
            print(f"\n{i}. {result['title']}")
            print(f"   Query: {result['query_text']}")
            print(f"   Link: {result['link']}")
            print(f"   Snippet: {result['snippet']}")

    # Look for specific captain identification
    print("\n\nüîç SCANNING FOR SPECIFIC CAPTAIN IDENTIFICATION:")
    print("=" * 50)
    
    potential_captains = []
    captain_patterns = ['bill woodfull', 'woodfull', 'w.m. woodfull', 'w woodfull']
    
    for result in all_results:
        if result['title'] == 'No results':
            continue
            
        combined_text = f"{result['title'].lower()} {result['snippet'].lower()}"
        for captain_name in captain_patterns:
            if captain_name in combined_text and ('captain' in combined_text or '1930' in combined_text or 'bradman' in combined_text):
                potential_captains.append({
                    'captain_name': captain_name,
                    'result': result
                })
                print(f"\nüéØ FOUND POTENTIAL CAPTAIN: {captain_name}")
                print(f"   Title: {result['title']}")
                print(f"   Snippet: {result['snippet'][:150]}...")
                break
    
    # Create analysis summary
    analysis_file = 'workspace/bradman_334_captain_analysis_summary.txt'
    with open(analysis_file, 'w', encoding='utf-8') as f:
        f.write("AUSTRALIAN CAPTAIN IN BRADMAN'S 334-RUN MATCH - ANALYSIS\n")
        f.write("=" * 55 + "\n\n")
        f.write(f"Analysis Date: {datetime.now().strftime('%Y-%m-%d %H:%M:%S')}\n")
        f.write(f"Context: Don Bradman scored 334 runs vs England at Leeds in 1930\n")
        f.write(f"Question: Who was the Australian captain in that match?\n")
        f.write(f"Total Search Queries: {len(search_queries)}\n")
        f.write(f"Successful Searches: {successful_searches}\n")
        f.write(f"Failed Searches: {failed_searches}\n")
        f.write(f"Total Search Results: {len(all_results)}\n")
        f.write(f"Woodfull Results: {len(woodfull_results)}\n")
        f.write(f"Captain + 334 Results: {len(captain_334_results)}\n")
        f.write(f"1930 Ashes Results: {len(ashes_1930_results)}\n\n")
        
        f.write("SEARCH OBJECTIVES STATUS:\n")
        f.write("-" * 25 + "\n")
        f.write(f"1. Captain Identification: {len(woodfull_results + captain_334_results)} relevant results\n")
        f.write(f"2. Match Context Verification: {len(ashes_1930_results)} relevant results\n")
        f.write(f"3. Bradman + Captain Connection: {len(bradman_captain_results)} relevant results\n")
        f.write(f"4. Potential Captains Found: {len(potential_captains)} candidates\n\n")
        
        if potential_captains:
            f.write("POTENTIAL CAPTAINS DETECTED:\n")
            f.write("-" * 30 + "\n")
            for captain_entry in potential_captains[:5]:
                f.write(f"Captain: {captain_entry['captain_name']}\n")
                f.write(f"Context: {captain_entry['result']['title']}\n")
                f.write(f"Link: {captain_entry['result']['link']}\n\n")
        
        if woodfull_results:
            f.write("TOP WOODFULL FINDINGS:\n")
            f.write("-" * 20 + "\n")
            for i, result in enumerate(woodfull_results[:3], 1):
                f.write(f"{i}. {result['title']}\n")
                f.write(f"   Query: {result['query_text']}\n")
                f.write(f"   Link: {result['link']}\n\n")

    print(f"\n\nüìÅ Search phase complete. Results and analysis saved.")
    print(f"Detailed results saved to: {results_file}")
    print(f"Analysis summary saved to: {analysis_file}")
    
    # Provide preliminary assessment
    print(f"\n\nüéØ PRELIMINARY ASSESSMENT:")
    print(f"=" * 30)
    if successful_searches > 0:
        print(f"‚úÖ Successfully completed {successful_searches} out of {len(search_queries)} searches")
        print(f"üìä Collected {len(all_results)} total search results")
        
        if woodfull_results:
            print(f"üåü Found {len(woodfull_results)} results mentioning Bill Woodfull")
            print(f"üéØ Woodfull is likely the Australian captain in 1930")
        
        if captain_334_results:
            print(f"‚ö° Found {len(captain_334_results)} results connecting captain with Bradman's 334")
            
        if ashes_1930_results:
            print(f"üèè Found {len(ashes_1930_results)} results about 1930 Ashes series")
            
        print(f"\nüìã Next step: Analyze detailed results to confirm the Australian captain")
    else:
        print(f"‚ùå No successful searches completed - may need to retry with different approach")
    
    print(f"\nüèÅ Captain identification search complete!")
    print(f"Ready to analyze results and provide final answer.")
```