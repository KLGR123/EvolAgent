### Development Step 20: Locate John Parish Robertson‚Äôs Birthplace Using Biographical and Historical Records

**Description**: Search for biographical information about John Parish Robertson to identify his birthplace. Focus on finding details about where he was born, including the specific city, town, or region. Use search terms including 'John Parish Robertson birthplace born where', 'John Parish Robertson biography birth location', 'Robertson brothers Paraguay birthplace', and 'William John Parish Robertson birth origin'. Also search for any biographical entries, encyclopedia articles, or historical records that document his early life and place of birth.

**Use Cases**:
- Genealogical research automation for ancestry platforms to extract and verify ancestors‚Äô birthplaces from online archival sources
- Historical biography compilation for academic publishers, programmatically gathering and consolidating birthplace data of 19th-century figures
- Library metadata enhancement for digital archives, automatically populating author and subject birthplace fields in catalog records
- Journalism fact-checking workflows to confirm public figures‚Äô birth locations by scraping and analyzing multiple web sources
- Museum exhibition curation, sourcing and validating artists‚Äô and historical personalities‚Äô birthplaces for exhibit panels and catalogs
- Biographical database maintenance in cultural heritage institutions, scheduling periodic searches to update and correct birthplace entries
- Legal due-diligence support in probate research, systematically verifying birthplace claims in estate and trust documents for compliance purposes

```
import os
import json
from datetime import datetime

print('=== ANALYZING JOHN PARISH ROBERTSON BIRTHPLACE SEARCH RESULTS ===')
print('Fixing the search error and analyzing the collected biographical data...')
print()

# First, let's inspect the workspace to understand what files we have
workspace_dir = 'workspace'
print(f'üìÅ Inspecting workspace directory: {workspace_dir}')

if os.path.exists(workspace_dir):
    files = os.listdir(workspace_dir)
    print(f'üìÑ Found {len(files)} files in workspace:')
    for file in files:
        file_path = os.path.join(workspace_dir, file)
        file_size = os.path.getsize(file_path)
        print(f'  - {file} ({file_size} bytes)')
else:
    print('‚ùå Workspace directory not found')
    os.makedirs(workspace_dir)
    print(f'üìÅ Created workspace directory: {workspace_dir}')

# Look for John Parish Robertson related files
jpr_files = [f for f in os.listdir(workspace_dir) if 'john_parish_robertson' in f.lower()]
print(f'\nüîç John Parish Robertson related files: {len(jpr_files)}')
for file in jpr_files:
    print(f'  - {file}')

# If we have existing search results, let's inspect their structure first
if jpr_files:
    latest_file = max(jpr_files)  # Get the most recent file
    file_path = os.path.join(workspace_dir, latest_file)
    
    print(f'\nüìã INSPECTING FILE STRUCTURE: {latest_file}')
    print('=' * 60)
    
    try:
        with open(file_path, 'r', encoding='utf-8') as f:
            data = json.load(f)
        
        print(f'üìä File type: JSON')
        if isinstance(data, dict):
            print(f'üìä Top-level keys: {list(data.keys())}')
            
            # Inspect each key
            for key in data.keys():
                value = data[key]
                print(f'\nüîë Key "{key}": {type(value)}')
                if isinstance(value, dict):
                    print(f'   Sub-keys: {list(value.keys())}')
                elif isinstance(value, list):
                    print(f'   List length: {len(value)}')
                    if len(value) > 0:
                        print(f'   First item type: {type(value[0])}')
                        if isinstance(value[0], dict):
                            print(f'   First item keys: {list(value[0].keys())}')
                elif isinstance(value, str):
                    print(f'   String preview: {value[:100]}...' if len(value) > 100 else f'   String: {value}')
                else:
                    print(f'   Value: {value}')
    
    except Exception as e:
        print(f'‚ùå Error reading file: {str(e)}')
        print('File may be corrupted or incomplete')
else:
    print('\n‚ö†Ô∏è No existing John Parish Robertson files found')
    print('Will need to perform fresh search with fixed code')

# Now let's perform a corrected search to gather birthplace information
print(f'\nüîç PERFORMING CORRECTED BIOGRAPHICAL SEARCH')
print('=' * 50)

# Import search functionality
from ddgs import DDGS

# Define targeted search queries based on the HISTORY feedback
# The tester found that Wikipedia already shows "Robertson was born at Kelso or Edinburgh"
search_queries = [
    'John Parish Robertson Wikipedia birthplace Kelso Edinburgh',
    'John Parish Robertson Scottish merchant born Kelso',
    'John Parish Robertson born Edinburgh Scotland biography',
    'John Parish Robertson birthplace Scotland merchant author',
    '"John Parish Robertson" "born at Kelso" OR "born at Edinburgh"'
]

print(f'üéØ Executing {len(search_queries)} targeted search queries:')
for i, query in enumerate(search_queries, 1):
    print(f'  {i}. {query}')

print()

# Initialize search
searcher = DDGS(timeout=15)
backends = ["google", "duckduckgo", "bing"]
all_results = []

# Execute searches with corrected code
for i, query in enumerate(search_queries, 1):
    print(f'\nüîç SEARCH {i}/{len(search_queries)}: {query}')
    print('-' * 70)
    
    try:
        results = searcher.text(
            query, 
            max_results=6, 
            page=1, 
            backend=backends, 
            safesearch="off", 
            region="en-us"
        )
        
        if results and len(results) > 0:
            print(f'‚úÖ Found {len(results)} results')
            
            for j, result in enumerate(results, 1):
                title = result.get('title', 'No title')
                href = result.get('href', 'No link')
                body = result.get('body', 'No snippet')
                
                print(f'\nResult {j}:')
                print(f'Title: {title}')
                print(f'Link: {href}')
                print(f'Snippet: {body[:300]}...' if len(body) > 300 else f'Snippet: {body}')
                
                # CORRECTED: Define content_text variable before analysis
                content_text = f'{title.lower()} {body.lower()}'
                
                # Analyze content for birthplace indicators
                birthplace_keywords = ['born', 'birth', 'birthplace', 'native']
                location_keywords = ['kelso', 'edinburgh', 'scotland', 'scottish', 'glasgow']
                robertson_keywords = ['john parish robertson', 'parish robertson', 'robertson']
                
                birthplace_matches = [kw for kw in birthplace_keywords if kw in content_text]
                location_matches = [kw for kw in location_keywords if kw in content_text]
                robertson_matches = [kw for kw in robertson_keywords if kw in content_text]
                
                # Calculate relevance score
                relevance_score = len(birthplace_matches) + len(location_matches) + len(robertson_matches)
                
                if birthplace_matches:
                    print(f'üéÇ Birth keywords: {birthplace_matches}')
                if location_matches:
                    print(f'üè¥Û†ÅßÛ†Å¢Û†Å≥Û†Å£Û†Å¥Û†Åø Location keywords: {location_matches}')
                if robertson_matches:
                    print(f'üë§ Robertson references: {robertson_matches}')
                if relevance_score > 0:
                    print(f'üìä Relevance score: {relevance_score}')
                
                # Store result with analysis
                result_data = {
                    'query': query,
                    'query_number': i,
                    'result_number': j,
                    'title': title,
                    'link': href,
                    'snippet': body,
                    'birthplace_keywords': birthplace_matches,
                    'location_keywords': location_matches,
                    'robertson_keywords': robertson_matches,
                    'relevance_score': relevance_score
                }
                
                all_results.append(result_data)
                print('-' * 40)
        else:
            print(f'‚ùå No results found for query {i}')
    
    except Exception as e:
        print(f'‚ùå Error executing search {i}: {str(e)}')
        continue

print(f'\n\nüìä SEARCH RESULTS SUMMARY')
print('=' * 30)
print(f'Total queries executed: {len(search_queries)}')
print(f'Total results collected: {len(all_results)}')

# Analyze results for birthplace information
high_relevance_results = [r for r in all_results if r['relevance_score'] >= 3]
kelso_results = [r for r in all_results if 'kelso' in r['snippet'].lower() or 'kelso' in r['title'].lower()]
edinburgh_results = [r for r in all_results if 'edinburgh' in r['snippet'].lower() or 'edinburgh' in r['title'].lower()]
scotland_results = [r for r in all_results if 'scotland' in r['snippet'].lower() or 'scottish' in r['snippet'].lower()]

print(f'\nüéØ BIRTHPLACE ANALYSIS')
print('=' * 25)
print(f'High relevance results (3+ score): {len(high_relevance_results)}')
print(f'Results mentioning Kelso: {len(kelso_results)}')
print(f'Results mentioning Edinburgh: {len(edinburgh_results)}')
print(f'Results mentioning Scotland/Scottish: {len(scotland_results)}')

# Display most relevant birthplace information
print(f'\nüè† BIRTHPLACE EVIDENCE FROM SEARCH RESULTS')
print('=' * 50)

# Sort by relevance and display top results
all_results.sort(key=lambda x: x['relevance_score'], reverse=True)
top_results = all_results[:5]

for i, result in enumerate(top_results, 1):
    print(f'\n{i}. {result["title"]}')
    print(f'   üîó Source: {result["link"]}')
    print(f'   üìä Relevance Score: {result["relevance_score"]}')
    print(f'   üéÇ Birth keywords: {result["birthplace_keywords"]}')
    print(f'   üè¥Û†ÅßÛ†Å¢Û†Å≥Û†Å£Û†Å¥Û†Åø Location keywords: {result["location_keywords"]}')
    print(f'   üìù Snippet: {result["snippet"][:250]}...' if len(result["snippet"]) > 250 else f'   üìù Snippet: {result["snippet"]}')
    print('-' * 60)

# Extract specific birthplace information
birthplace_findings = []

for result in all_results:
    content = f'{result["title"]} {result["snippet"]}'
    
    # Look for specific birthplace mentions
    if 'kelso' in content.lower() and ('born' in content.lower() or 'birth' in content.lower()):
        birthplace_findings.append({
            'location': 'Kelso',
            'evidence': result['snippet'],
            'source': result['link'],
            'title': result['title']
        })
    
    if 'edinburgh' in content.lower() and ('born' in content.lower() or 'birth' in content.lower()):
        birthplace_findings.append({
            'location': 'Edinburgh',
            'evidence': result['snippet'],
            'source': result['link'],
            'title': result['title']
        })

print(f'\nüéØ BIRTHPLACE FINDINGS SUMMARY')
print('=' * 35)

if birthplace_findings:
    print(f'Found {len(birthplace_findings)} specific birthplace references:')
    
    for i, finding in enumerate(birthplace_findings, 1):
        print(f'\n{i}. Location: {finding["location"]}')
        print(f'   Source: {finding["title"]}')
        print(f'   Link: {finding["source"]}')
        print(f'   Evidence: {finding["evidence"][:200]}...' if len(finding["evidence"]) > 200 else f'   Evidence: {finding["evidence"]}')
    
    # Determine most likely birthplace
    kelso_count = len([f for f in birthplace_findings if f['location'] == 'Kelso'])
    edinburgh_count = len([f for f in birthplace_findings if f['location'] == 'Edinburgh'])
    
    print(f'\nüìä Birthplace Evidence Count:')
    print(f'  Kelso: {kelso_count} references')
    print(f'  Edinburgh: {edinburgh_count} references')
    
    if kelso_count > 0 or edinburgh_count > 0:
        print(f'\n‚úÖ BIRTHPLACE IDENTIFIED:')
        if kelso_count > 0 and edinburgh_count > 0:
            print(f'   John Parish Robertson was born at either Kelso or Edinburgh, Scotland')
        elif kelso_count > 0:
            print(f'   John Parish Robertson was born in Kelso, Scotland')
        elif edinburgh_count > 0:
            print(f'   John Parish Robertson was born in Edinburgh, Scotland')
else:
    print('‚ùå No specific birthplace references found in search results')
    print('Additional research may be needed')

# Save the corrected search results
timestamp = datetime.now().strftime('%Y%m%d_%H%M%S')
results_file = f'workspace/john_parish_robertson_birthplace_corrected_{timestamp}.json'

search_data = {
    'research_timestamp': datetime.now().isoformat(),
    'research_objective': 'Identify John Parish Robertson birthplace - corrected search',
    'search_queries_executed': search_queries,
    'search_summary': {
        'total_queries': len(search_queries),
        'total_results': len(all_results),
        'high_relevance_count': len(high_relevance_results),
        'kelso_mentions': len(kelso_results),
        'edinburgh_mentions': len(edinburgh_results),
        'scotland_mentions': len(scotland_results)
    },
    'birthplace_findings': birthplace_findings,
    'results': all_results
}

with open(results_file, 'w', encoding='utf-8') as f:
    json.dump(search_data, f, indent=2, ensure_ascii=False)

print(f'\nüìÑ CORRECTED SEARCH RESULTS SAVED')
print(f'File: {results_file}')
print(f'Total results: {len(all_results)}')
print(f'Birthplace findings: {len(birthplace_findings)}')

# Create a summary answer file
answer_file = f'workspace/john_parish_robertson_birthplace_answer_{timestamp}.txt'
with open(answer_file, 'w', encoding='utf-8') as f:
    f.write('JOHN PARISH ROBERTSON BIRTHPLACE RESEARCH - FINAL ANSWER\n')
    f.write('=' * 60 + '\n\n')
    f.write('QUESTION: Where was John Parish Robertson born?\n\n')
    
    if birthplace_findings:
        kelso_count = len([f for f in birthplace_findings if f['location'] == 'Kelso'])
        edinburgh_count = len([f for f in birthplace_findings if f['location'] == 'Edinburgh'])
        
        if kelso_count > 0 and edinburgh_count > 0:
            f.write('ANSWER: John Parish Robertson was born at either Kelso or Edinburgh, Scotland\n\n')
        elif kelso_count > 0:
            f.write('ANSWER: John Parish Robertson was born in Kelso, Scotland\n\n')
        elif edinburgh_count > 0:
            f.write('ANSWER: John Parish Robertson was born in Edinburgh, Scotland\n\n')
        
        f.write('EVIDENCE SUMMARY:\n')
        f.write(f'- Kelso references: {kelso_count}\n')
        f.write(f'- Edinburgh references: {edinburgh_count}\n')
        f.write(f'- Total search results analyzed: {len(all_results)}\n')
        f.write(f'- High relevance results: {len(high_relevance_results)}\n\n')
        
        f.write('KEY SOURCES:\n')
        for i, finding in enumerate(birthplace_findings, 1):
            f.write(f'{i}. {finding["title"]}\n')
            f.write(f'   Location: {finding["location"]}\n')
            f.write(f'   Source: {finding["source"]}\n\n')
    else:
        f.write('ANSWER: Birthplace not definitively identified from search results\n')
        f.write('Additional research required\n')

print(f'\nüìÑ ANSWER SUMMARY SAVED')
print(f'File: {answer_file}')

print(f'\n‚úÖ CORRECTED BIOGRAPHICAL SEARCH COMPLETED')
print('=' * 50)
print(f'üéØ RESEARCH FINDINGS:')
if birthplace_findings:
    kelso_count = len([f for f in birthplace_findings if f['location'] == 'Kelso'])
    edinburgh_count = len([f for f in birthplace_findings if f['location'] == 'Edinburgh'])
    
    print(f'‚úÖ Birthplace identified from search results:')
    if kelso_count > 0 and edinburgh_count > 0:
        print(f'   üìç John Parish Robertson was born at either Kelso or Edinburgh, Scotland')
        print(f'   üìä Evidence: {kelso_count} Kelso references, {edinburgh_count} Edinburgh references')
    elif kelso_count > 0:
        print(f'   üìç John Parish Robertson was born in Kelso, Scotland')
        print(f'   üìä Evidence: {kelso_count} Kelso references')
    elif edinburgh_count > 0:
        print(f'   üìç John Parish Robertson was born in Edinburgh, Scotland')
        print(f'   üìä Evidence: {edinburgh_count} Edinburgh references')
else:
    print(f'‚ö†Ô∏è Birthplace not clearly identified - additional research needed')

print(f'\nüìÅ Files created:')
print(f'  - {results_file} (detailed search data)')
print(f'  - {answer_file} (summary answer)')

print(f'\nüîç Search completed successfully with corrected code!')
```