### Development Step 60: Extract American Idol Season Winners into a JSON File

**Description**: Access the Wikipedia page https://en.wikipedia.org/wiki/American_Idol and extract the season-by-season winners table into workspace/american_idol_winners_list.json, capturing each season number and winner name.

**Use Cases**:
- Extracting American Idol season-by-season winners into a mobile trivia app database to power “Guess the Winner” quizzes
- Automating content updates for a fan blog’s CMS by syncing the winners list each time the page is refreshed
- Feeding a data warehouse for an entertainment analytics platform that tracks career milestones of reality-show champions
- Populating training data for a machine-learning model analyzing factors influencing singing competition outcomes
- Enriching a BI dashboard for a media agency showing historical winner demographics and season trends
- Supporting academic research on gender and diversity in televised competitions by providing a clean winners dataset
- Powering a chatbot for a fan community that instantly answers “Who won Season X?” queries using live JSON data
- Generating show-notes and social-media graphics for a podcast recap series, automatically inserting winner info per episode

```
import os
import requests
import json
from bs4 import BeautifulSoup

# Ensure workspace directory exists
workspace_dir = 'workspace'
os.makedirs(workspace_dir, exist_ok=True)

url = 'https://en.wikipedia.org/wiki/American_Idol'
print(f"Fetching page: {url}")
response = requests.get(url)
print(f"HTTP status code: {response.status_code}")
response.raise_for_status()

soup = BeautifulSoup(response.text, 'html.parser')

# Find all wikitable tables on the page
tables = soup.find_all('table', class_='wikitable')
print(f"Found {len(tables)} tables with class 'wikitable'.")

target_table = None
for idx, table in enumerate(tables, start=1):
    caption_tag = table.find('caption')
    caption = caption_tag.get_text(strip=True) if caption_tag else ''
    # Get header row cells
    header_row = table.find('tr')
    headers = [th.get_text(strip=True) for th in header_row.find_all('th')]
    print(f"Table {idx}: caption='{caption}' headers={headers}")
    
    # Criteria 1: exactly two headers 'Season' and 'Winner'
    hdrs_lower = [h.lower() for h in headers]
    if len(hdrs_lower) == 2 and hdrs_lower[0] == 'season' and hdrs_lower[1] == 'winner':
        print(f"--> Selecting table {idx} by two-column Season/Winner header match.")
        target_table = table
        break
    # Criteria 2: caption contains 'winner' and headers contain at least 'season' and 'winner'
    if 'winner' in caption.lower() and 'season' in hdrs_lower and any('winner' in h for h in hdrs_lower):
        print(f"--> Selecting table {idx} by caption containing 'winner'.")
        target_table = table
        break

if not target_table:
    raise RuntimeError('Could not find a simple Season–Winner table on the page.')

# Re-extract headers for clarity
headers = [th.get_text(strip=True) for th in target_table.find('tr').find_all('th')]
print(f"Using headers: {headers}")

# Determine indices (should be 0 and 1)
season_idx = headers.index('Season')
winner_idx = headers.index('Winner')
print(f"Season column index: {season_idx}, Winner column index: {winner_idx}")

# Parse rows using only <td> to keep alignment
winners = []
rows = target_table.find_all('tr')[1:]
print(f"Parsing {len(rows)} data rows.")
for i, row in enumerate(rows, start=1):
    cols = row.find_all('td')
    if len(cols) <= max(season_idx, winner_idx):
        print(f"  Skipping row {i}: not enough columns ({len(cols)})")
        continue
    season = cols[season_idx].get_text(strip=True)
    winner = cols[winner_idx].get_text(strip=True)
    print(f"  Row {i}: Season={season}, Winner={winner}")
    winners.append({'season': season, 'winner': winner})

print(f"Total winners extracted: {len(winners)}")

# Save JSON output
output_path = os.path.join(workspace_dir, 'american_idol_winners_list.json')
with open(output_path, 'w', encoding='utf-8') as f:
    json.dump(winners, f, indent=2, ensure_ascii=False)
print(f"Winners list saved to: {output_path}")

```