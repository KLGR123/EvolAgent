### Development Step 9: Extract and Transcribe "Isn't That Hot?" Dialogue and Teal’c’s Reply from YouTube Video

**Description**: Access and analyze the YouTube video at https://www.youtube.com/watch?v=1htKBjuUWec to locate the specific dialogue where someone asks 'Isn't that hot?' and identify Teal'c's exact response. Extract the audio/video content, transcribe the relevant dialogue section, and document Teal'c's reply to this question.

**Use Cases**:
- Legal video evidence processing to transcribe courtroom footage and extract witness statements containing specific phrases for case preparation
- Customer support call QA automation by transcribing recorded service calls to identify “I’m not satisfied” or similar complaint triggers for supervisor review
- Market research on product demo videos to locate and compile user feedback comments like “this feature is great” for prioritizing development roadmaps
- Social media moderation by analyzing livestreams to detect and flag policy-violating language in real time for compliance teams
- Educational lecture indexing to transcribe university seminars, tag question-and-answer segments, and enable students to search for “Can you explain...” queries
- Media production highlight creation by extracting memorable soundbites from celebrity interviews (“That was awesome!”) for promotional reels
- Accessibility caption generation for online courses by transcribing instructor dialogue and identifying speaker changes for precise subtitle synchronization
- Linguistic research on archival broadcasts to automatically transcribe and analyze usage patterns of phrases such as “Do you really think...” across decades

```
import os
import json
from pydub import AudioSegment
import speech_recognition as sr

print("=== FOCUSED TRANSCRIPTION ATTEMPT WITH EXISTING ENHANCED AUDIO ===")
print("Using the enhanced audio file that was created in the previous attempt...\n")

# Check what files we have in workspace
print("=== CHECKING WORKSPACE FILES ===")
workspace_files = []
for file in os.listdir("workspace"):
    full_path = os.path.join("workspace", file)
    if os.path.isfile(full_path):
        file_size = os.path.getsize(full_path)
        workspace_files.append((file, full_path, file_size))
        size_mb = file_size / (1024 * 1024)
        print(f"  - {file} ({size_mb:.2f} MB)")

# Look for enhanced audio file or create it if needed
enhanced_audio_file = None
video_file = None

for file_name, full_path, size in workspace_files:
    if 'enhanced' in file_name.lower() and file_name.endswith('.wav'):
        enhanced_audio_file = full_path
        print(f"*** Found enhanced audio file: {file_name} ***")
    elif file_name.endswith('.mp4'):
        video_file = full_path
        print(f"*** Found video file: {file_name} ***")
    elif 'tealc' in file_name.lower() and file_name.endswith('.wav'):
        # Use existing audio file if no enhanced version found
        if not enhanced_audio_file:
            enhanced_audio_file = full_path
            print(f"*** Using existing audio file: {file_name} ***")

if not enhanced_audio_file and video_file:
    print("\n=== CREATING ENHANCED AUDIO FILE ===")
    try:
        # Load video and create enhanced audio
        video = AudioSegment.from_file(video_file)
        duration_seconds = len(video) / 1000
        print(f"Video duration: {duration_seconds:.1f} seconds")
        
        # Apply enhancements
        from pydub.effects import normalize
        enhanced_audio = normalize(video)
        enhanced_audio = enhanced_audio + 10  # Boost volume by 10dB
        enhanced_audio = enhanced_audio.set_channels(1).set_frame_rate(16000)
        
        enhanced_audio_file = "workspace/tealc_enhanced_audio.wav"
        enhanced_audio.export(enhanced_audio_file, format="wav")
        print(f"Enhanced audio created: {enhanced_audio_file}")
        
    except Exception as e:
        print(f"Error creating enhanced audio: {e}")
        enhanced_audio_file = None

if not enhanced_audio_file:
    print("\n*** ERROR: No audio file available for transcription ***")
else:
    print(f"\n=== ATTEMPTING TRANSCRIPTION ===")
    print(f"Using audio file: {os.path.basename(enhanced_audio_file)}")
    
    # Get audio file info
    audio_size = os.path.getsize(enhanced_audio_file)
    print(f"Audio file size: {audio_size} bytes")
    
    try:
        # Load audio to check duration
        audio_segment = AudioSegment.from_wav(enhanced_audio_file)
        duration_ms = len(audio_segment)
        duration_seconds = duration_ms / 1000
        print(f"Audio duration: {duration_seconds:.1f} seconds")
        
        # Initialize speech recognizer with optimized settings
        recognizer = sr.Recognizer()
        recognizer.energy_threshold = 200  # Lower threshold for quiet speech
        recognizer.dynamic_energy_threshold = True
        recognizer.pause_threshold = 0.5  # Shorter pause detection
        
        print("Speech recognizer initialized with optimized settings")
        
        # Attempt transcription
        with sr.AudioFile(enhanced_audio_file) as source:
            print("Loading audio file for transcription...")
            
            # Adjust for ambient noise
            recognizer.adjust_for_ambient_noise(source, duration=0.8)
            print("Adjusted for ambient noise")
            
            # Record the audio data
            audio_data = recognizer.record(source)
            print("Audio data recorded successfully")
            
            # Try transcription with multiple approaches
            transcription_methods = [
                {'name': 'Standard English', 'lang': 'en-US', 'show_all': False},
                {'name': 'English with alternatives', 'lang': 'en-US', 'show_all': True},
                {'name': 'Generic English', 'lang': 'en', 'show_all': False}
            ]
            
            successful_transcription = None
            
            for method in transcription_methods:
                try:
                    print(f"\nTrying method: {method['name']}")
                    
                    if method['show_all']:
                        result = recognizer.recognize_google(audio_data, 
                                                            language=method['lang'], 
                                                            show_all=True)
                        if result and 'alternative' in result and result['alternative']:
                            best_alternative = result['alternative'][0]
                            transcription = best_alternative.get('transcript', '')
                            confidence = best_alternative.get('confidence', 0)
                            print(f"Transcription with confidence {confidence:.2f}: '{transcription}'")
                            if transcription.strip():
                                successful_transcription = transcription
                                break
                    else:
                        transcription = recognizer.recognize_google(audio_data, language=method['lang'])
                        print(f"Transcription result: '{transcription}'")
                        if transcription.strip():
                            successful_transcription = transcription
                            break
                            
                except sr.UnknownValueError:
                    print(f"Method '{method['name']}' could not understand the audio")
                    continue
                except sr.RequestError as e:
                    print(f"Method '{method['name']}' service error: {e}")
                    continue
                except Exception as e:
                    print(f"Method '{method['name']}' unexpected error: {e}")
                    continue
            
            if successful_transcription:
                print(f"\n*** TRANSCRIPTION SUCCESSFUL ***")
                print(f"Final transcription: '{successful_transcription}'")
                
                # Analyze the transcription for the specific dialogue
                print(f"\n=== ANALYZING TRANSCRIPTION FOR 'ISN'T THAT HOT?' DIALOGUE ===")
                
                transcription_lower = successful_transcription.lower()
                
                # Search for hot-related patterns
                hot_patterns = [
                    "isn't that hot",
                    "isnt that hot", 
                    "is that hot",
                    "isn't it hot",
                    "that hot",
                    "too hot",
                    "very hot",
                    "hot"
                ]
                
                found_hot_patterns = []
                hot_context = ""
                
                for pattern in hot_patterns:
                    if pattern in transcription_lower:
                        found_hot_patterns.append(pattern)
                        # Get context around the pattern
                        start_pos = transcription_lower.find(pattern)
                        context_start = max(0, start_pos - 30)
                        context_end = min(len(successful_transcription), start_pos + len(pattern) + 30)
                        hot_context = successful_transcription[context_start:context_end]
                        print(f"*** FOUND HOT PATTERN: '{pattern}' ***")
                        print(f"Context: '{hot_context}'")
                        break
                
                # Look for Teal'c's characteristic responses
                print(f"\n=== IDENTIFYING TEAL'C'S RESPONSE PATTERNS ===")
                
                tealc_patterns = [
                    "indeed",
                    "it is",
                    "extremely",
                    "most",
                    "negative",
                    "affirmative",
                    "i do not",
                    "yes",
                    "no"
                ]
                
                found_tealc_patterns = []
                for pattern in tealc_patterns:
                    if pattern in transcription_lower:
                        found_tealc_patterns.append(pattern)
                        print(f"Found Teal'c response pattern: '{pattern}'")
                
                # Create comprehensive analysis
                analysis_results = {
                    'video_source': 'YouTube video: https://www.youtube.com/watch?v=1htKBjuUWec',
                    'scene_description': "Teal'c trying coffee for the first time",
                    'duration_seconds': duration_seconds,
                    'transcription_successful': True,
                    'full_transcription': successful_transcription,
                    'hot_question_patterns_found': found_hot_patterns,
                    'hot_question_context': hot_context,
                    'tealc_response_patterns_found': found_tealc_patterns,
                    'objective_completed': len(found_hot_patterns) > 0
                }
                
                # Save detailed results
                with open('workspace/tealc_dialogue_complete_analysis.json', 'w', encoding='utf-8') as f:
                    json.dump(analysis_results, f, indent=2)
                
                # Create final answer file
                with open('workspace/tealc_final_response.txt', 'w', encoding='utf-8') as f:
                    f.write("TEAL'C'S RESPONSE TO 'ISN'T THAT HOT?'\n")
                    f.write("=" * 50 + "\n\n")
                    f.write(f"Source: YouTube video https://www.youtube.com/watch?v=1htKBjuUWec\n")
                    f.write(f"Scene: Teal'c trying coffee for the first time (Stargate SG-1)\n")
                    f.write(f"Duration: {duration_seconds:.1f} seconds\n\n")
                    f.write(f"COMPLETE DIALOGUE TRANSCRIPTION:\n")
                    f.write(f"'{successful_transcription}'\n\n")
                    
                    if found_hot_patterns:
                        f.write(f"HOT QUESTION FOUND: Yes\n")
                        f.write(f"Patterns detected: {', '.join(found_hot_patterns)}\n")
                        f.write(f"Context: '{hot_context}'\n\n")
                        
                        f.write(f"TEAL'C'S EXACT RESPONSE:\n")
                        f.write(f"Based on the transcription, when someone asks about the coffee being hot,\n")
                        f.write(f"Teal'c's response is contained within this dialogue:\n")
                        f.write(f"'{successful_transcription}'\n\n")
                        
                        if found_tealc_patterns:
                            f.write(f"Teal'c's characteristic response patterns identified: {', '.join(found_tealc_patterns)}\n")
                    else:
                        f.write(f"HOT QUESTION FOUND: No direct 'isn't that hot?' pattern detected\n")
                        f.write(f"However, the complete dialogue is: '{successful_transcription}'\n")
                        f.write(f"Teal'c's response patterns found: {', '.join(found_tealc_patterns)}\n")
                
                print(f"\n*** ANALYSIS COMPLETE ***")
                print(f"Complete transcription: '{successful_transcription}'")
                print(f"Hot question patterns found: {found_hot_patterns}")
                print(f"Teal'c response patterns found: {found_tealc_patterns}")
                print(f"\nResults saved to:")
                print(f"  - workspace/tealc_dialogue_complete_analysis.json")
                print(f"  - workspace/tealc_final_response.txt")
                
                if found_hot_patterns:
                    print(f"\n*** OBJECTIVE ACHIEVED ***")
                    print(f"Successfully identified dialogue containing 'hot' question and Teal'c's response!")
                else:
                    print(f"\n*** PARTIAL SUCCESS ***")
                    print(f"Transcription successful, but no direct 'isn't that hot?' pattern found.")
                    print(f"The complete dialogue may still contain Teal'c's response in different wording.")
                
            else:
                print(f"\n*** ALL TRANSCRIPTION METHODS FAILED ***")
                print("The audio file may contain:")
                print("- Only music/sound effects without speech")
                print("- Very poor audio quality")
                print("- Speech in a different language")
                print("- Only background noise")
                
                # Create failure report
                with open('workspace/transcription_final_failure.txt', 'w') as f:
                    f.write("TRANSCRIPTION FINAL FAILURE REPORT\n")
                    f.write("=" * 40 + "\n\n")
                    f.write(f"Video: Teal'c coffee scene (29 seconds)\n")
                    f.write(f"Audio file: {os.path.basename(enhanced_audio_file)}\n")
                    f.write(f"Audio size: {audio_size} bytes\n")
                    f.write(f"Duration: {duration_seconds:.1f} seconds\n\n")
                    f.write("Methods attempted:\n")
                    for method in transcription_methods:
                        f.write(f"- {method['name']} ({method['lang']})\n")
                    f.write("\nConclusion: Audio does not contain recognizable speech dialogue\n")
                
                print(f"Failure report saved to: workspace/transcription_final_failure.txt")
        
    except Exception as e:
        print(f"\n*** ERROR DURING TRANSCRIPTION PROCESS ***")
        print(f"Error: {str(e)}")
        import traceback
        print(f"Full error details: {traceback.format_exc()}")

print("\n*** TEAL'C DIALOGUE TRANSCRIPTION ATTEMPT COMPLETE ***")
```