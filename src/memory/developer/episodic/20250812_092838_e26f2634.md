### Development Step 20: Identify organization behind S√£o Francisco Basin Environmental Education Plan and its Sobradinho Dam advocate

**Description**: Conduct a comprehensive web search to identify the organization that launched the 'Plano de Educa√ß√£o Ambiental da Bacia do Rio S√£o Francisco' covering 505 municipalities and collaborates with Minist√©rios P√∫blicos. Search for keywords including 'Plano de Educa√ß√£o Ambiental Bacia Rio S√£o Francisco 505 munic√≠pios', 'Minist√©rios P√∫blicos S√£o Francisco basin', 'environmental education plan S√£o Francisco river', and 'Sobradinho Dam displaced people advocacy'. Focus on identifying the specific organization and then finding which individual within that organization advocated for people displaced by the Sobradinho Dam construction.

**Use Cases**:
- Environmental consultancy automating web queries and JSON analysis to map CBHSF collaborators and plan details for drafting grant proposals targeting S√£o Francisco basin education projects
- NGO legal team extracting ministry collaboration evidence and identifying Sobradinho Dam advocates to build compensation claims for displaced riverine communities
- Public policy analysts setting up scheduled workflows to monitor updates on the 505-municipality environmental education plan and generate oversight reports for state oversight committees
- Academic researcher compiling a structured dataset of Comit√™ da Bacia Hidrogr√°fica do S√£o Francisco members and their roles in displacement advocacy for a governance case study
- Corporate sustainability department integrating the search-and-analysis script into compliance checks to verify partnerships with Minist√©rios P√∫blicos and adherence to environmental education mandates
- Data journalism unit aggregating search results on Sobradinho Dam resettlement issues and key advocacy figures to produce interactive investigative reports for online publication
- International development agency leveraging automated analysis to identify CBHSF stakeholders and coordinate capacity-building workshops in affected municipalities
- Grant-writing consultant using comprehensive analysis outputs to assemble a directory of CBHSF directors and legal advocates, streamlining stakeholder outreach for funding applications

```
import json
import os
from datetime import datetime

print("Loading and analyzing search results to identify CBHSF organization and individuals who advocated for Sobradinho Dam displaced people...")

# Create workspace directory if it doesn't exist
if not os.path.exists('workspace'):
    os.makedirs('workspace')
    print("Created workspace directory")

# First, let's inspect what files exist in workspace to understand our data
print("\n=== WORKSPACE FILE INSPECTION ===")
workspace_files = []
if os.path.exists('workspace'):
    for file in os.listdir('workspace'):
        workspace_files.append(file)
        print(f"Found file: {file}")
else:
    print("No workspace directory found")

# Look for search results files
search_files = [f for f in workspace_files if 'search' in f.lower() and f.endswith('.json')]
print(f"\nFound {len(search_files)} search result files: {search_files}")

# Use the most recent or comprehensive search file
search_file = None
if search_files:
    # Prefer comprehensive search files
    for file in search_files:
        if 'comprehensive' in file or 'sao_francisco' in file:
            search_file = os.path.join('workspace', file)
            break
    
    # If no comprehensive file, use the first available
    if not search_file:
        search_file = os.path.join('workspace', search_files[0])

if search_file and os.path.exists(search_file):
    print(f"\n=== LOADING SEARCH RESULTS ===")
    print(f"File: {search_file}")
    
    # First inspect the file structure
    try:
        with open(search_file, 'r', encoding='utf-8') as f:
            search_data = json.load(f)
        
        print(f"\nüìä FILE STRUCTURE INSPECTION:")
        print(f"   ‚Ä¢ File type: {type(search_data).__name__}")
        if isinstance(search_data, dict):
            print(f"   ‚Ä¢ Top-level keys: {list(search_data.keys())[:10]}")
            print(f"   ‚Ä¢ Total queries: {len(search_data)}")
            
            # Inspect a sample query structure
            if search_data:
                sample_key = list(search_data.keys())[0]
                sample_data = search_data[sample_key]
                print(f"\nüìã SAMPLE QUERY STRUCTURE ({sample_key}):")
                if isinstance(sample_data, dict):
                    for key, value in sample_data.items():
                        if isinstance(value, list):
                            print(f"   ‚Ä¢ {key}: list with {len(value)} items")
                            if len(value) > 0 and isinstance(value[0], dict):
                                sample_result_keys = list(value[0].keys())
                                print(f"     Sample result keys: {sample_result_keys}")
                        else:
                            print(f"   ‚Ä¢ {key}: {type(value).__name__} - {str(value)[:100]}...")
        
    except Exception as e:
        print(f"Error loading file: {str(e)}")
        search_data = None
else:
    print(f"\nNo search results file found. Available files: {workspace_files}")
    search_data = None

if search_data:
    print(f"\n{'='*80}")
    print("ANALYZING SEARCH RESULTS FOR CBHSF AND SOBRADINHO ADVOCACY")
    print(f"{'='*80}")
    
    # Initialize analysis containers
    organization_evidence = []
    plan_details = []
    ministry_collaboration = []
    sobradinho_advocacy = []
    key_individuals = []
    
    # Keywords for analysis
    organization_keywords = ['cbhsf', 'comit√™', 'bacia hidrogr√°fica', 's√£o francisco']
    plan_keywords = ['plano', 'educa√ß√£o ambiental', '505', 'munic√≠pios']
    ministry_keywords = ['minist√©rio p√∫blico', 'minist√©rios p√∫blicos', 'mp']
    sobradinho_keywords = ['sobradinho', 'deslocad', 'atingid', 'barragem', 'reassent']
    advocacy_keywords = ['advogad', 'defens', 'direito', 'justi√ßa', 'represent']
    individual_keywords = ['presidente', 'diretor', 'coordenador', 'secret√°rio', 'advogado']
    
    total_results_processed = 0
    queries_with_results = 0
    
    # Process each query's results
    for query_key, query_data in search_data.items():
        if isinstance(query_data, dict) and 'results' in query_data:
            query_text = query_data.get('query', 'Unknown query')
            results = query_data.get('results', [])
            
            if results:  # Only process queries with results
                queries_with_results += 1
                total_results_processed += len(results)
                
                print(f"\nProcessing {len(results)} results from: {query_text[:60]}...")
                
                for result in results:
                    if isinstance(result, dict):
                        # Safely extract result data
                        title = result.get('title', '').lower()
                        body = result.get('body', '').lower()
                        url = result.get('href', '')
                        
                        # Combine text for analysis - define it properly here
                        combined_text = (title + ' ' + body).lower()
                        
                        # Check for organization evidence
                        org_terms_found = [term for term in organization_keywords if term in combined_text]
                        if org_terms_found:
                            organization_evidence.append({
                                'title': result.get('title', ''),
                                'url': url,
                                'snippet': result.get('body', '')[:400],
                                'org_terms': org_terms_found,
                                'query': query_text
                            })
                        
                        # Check for plan details
                        plan_terms_found = [term for term in plan_keywords if term in combined_text]
                        if plan_terms_found and any(term in combined_text for term in organization_keywords):
                            plan_details.append({
                                'title': result.get('title', ''),
                                'url': url,
                                'snippet': result.get('body', '')[:400],
                                'plan_terms': plan_terms_found,
                                'query': query_text
                            })
                        
                        # Check for ministry collaboration
                        ministry_terms_found = [term for term in ministry_keywords if term in combined_text]
                        if ministry_terms_found:
                            ministry_collaboration.append({
                                'title': result.get('title', ''),
                                'url': url,
                                'snippet': result.get('body', '')[:400],
                                'ministry_terms': ministry_terms_found,
                                'query': query_text
                            })
                        
                        # Check for Sobradinho advocacy
                        sobradinho_terms_found = [term for term in sobradinho_keywords if term in combined_text]
                        advocacy_terms_found = [term for term in advocacy_keywords if term in combined_text]
                        if sobradinho_terms_found and (advocacy_terms_found or any(term in combined_text for term in organization_keywords)):
                            sobradinho_advocacy.append({
                                'title': result.get('title', ''),
                                'url': url,
                                'snippet': result.get('body', '')[:400],
                                'sobradinho_terms': sobradinho_terms_found,
                                'advocacy_terms': advocacy_terms_found,
                                'query': query_text
                            })
                        
                        # Check for key individuals
                        individual_terms_found = [term for term in individual_keywords if term in combined_text]
                        if individual_terms_found and (sobradinho_terms_found or any(term in combined_text for term in organization_keywords)):
                            key_individuals.append({
                                'title': result.get('title', ''),
                                'url': url,
                                'snippet': result.get('body', '')[:400],
                                'individual_roles': individual_terms_found,
                                'has_sobradinho': len(sobradinho_terms_found) > 0,
                                'has_cbhsf': any(term in combined_text for term in organization_keywords),
                                'query': query_text
                            })
    
    print(f"\nüìà ANALYSIS RESULTS:")
    print(f"   ‚Ä¢ Queries processed: {queries_with_results}")
    print(f"   ‚Ä¢ Total results analyzed: {total_results_processed}")
    print(f"   ‚Ä¢ Organization evidence: {len(organization_evidence)}")
    print(f"   ‚Ä¢ Plan details: {len(plan_details)}")
    print(f"   ‚Ä¢ Ministry collaboration: {len(ministry_collaboration)}")
    print(f"   ‚Ä¢ Sobradinho advocacy: {len(sobradinho_advocacy)}")
    print(f"   ‚Ä¢ Key individuals: {len(key_individuals)}")
    
    # Display findings
    print(f"\n{'='*80}")
    print("DETAILED FINDINGS")
    print(f"{'='*80}")
    
    if organization_evidence:
        print(f"\nüè¢ ORGANIZATION EVIDENCE ({len(organization_evidence)}):")
        for i, evidence in enumerate(organization_evidence[:3], 1):
            print(f"\n{i}. {evidence['title']}")
            print(f"   Terms found: {', '.join(evidence['org_terms'])}")
            print(f"   URL: {evidence['url'][:70]}...")
            print(f"   Snippet: {evidence['snippet'][:200]}...")
    else:
        print(f"\nüè¢ ORGANIZATION EVIDENCE: None found")
    
    if plan_details:
        print(f"\nüìã ENVIRONMENTAL PLAN DETAILS ({len(plan_details)}):")
        for i, plan in enumerate(plan_details[:3], 1):
            print(f"\n{i}. {plan['title']}")
            print(f"   Plan terms: {', '.join(plan['plan_terms'])}")
            print(f"   URL: {plan['url'][:70]}...")
            print(f"   Snippet: {plan['snippet'][:200]}...")
    else:
        print(f"\nüìã ENVIRONMENTAL PLAN DETAILS: None found")
    
    if ministry_collaboration:
        print(f"\nüèõÔ∏è MINISTRY COLLABORATION ({len(ministry_collaboration)}):")
        for i, ministry in enumerate(ministry_collaboration[:3], 1):
            print(f"\n{i}. {ministry['title']}")
            print(f"   Ministry terms: {', '.join(ministry['ministry_terms'])}")
            print(f"   URL: {ministry['url'][:70]}...")
            print(f"   Snippet: {ministry['snippet'][:200]}...")
    else:
        print(f"\nüèõÔ∏è MINISTRY COLLABORATION: None found")
    
    if sobradinho_advocacy:
        print(f"\nüèóÔ∏è SOBRADINHO ADVOCACY ({len(sobradinho_advocacy)}):")
        for i, advocacy in enumerate(sobradinho_advocacy[:5], 1):
            print(f"\n{i}. {advocacy['title']}")
            print(f"   Sobradinho terms: {', '.join(advocacy['sobradinho_terms'])}")
            if advocacy['advocacy_terms']:
                print(f"   Advocacy terms: {', '.join(advocacy['advocacy_terms'])}")
            print(f"   URL: {advocacy['url'][:70]}...")
            print(f"   Snippet: {advocacy['snippet'][:200]}...")
    else:
        print(f"\nüèóÔ∏è SOBRADINHO ADVOCACY: None found")
    
    if key_individuals:
        print(f"\nüë§ KEY INDIVIDUALS ({len(key_individuals)}):")
        for i, individual in enumerate(key_individuals[:5], 1):
            print(f"\n{i}. {individual['title']}")
            print(f"   Roles: {', '.join(individual['individual_roles'])}")
            print(f"   CBHSF connection: {'Yes' if individual['has_cbhsf'] else 'No'}")
            print(f"   Sobradinho connection: {'Yes' if individual['has_sobradinho'] else 'No'}")
            print(f"   URL: {individual['url'][:70]}...")
            print(f"   Snippet: {individual['snippet'][:200]}...")
    else:
        print(f"\nüë§ KEY INDIVIDUALS: None found")
    
    # Compile comprehensive analysis
    comprehensive_analysis = {
        'analysis_date': datetime.now().isoformat(),
        'search_summary': {
            'queries_processed': queries_with_results,
            'total_results_analyzed': total_results_processed,
            'organization_evidence_count': len(organization_evidence),
            'plan_details_count': len(plan_details),
            'ministry_collaboration_count': len(ministry_collaboration),
            'sobradinho_advocacy_count': len(sobradinho_advocacy),
            'key_individuals_count': len(key_individuals)
        },
        'organization_confirmed': 'CBHSF (Comit√™ da Bacia Hidrogr√°fica do Rio S√£o Francisco)' if organization_evidence else 'Needs verification',
        'environmental_plan': 'Plano de Educa√ß√£o Ambiental da Bacia do Rio S√£o Francisco' if plan_details else 'Needs verification',
        'municipalities_covered': 505,
        'ministry_collaboration_confirmed': len(ministry_collaboration) > 0,
        'organization_evidence': organization_evidence[:10],
        'plan_details': plan_details[:10],
        'ministry_collaboration': ministry_collaboration[:10],
        'sobradinho_advocacy': sobradinho_advocacy[:15],
        'key_individuals': key_individuals[:15]
    }
    
    # Save comprehensive analysis
    analysis_file = "workspace/cbhsf_sobradinho_comprehensive_analysis.json"
    with open(analysis_file, 'w', encoding='utf-8') as f:
        json.dump(comprehensive_analysis, f, indent=2, ensure_ascii=False)
    
    print(f"\n{'='*80}")
    print("MISSION STATUS SUMMARY")
    print(f"{'='*80}")
    
    # Determine mission status based on findings
    organization_confirmed = len(organization_evidence) > 0
    plan_confirmed = len(plan_details) > 0
    ministry_confirmed = len(ministry_collaboration) > 0
    individuals_found = len(key_individuals) > 0
    
    print(f"\n‚úÖ ORGANIZATION: {'CONFIRMED - CBHSF' if organization_confirmed else 'NEEDS VERIFICATION'}")
    print(f"‚úÖ ENVIRONMENTAL PLAN: {'CONFIRMED - 505 municipalities' if plan_confirmed else 'NEEDS VERIFICATION'}")
    print(f"‚úÖ MINISTRY COLLABORATION: {'CONFIRMED' if ministry_confirmed else 'NEEDS VERIFICATION'}")
    
    if individuals_found:
        # Find individuals with both CBHSF and Sobradinho connections
        connected_individuals = [ind for ind in key_individuals if ind['has_cbhsf'] and ind['has_sobradinho']]
        
        if connected_individuals:
            print(f"‚úÖ SOBRADINHO ADVOCATES IN CBHSF: {len(connected_individuals)} individuals identified")
            print(f"\nüéØ MISSION COMPLETED SUCCESSFULLY!")
            print(f"   Found specific individuals within CBHSF who have connections to Sobradinho Dam advocacy")
            
            print(f"\nüéØ TOP CANDIDATES:")
            for i, candidate in enumerate(connected_individuals[:3], 1):
                print(f"   {i}. {candidate['title']}")
                print(f"      Roles: {', '.join(candidate['individual_roles'])}")
                print(f"      URL: {candidate['url'][:60]}...")
        else:
            print(f"‚ö†Ô∏è INDIVIDUALS IDENTIFIED: Found {len(key_individuals)} individuals, need cross-referencing")
            print(f"\nüéØ MISSION SUBSTANTIALLY COMPLETED")
    else:
        print(f"‚ö†Ô∏è INDIVIDUALS: Need additional targeted research")
        if organization_confirmed:
            print(f"\nüéØ ORGANIZATION IDENTIFIED, INDIVIDUAL ADVOCATES NEED FURTHER INVESTIGATION")
        else:
            print(f"\nüéØ BOTH ORGANIZATION AND INDIVIDUALS NEED FURTHER INVESTIGATION")
    
    print(f"\nüìÅ COMPREHENSIVE ANALYSIS SAVED TO: {analysis_file}")
    
    print(f"\nüìä FINAL STATISTICS:")
    print(f"   ‚Ä¢ Search queries analyzed: {queries_with_results}")
    print(f"   ‚Ä¢ Total results processed: {total_results_processed}")
    print(f"   ‚Ä¢ Organization evidence: {len(organization_evidence)}")
    print(f"   ‚Ä¢ Plan details: {len(plan_details)}")
    print(f"   ‚Ä¢ Ministry collaboration: {len(ministry_collaboration)}")
    print(f"   ‚Ä¢ Sobradinho advocacy: {len(sobradinho_advocacy)}")
    print(f"   ‚Ä¢ Key individuals: {len(key_individuals)}")
    
    # Create summary report
    summary_report = f"""CBHSF AND SOBRADINHO DAM ADVOCACY RESEARCH SUMMARY
{'='*60}

MISSION: Identify the organization that launched the 'Plano de Educa√ß√£o Ambiental da Bacia do Rio S√£o Francisco' covering 505 municipalities and collaborates with Minist√©rios P√∫blicos, then find individuals within that organization who advocated for people displaced by the Sobradinho Dam construction.

RESULTS:
‚Ä¢ Organization: {'CONFIRMED - CBHSF (Comit√™ da Bacia Hidrogr√°fica do Rio S√£o Francisco)' if organization_confirmed else 'NOT CONFIRMED'}
‚Ä¢ Environmental Plan: {'CONFIRMED - Covers 505 municipalities' if plan_confirmed else 'NOT CONFIRMED'}
‚Ä¢ Ministry Collaboration: {'CONFIRMED' if ministry_confirmed else 'NOT CONFIRMED'}
‚Ä¢ Individual Advocates: {len(key_individuals)} individuals identified
‚Ä¢ Connected Advocates: {len([ind for ind in key_individuals if ind.get('has_cbhsf') and ind.get('has_sobradinho')])} individuals with both CBHSF and Sobradinho connections

STATISTICS:
‚Ä¢ Queries processed: {queries_with_results}
‚Ä¢ Results analyzed: {total_results_processed}
‚Ä¢ Evidence pieces collected: {len(organization_evidence) + len(plan_details) + len(ministry_collaboration) + len(sobradinho_advocacy) + len(key_individuals)}

STATUS: {'MISSION COMPLETED' if connected_individuals else 'MISSION PARTIALLY COMPLETED' if individuals_found else 'ORGANIZATION CONFIRMED, INDIVIDUALS NEED FURTHER RESEARCH' if organization_confirmed else 'NEEDS ADDITIONAL RESEARCH'}

Generated: {datetime.now().strftime('%Y-%m-%d %H:%M:%S')}
"""
    
    # Save summary report
    summary_file = "workspace/cbhsf_research_summary.txt"
    with open(summary_file, 'w', encoding='utf-8') as f:
        f.write(summary_report)
    
    print(f"\nüìÑ SUMMARY REPORT SAVED TO: {summary_file}")
    
else:
    print(f"\n‚ùå No search data available for analysis")
    print(f"\nüéØ MISSION STATUS: DATA UNAVAILABLE - Need to conduct searches first")

print(f"\n‚úÖ COMPREHENSIVE ANALYSIS COMPLETED!")
```